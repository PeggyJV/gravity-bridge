{"config":{"output_file":null,"full_docs":false,"pub_only":true,"reachable_only":true,"distro_crate":false,"signatures":false,"borrow_data":false},"version":"0.19.1","compilation":{"directory":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0","program":"/home/hannydevelop/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/bin/rls","arguments":["--crate-name","arc_swap","--edition=2018","/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","--json=diagnostic-rendered-ansi","--crate-type","lib","--emit=dep-info,metadata","-C","embed-bitcode=no","-C","debuginfo=2","-C","metadata=b8a9e7f51f307ca4","-C","extra-filename=-b8a9e7f51f307ca4","--out-dir","/home/hannydevelop/gravity-bridge/orchestrator/gorc/target/rls/debug/deps","-L","dependency=/home/hannydevelop/gravity-bridge/orchestrator/gorc/target/rls/debug/deps","--cap-lints","allow","--error-format=json","--sysroot","/home/hannydevelop/.rustup/toolchains/stable-x86_64-unknown-linux-gnu"],"output":"/home/hannydevelop/gravity-bridge/orchestrator/gorc/target/rls/debug/deps/libarc_swap-b8a9e7f51f307ca4.rmeta"},"prelude":{"crate_id":{"name":"arc_swap","disambiguator":[16550928478361691225,14046822129652764307]},"crate_root":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src","external_crates":[{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":1,"id":{"name":"std","disambiguator":[16244594805693024294,13769610595479902485]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":2,"id":{"name":"core","disambiguator":[9461532395471723626,17649752992216879242]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":3,"id":{"name":"compiler_builtins","disambiguator":[13102141027849022754,10844956084955862736]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":4,"id":{"name":"rustc_std_workspace_core","disambiguator":[10802439125609973726,12056872925128751599]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":5,"id":{"name":"alloc","disambiguator":[10377672983135696745,6222977342718677897]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":6,"id":{"name":"libc","disambiguator":[12556834526510219591,10145975442274216472]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":7,"id":{"name":"unwind","disambiguator":[1920608168423631117,11305390197699278538]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":8,"id":{"name":"cfg_if","disambiguator":[14153420169627805217,3922141685752559776]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":9,"id":{"name":"hashbrown","disambiguator":[8992588241071530954,2055378767109441873]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":10,"id":{"name":"rustc_std_workspace_alloc","disambiguator":[6584924783227651491,7746393078969085327]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":11,"id":{"name":"rustc_demangle","disambiguator":[16866912217167506759,12404743428505733407]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":12,"id":{"name":"addr2line","disambiguator":[5891363554589716223,15364815277334307594]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":13,"id":{"name":"gimli","disambiguator":[15133864894733438722,17571364763769299029]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":14,"id":{"name":"object","disambiguator":[5376887079506337588,3050710466351220396]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":15,"id":{"name":"miniz_oxide","disambiguator":[3374711390048344050,17348866986865533303]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":16,"id":{"name":"adler","disambiguator":[16389676859204901274,11575250456210569958]}},{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","num":17,"id":{"name":"panic_unwind","disambiguator":[4785159557203218631,3838940703516147450]}}],"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":0,"byte_end":47801,"line_start":1,"line_end":1254,"column_start":1,"column_end":2}},"imports":[{"kind":"Use","ref_id":{"krate":0,"index":120},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5618,"byte_end":5623,"line_start":147,"line_end":147,"column_start":24,"column_end":29},"alias_span":null,"name":"AsRaw","value":"","parent":{"krate":0,"index":0}},{"kind":"Use","ref_id":{"krate":0,"index":874},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5647,"byte_end":5652,"line_start":148,"line_end":148,"column_start":23,"column_end":28},"alias_span":null,"name":"Cache","value":"","parent":{"krate":0,"index":0}},{"kind":"Use","ref_id":{"krate":0,"index":393},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5678,"byte_end":5684,"line_start":149,"line_end":149,"column_start":25,"column_end":31},"alias_span":null,"name":"RefCnt","value":"","parent":{"krate":0,"index":0}},{"kind":"Use","ref_id":{"krate":0,"index":554},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5790,"byte_end":5805,"line_start":152,"line_end":152,"column_start":27,"column_end":42},"alias_span":null,"name":"DefaultStrategy","value":"","parent":{"krate":0,"index":0}},{"kind":"Use","ref_id":{"krate":0,"index":555},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5807,"byte_end":5826,"line_start":152,"line_end":152,"column_start":44,"column_end":63},"alias_span":null,"name":"IndependentStrategy","value":"","parent":{"krate":0,"index":0}}],"defs":[{"kind":"Mod","id":{"krate":0,"index":0},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":0,"byte_end":47801,"line_start":1,"line_end":1254,"column_start":1,"column_end":2},"name":"","qualname":"::","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","parent":null,"children":[{"krate":0,"index":1},{"krate":0,"index":2},{"krate":0,"index":3},{"krate":0,"index":107},{"krate":0,"index":154},{"krate":0,"index":202},{"krate":0,"index":203},{"krate":0,"index":378},{"krate":0,"index":383},{"krate":0,"index":418},{"krate":0,"index":584},{"krate":0,"index":587},{"krate":0,"index":588},{"krate":0,"index":589},{"krate":0,"index":591},{"krate":0,"index":594},{"krate":0,"index":597},{"krate":0,"index":600},{"krate":0,"index":601},{"krate":0,"index":603},{"krate":0,"index":606},{"krate":0,"index":609},{"krate":0,"index":612},{"krate":0,"index":613},{"krate":0,"index":616},{"krate":0,"index":619},{"krate":0,"index":622},{"krate":0,"index":623},{"krate":0,"index":626},{"krate":0,"index":629},{"krate":0,"index":632},{"krate":0,"index":635},{"krate":0,"index":638},{"krate":0,"index":641},{"krate":0,"index":642},{"krate":0,"index":645},{"krate":0,"index":648},{"krate":0,"index":649},{"krate":0,"index":652},{"krate":0,"index":655},{"krate":0,"index":659},{"krate":0,"index":665},{"krate":0,"index":671},{"krate":0,"index":675},{"krate":0,"index":679},{"krate":0,"index":683},{"krate":0,"index":687},{"krate":0,"index":691},{"krate":0,"index":697},{"krate":0,"index":701},{"krate":0,"index":705},{"krate":0,"index":709},{"krate":0,"index":713},{"krate":0,"index":717},{"krate":0,"index":736},{"krate":0,"index":738},{"krate":0,"index":742},{"krate":0,"index":744},{"krate":0,"index":750}],"decl_id":null,"docs":" Making [`Arc`][Arc] itself atomic","sig":null,"attributes":[{"value":"warn(missing_docs)","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":36,"byte_end":58,"line_start":2,"line_end":2,"column_start":1,"column_end":23}},{"value":"/ Making [`Arc`][Arc] itself atomic","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":99,"byte_end":136,"line_start":5,"line_end":5,"column_start":1,"column_end":38}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":137,"byte_end":140,"line_start":6,"line_end":6,"column_start":1,"column_end":4}},{"value":"/ The [`ArcSwap`] type is a container for an `Arc` that can be changed atomically. Semantically,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":141,"byte_end":239,"line_start":7,"line_end":7,"column_start":1,"column_end":99}},{"value":"/ it is similar to something like `Atomic<Arc<T>>` (if there was such a thing) or","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":240,"byte_end":323,"line_start":8,"line_end":8,"column_start":1,"column_end":84}},{"value":"/ `RwLock<Arc<T>>` (but without the need for the locking). It is optimized for read-mostly","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":324,"byte_end":416,"line_start":9,"line_end":9,"column_start":1,"column_end":93}},{"value":"/ scenarios, with consistent performance characteristics.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":417,"byte_end":476,"line_start":10,"line_end":10,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":477,"byte_end":480,"line_start":11,"line_end":11,"column_start":1,"column_end":4}},{"value":"/ # Motivation","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":481,"byte_end":497,"line_start":12,"line_end":12,"column_start":1,"column_end":17}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":498,"byte_end":501,"line_start":13,"line_end":13,"column_start":1,"column_end":4}},{"value":"/ There are many situations in which one might want to have some data structure that is often","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":502,"byte_end":597,"line_start":14,"line_end":14,"column_start":1,"column_end":96}},{"value":"/ read and seldom updated. Some examples might be a configuration of a service, routing tables,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":598,"byte_end":695,"line_start":15,"line_end":15,"column_start":1,"column_end":98}},{"value":"/ snapshot of some data that is renewed every few minutes, etc.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":696,"byte_end":761,"line_start":16,"line_end":16,"column_start":1,"column_end":66}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":762,"byte_end":765,"line_start":17,"line_end":17,"column_start":1,"column_end":4}},{"value":"/ In all these cases one needs:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":766,"byte_end":799,"line_start":18,"line_end":18,"column_start":1,"column_end":34}},{"value":"/ * Being able to read the current value of the data structure, fast, often and concurrently from","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":800,"byte_end":899,"line_start":19,"line_end":19,"column_start":1,"column_end":100}},{"value":"/   many threads.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":900,"byte_end":919,"line_start":20,"line_end":20,"column_start":1,"column_end":20}},{"value":"/ * Using the same version of the data structure over longer period of time ‒ a query should be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":920,"byte_end":1019,"line_start":21,"line_end":21,"column_start":1,"column_end":98}},{"value":"/   answered by a consistent version of data, a packet should be routed either by an old or by a","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1020,"byte_end":1118,"line_start":22,"line_end":22,"column_start":1,"column_end":99}},{"value":"/   new version of the routing table but not by a combination, etc.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1119,"byte_end":1188,"line_start":23,"line_end":23,"column_start":1,"column_end":70}},{"value":"/ * Perform an update without disrupting the processing.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1189,"byte_end":1247,"line_start":24,"line_end":24,"column_start":1,"column_end":59}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1248,"byte_end":1251,"line_start":25,"line_end":25,"column_start":1,"column_end":4}},{"value":"/ The first idea would be to use [`RwLock<T>`][RwLock] and keep a read-lock for the whole time of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1252,"byte_end":1351,"line_start":26,"line_end":26,"column_start":1,"column_end":100}},{"value":"/ processing. Update would, however, pause all processing until done.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1352,"byte_end":1423,"line_start":27,"line_end":27,"column_start":1,"column_end":72}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1424,"byte_end":1427,"line_start":28,"line_end":28,"column_start":1,"column_end":4}},{"value":"/ Better option would be to have [`RwLock<Arc<T>>`][RwLock]. Then one would lock, clone the [Arc]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1428,"byte_end":1527,"line_start":29,"line_end":29,"column_start":1,"column_end":100}},{"value":"/ and unlock. This suffers from CPU-level contention (on the lock and on the reference count of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1528,"byte_end":1625,"line_start":30,"line_end":30,"column_start":1,"column_end":98}},{"value":"/ the [Arc]) which makes it relatively slow. Depending on the implementation, an update may be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1626,"byte_end":1722,"line_start":31,"line_end":31,"column_start":1,"column_end":97}},{"value":"/ blocked for arbitrary long time by a steady inflow of readers.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1723,"byte_end":1789,"line_start":32,"line_end":32,"column_start":1,"column_end":67}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1790,"byte_end":1793,"line_start":33,"line_end":33,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1794,"byte_end":1805,"line_start":34,"line_end":34,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::{Arc, RwLock};","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1806,"byte_end":1841,"line_start":35,"line_end":35,"column_start":1,"column_end":36}},{"value":"/ # use once_cell::sync::Lazy;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1842,"byte_end":1874,"line_start":36,"line_end":36,"column_start":1,"column_end":33}},{"value":"/ # struct RoutingTable; struct Packet; impl RoutingTable { fn route(&self, _: Packet) {} }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1875,"byte_end":1968,"line_start":37,"line_end":37,"column_start":1,"column_end":94}},{"value":"/ static ROUTING_TABLE: Lazy<RwLock<Arc<RoutingTable>>> = Lazy::new(|| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":1969,"byte_end":2043,"line_start":38,"line_end":38,"column_start":1,"column_end":75}},{"value":"/     RwLock::new(Arc::new(RoutingTable))","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2044,"byte_end":2087,"line_start":39,"line_end":39,"column_start":1,"column_end":44}},{"value":"/ });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2088,"byte_end":2095,"line_start":40,"line_end":40,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2096,"byte_end":2099,"line_start":41,"line_end":41,"column_start":1,"column_end":4}},{"value":"/ fn process_packet(packet: Packet) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2100,"byte_end":2139,"line_start":42,"line_end":42,"column_start":1,"column_end":40}},{"value":"/     let table = Arc::clone(&ROUTING_TABLE.read().unwrap());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2140,"byte_end":2203,"line_start":43,"line_end":43,"column_start":1,"column_end":64}},{"value":"/     table.route(packet);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2204,"byte_end":2232,"line_start":44,"line_end":44,"column_start":1,"column_end":29}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2233,"byte_end":2238,"line_start":45,"line_end":45,"column_start":1,"column_end":6}},{"value":"/ # fn main() { process_packet(Packet); }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2239,"byte_end":2282,"line_start":46,"line_end":46,"column_start":1,"column_end":44}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2283,"byte_end":2290,"line_start":47,"line_end":47,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2291,"byte_end":2294,"line_start":48,"line_end":48,"column_start":1,"column_end":4}},{"value":"/ The [ArcSwap] can be used instead, which solves the above problems and has better performance","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2295,"byte_end":2392,"line_start":49,"line_end":49,"column_start":1,"column_end":98}},{"value":"/ characteristics than the [RwLock], both in contended and non-contended scenarios.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2393,"byte_end":2478,"line_start":50,"line_end":50,"column_start":1,"column_end":86}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2479,"byte_end":2482,"line_start":51,"line_end":51,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2483,"byte_end":2494,"line_start":52,"line_end":52,"column_start":1,"column_end":12}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2495,"byte_end":2523,"line_start":53,"line_end":53,"column_start":1,"column_end":29}},{"value":"/ # use once_cell::sync::Lazy;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2524,"byte_end":2556,"line_start":54,"line_end":54,"column_start":1,"column_end":33}},{"value":"/ # struct RoutingTable; struct Packet; impl RoutingTable { fn route(&self, _: Packet) {} }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2557,"byte_end":2650,"line_start":55,"line_end":55,"column_start":1,"column_end":94}},{"value":"/ static ROUTING_TABLE: Lazy<ArcSwap<RoutingTable>> = Lazy::new(|| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2651,"byte_end":2721,"line_start":56,"line_end":56,"column_start":1,"column_end":71}},{"value":"/     ArcSwap::from_pointee(RoutingTable)","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2722,"byte_end":2765,"line_start":57,"line_end":57,"column_start":1,"column_end":44}},{"value":"/ });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2766,"byte_end":2773,"line_start":58,"line_end":58,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2774,"byte_end":2777,"line_start":59,"line_end":59,"column_start":1,"column_end":4}},{"value":"/ fn process_packet(packet: Packet) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2778,"byte_end":2817,"line_start":60,"line_end":60,"column_start":1,"column_end":40}},{"value":"/     let table = ROUTING_TABLE.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2818,"byte_end":2859,"line_start":61,"line_end":61,"column_start":1,"column_end":42}},{"value":"/     table.route(packet);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2860,"byte_end":2888,"line_start":62,"line_end":62,"column_start":1,"column_end":29}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2889,"byte_end":2894,"line_start":63,"line_end":63,"column_start":1,"column_end":6}},{"value":"/ # fn main() { process_packet(Packet); }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2895,"byte_end":2938,"line_start":64,"line_end":64,"column_start":1,"column_end":44}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2939,"byte_end":2946,"line_start":65,"line_end":65,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2947,"byte_end":2950,"line_start":66,"line_end":66,"column_start":1,"column_end":4}},{"value":"/ # Crate contents","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2951,"byte_end":2971,"line_start":67,"line_end":67,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2972,"byte_end":2975,"line_start":68,"line_end":68,"column_start":1,"column_end":4}},{"value":"/ At the heart of the crate there are [`ArcSwap`] and [`ArcSwapOption`] types, containers for an","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":2976,"byte_end":3074,"line_start":69,"line_end":69,"column_start":1,"column_end":99}},{"value":"/ [`Arc`] and [`Option<Arc>`][Option].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3075,"byte_end":3115,"line_start":70,"line_end":70,"column_start":1,"column_end":41}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3116,"byte_end":3119,"line_start":71,"line_end":71,"column_start":1,"column_end":4}},{"value":"/ Technically, these are type aliases for partial instantiations of the [`ArcSwapAny`] type. The","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3120,"byte_end":3218,"line_start":72,"line_end":72,"column_start":1,"column_end":99}},{"value":"/ [`ArcSwapAny`] is more flexible and allows tweaking of many things (can store other things than","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3219,"byte_end":3318,"line_start":73,"line_end":73,"column_start":1,"column_end":100}},{"value":"/ [`Arc`]s, can configure the locking [`Strategy`]). For details about the tweaking, see the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3319,"byte_end":3413,"line_start":74,"line_end":74,"column_start":1,"column_end":95}},{"value":"/ documentation of the [`strategy`] module and the [`RefCnt`] trait.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3414,"byte_end":3484,"line_start":75,"line_end":75,"column_start":1,"column_end":71}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3485,"byte_end":3488,"line_start":76,"line_end":76,"column_start":1,"column_end":4}},{"value":"/ The [`cache`] module provides means for speeding up read access of the contained data at the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3489,"byte_end":3585,"line_start":77,"line_end":77,"column_start":1,"column_end":97}},{"value":"/ cost of delayed reclamation.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3586,"byte_end":3618,"line_start":78,"line_end":78,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3619,"byte_end":3622,"line_start":79,"line_end":79,"column_start":1,"column_end":4}},{"value":"/ The [`access`] module can be used to do projections into the contained data to separate parts","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3623,"byte_end":3720,"line_start":80,"line_end":80,"column_start":1,"column_end":98}},{"value":"/ of application from each other (eg. giving a component access to only its own part of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3721,"byte_end":3810,"line_start":81,"line_end":81,"column_start":1,"column_end":90}},{"value":"/ configuration while still having it reloaded as a whole).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3811,"byte_end":3872,"line_start":82,"line_end":82,"column_start":1,"column_end":62}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3873,"byte_end":3876,"line_start":83,"line_end":83,"column_start":1,"column_end":4}},{"value":"/ # Before using","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3877,"byte_end":3895,"line_start":84,"line_end":84,"column_start":1,"column_end":19}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3896,"byte_end":3899,"line_start":85,"line_end":85,"column_start":1,"column_end":4}},{"value":"/ The data structure is a bit niche. Before using, please check the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3900,"byte_end":3969,"line_start":86,"line_end":86,"column_start":1,"column_end":70}},{"value":"/ [limitations and common pitfalls][docs::limitations] and the [performance","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":3970,"byte_end":4047,"line_start":87,"line_end":87,"column_start":1,"column_end":78}},{"value":"/ characteristics][docs::performance], including choosing the right [read","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4048,"byte_end":4123,"line_start":88,"line_end":88,"column_start":1,"column_end":76}},{"value":"/ operation][docs::performance#read-operations].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4124,"byte_end":4174,"line_start":89,"line_end":89,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4175,"byte_end":4178,"line_start":90,"line_end":90,"column_start":1,"column_end":4}},{"value":"/ You can also get an inspiration about what's possible in the [common patterns][docs::patterns]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4179,"byte_end":4277,"line_start":91,"line_end":91,"column_start":1,"column_end":99}},{"value":"/ section.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4278,"byte_end":4290,"line_start":92,"line_end":92,"column_start":1,"column_end":13}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4291,"byte_end":4294,"line_start":93,"line_end":93,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4295,"byte_end":4309,"line_start":94,"line_end":94,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4310,"byte_end":4313,"line_start":95,"line_end":95,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4314,"byte_end":4325,"line_start":96,"line_end":96,"column_start":1,"column_end":12}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4326,"byte_end":4349,"line_start":97,"line_end":97,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4350,"byte_end":4353,"line_start":98,"line_end":98,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4354,"byte_end":4380,"line_start":99,"line_end":99,"column_start":1,"column_end":27}},{"value":"/ use crossbeam_utils::thread;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4381,"byte_end":4413,"line_start":100,"line_end":100,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4414,"byte_end":4417,"line_start":101,"line_end":101,"column_start":1,"column_end":4}},{"value":"/ fn main() {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4418,"byte_end":4433,"line_start":102,"line_end":102,"column_start":1,"column_end":16}},{"value":"/     let config = ArcSwap::from(Arc::new(String::default()));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4434,"byte_end":4498,"line_start":103,"line_end":103,"column_start":1,"column_end":65}},{"value":"/     thread::scope(|scope| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4499,"byte_end":4530,"line_start":104,"line_end":104,"column_start":1,"column_end":32}},{"value":"/         scope.spawn(|_| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4531,"byte_end":4560,"line_start":105,"line_end":105,"column_start":1,"column_end":30}},{"value":"/             let new_conf = Arc::new(\"New configuration\".to_owned());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4561,"byte_end":4633,"line_start":106,"line_end":106,"column_start":1,"column_end":73}},{"value":"/             config.store(new_conf);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4634,"byte_end":4673,"line_start":107,"line_end":107,"column_start":1,"column_end":40}},{"value":"/         });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4674,"byte_end":4689,"line_start":108,"line_end":108,"column_start":1,"column_end":16}},{"value":"/         for _ in 0..10 {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4690,"byte_end":4718,"line_start":109,"line_end":109,"column_start":1,"column_end":29}},{"value":"/             scope.spawn(|_| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4719,"byte_end":4752,"line_start":110,"line_end":110,"column_start":1,"column_end":34}},{"value":"/                 loop {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4753,"byte_end":4779,"line_start":111,"line_end":111,"column_start":1,"column_end":27}},{"value":"/                     let cfg = config.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4780,"byte_end":4828,"line_start":112,"line_end":112,"column_start":1,"column_end":49}},{"value":"/                     if !cfg.is_empty() {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4829,"byte_end":4873,"line_start":113,"line_end":113,"column_start":1,"column_end":45}},{"value":"/                         assert_eq!(**cfg, \"New configuration\");","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4874,"byte_end":4941,"line_start":114,"line_end":114,"column_start":1,"column_end":68}},{"value":"/                         return;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4942,"byte_end":4977,"line_start":115,"line_end":115,"column_start":1,"column_end":36}},{"value":"/                     }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":4978,"byte_end":5003,"line_start":116,"line_end":116,"column_start":1,"column_end":26}},{"value":"/                 }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5004,"byte_end":5025,"line_start":117,"line_end":117,"column_start":1,"column_end":22}},{"value":"/             });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5026,"byte_end":5045,"line_start":118,"line_end":118,"column_start":1,"column_end":20}},{"value":"/         }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5046,"byte_end":5059,"line_start":119,"line_end":119,"column_start":1,"column_end":14}},{"value":"/     }).unwrap();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5060,"byte_end":5080,"line_start":120,"line_end":120,"column_start":1,"column_end":21}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5081,"byte_end":5086,"line_start":121,"line_end":121,"column_start":1,"column_end":6}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5087,"byte_end":5094,"line_start":122,"line_end":122,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5095,"byte_end":5098,"line_start":123,"line_end":123,"column_start":1,"column_end":4}},{"value":"/ [RwLock]: https://doc.rust-lang.org/std/sync/struct.RwLock.html","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5099,"byte_end":5166,"line_start":124,"line_end":124,"column_start":1,"column_end":68}}]},{"kind":"Mod","id":{"krate":0,"index":3},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"access","qualname":"::access","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","parent":null,"children":[{"krate":0,"index":4},{"krate":0,"index":5},{"krate":0,"index":7},{"krate":0,"index":10},{"krate":0,"index":13},{"krate":0,"index":16},{"krate":0,"index":19},{"krate":0,"index":22},{"krate":0,"index":23},{"krate":0,"index":26},{"krate":0,"index":29},{"krate":0,"index":33},{"krate":0,"index":39},{"krate":0,"index":753},{"krate":0,"index":758},{"krate":0,"index":44},{"krate":0,"index":49},{"krate":0,"index":54},{"krate":0,"index":59},{"krate":0,"index":64},{"krate":0,"index":68},{"krate":0,"index":72},{"krate":0,"index":75},{"krate":0,"index":762},{"krate":0,"index":782},{"krate":0,"index":776},{"krate":0,"index":770},{"krate":0,"index":79},{"krate":0,"index":787},{"krate":0,"index":804},{"krate":0,"index":799},{"krate":0,"index":794},{"krate":0,"index":86},{"krate":0,"index":92},{"krate":0,"index":808},{"krate":0,"index":839},{"krate":0,"index":836},{"krate":0,"index":833},{"krate":0,"index":828},{"krate":0,"index":830},{"krate":0,"index":822},{"krate":0,"index":824},{"krate":0,"index":819},{"krate":0,"index":816},{"krate":0,"index":812},{"krate":0,"index":99},{"krate":0,"index":841},{"krate":0,"index":872},{"krate":0,"index":869},{"krate":0,"index":866},{"krate":0,"index":861},{"krate":0,"index":863},{"krate":0,"index":855},{"krate":0,"index":857},{"krate":0,"index":852},{"krate":0,"index":849},{"krate":0,"index":845},{"krate":0,"index":103}],"decl_id":null,"docs":" Abstracting over accessing parts of stored value.","sig":null,"attributes":[{"value":"deny(unsafe_code)","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":47803,"byte_end":47824,"line_start":1,"line_end":1,"column_start":1,"column_end":22}},{"value":"/ Abstracting over accessing parts of stored value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":47826,"byte_end":47879,"line_start":3,"line_end":3,"column_start":1,"column_end":54}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":47880,"byte_end":47883,"line_start":4,"line_end":4,"column_start":1,"column_end":4}},{"value":"/ Sometimes, there's a big globalish data structure (like a configuration for the whole program).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":47884,"byte_end":47983,"line_start":5,"line_end":5,"column_start":1,"column_end":100}},{"value":"/ Then there are parts of the program that need access to up-to-date version of their *part* of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":47984,"byte_end":48081,"line_start":6,"line_end":6,"column_start":1,"column_end":98}},{"value":"/ the configuration, but for reasons of code separation and reusability, it is not desirable to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48082,"byte_end":48179,"line_start":7,"line_end":7,"column_start":1,"column_end":98}},{"value":"/ pass the whole configuration to each of the parts.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48180,"byte_end":48234,"line_start":8,"line_end":8,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48235,"byte_end":48238,"line_start":9,"line_end":9,"column_start":1,"column_end":4}},{"value":"/ This module provides means to grant the parts access to the relevant subsets of such global","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48239,"byte_end":48334,"line_start":10,"line_end":10,"column_start":1,"column_end":96}},{"value":"/ data structure while masking the fact it is part of the bigger whole from the component.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48335,"byte_end":48427,"line_start":11,"line_end":11,"column_start":1,"column_end":93}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48428,"byte_end":48431,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ Note that the [`cache`][crate::cache] module has its own [`Access`][crate::cache::Access] trait","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48432,"byte_end":48531,"line_start":13,"line_end":13,"column_start":1,"column_end":100}},{"value":"/ that serves a similar purpose, but with cached access. The signatures are different, therefore","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48532,"byte_end":48630,"line_start":14,"line_end":14,"column_start":1,"column_end":99}},{"value":"/ an incompatible trait.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48631,"byte_end":48657,"line_start":15,"line_end":15,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48658,"byte_end":48661,"line_start":16,"line_end":16,"column_start":1,"column_end":4}},{"value":"/ # The general idea","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48662,"byte_end":48684,"line_start":17,"line_end":17,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48685,"byte_end":48688,"line_start":18,"line_end":18,"column_start":1,"column_end":4}},{"value":"/ Each part of the code accepts generic [`Access<T>`][Access] for the `T` of its interest. This","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48689,"byte_end":48786,"line_start":19,"line_end":19,"column_start":1,"column_end":98}},{"value":"/ provides means to load current version of the structure behind the scenes and get only the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48787,"byte_end":48881,"line_start":20,"line_end":20,"column_start":1,"column_end":95}},{"value":"/ relevant part, without knowing what the big structure is.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48882,"byte_end":48943,"line_start":21,"line_end":21,"column_start":1,"column_end":62}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48944,"byte_end":48947,"line_start":22,"line_end":22,"column_start":1,"column_end":4}},{"value":"/ For technical reasons, the [`Access`] trait is not object safe. If type erasure is desired, it","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":48948,"byte_end":49046,"line_start":23,"line_end":23,"column_start":1,"column_end":99}},{"value":"/ is possible use the [`DynAccess`][crate::access::DynAccess] instead, which is object safe, but","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49047,"byte_end":49145,"line_start":24,"line_end":24,"column_start":1,"column_end":99}},{"value":"/ slightly slower.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49146,"byte_end":49166,"line_start":25,"line_end":25,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49167,"byte_end":49170,"line_start":26,"line_end":26,"column_start":1,"column_end":4}},{"value":"/ For some cases, it is possible to use [`ArcSwapAny::map`]. If that is not flexible enough, the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49171,"byte_end":49269,"line_start":27,"line_end":27,"column_start":1,"column_end":99}},{"value":"/ [`Map`] type can be created directly.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49270,"byte_end":49311,"line_start":28,"line_end":28,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49312,"byte_end":49315,"line_start":29,"line_end":29,"column_start":1,"column_end":4}},{"value":"/ Note that the [`Access`] trait is also implemented for [`ArcSwapAny`] itself. Additionally,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49316,"byte_end":49411,"line_start":30,"line_end":30,"column_start":1,"column_end":96}},{"value":"/ there's the [`Constant`][crate::access::Constant] helper type, which is useful mostly for","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49412,"byte_end":49505,"line_start":31,"line_end":31,"column_start":1,"column_end":94}},{"value":"/ testing (it doesn't allow reloading).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49506,"byte_end":49547,"line_start":32,"line_end":32,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49548,"byte_end":49551,"line_start":33,"line_end":33,"column_start":1,"column_end":4}},{"value":"/ # Performance","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49552,"byte_end":49569,"line_start":34,"line_end":34,"column_start":1,"column_end":18}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49570,"byte_end":49573,"line_start":35,"line_end":35,"column_start":1,"column_end":4}},{"value":"/ In general, these utilities use [`ArcSwapAny::load`] internally and then apply the provided","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49574,"byte_end":49669,"line_start":36,"line_end":36,"column_start":1,"column_end":96}},{"value":"/ transformation. This has several consequences:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49670,"byte_end":49720,"line_start":37,"line_end":37,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49721,"byte_end":49724,"line_start":38,"line_end":38,"column_start":1,"column_end":4}},{"value":"/ * Limitations of the [`load`][ArcSwapAny::load] apply ‒ including the recommendation to not","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49725,"byte_end":49822,"line_start":39,"line_end":39,"column_start":1,"column_end":96}},{"value":"/   hold the returned guard object for too long, but long enough to get consistency.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49823,"byte_end":49909,"line_start":40,"line_end":40,"column_start":1,"column_end":87}},{"value":"/ * The transformation should be cheap ‒ optimally just borrowing into the structure.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":49910,"byte_end":49999,"line_start":41,"line_end":41,"column_start":1,"column_end":88}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50000,"byte_end":50003,"line_start":42,"line_end":42,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50004,"byte_end":50018,"line_start":43,"line_end":43,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50019,"byte_end":50022,"line_start":44,"line_end":44,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50023,"byte_end":50034,"line_start":45,"line_end":45,"column_start":1,"column_end":12}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50035,"byte_end":50058,"line_start":46,"line_end":46,"column_start":1,"column_end":24}},{"value":"/ use std::thread;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50059,"byte_end":50079,"line_start":47,"line_end":47,"column_start":1,"column_end":21}},{"value":"/ use std::time::Duration;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50080,"byte_end":50108,"line_start":48,"line_end":48,"column_start":1,"column_end":29}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50109,"byte_end":50112,"line_start":49,"line_end":49,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50113,"byte_end":50139,"line_start":50,"line_end":50,"column_start":1,"column_end":27}},{"value":"/ use arc_swap::access::{Access, Constant, Map};","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50140,"byte_end":50190,"line_start":51,"line_end":51,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50191,"byte_end":50194,"line_start":52,"line_end":52,"column_start":1,"column_end":4}},{"value":"/ fn work_with_usize<A: Access<usize> + Send + 'static>(a: A) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50195,"byte_end":50260,"line_start":53,"line_end":53,"column_start":1,"column_end":66}},{"value":"/     thread::spawn(move || {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50261,"byte_end":50292,"line_start":54,"line_end":54,"column_start":1,"column_end":32}},{"value":"/         loop {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50293,"byte_end":50311,"line_start":55,"line_end":55,"column_start":1,"column_end":19}},{"value":"/             let value = a.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50312,"byte_end":50349,"line_start":56,"line_end":56,"column_start":1,"column_end":38}},{"value":"/             println!(\"{}\", *value);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50350,"byte_end":50389,"line_start":57,"line_end":57,"column_start":1,"column_end":40}},{"value":"/             // Not strictly necessary, but dropping the guard can free some resources, like","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50390,"byte_end":50485,"line_start":58,"line_end":58,"column_start":1,"column_end":96}},{"value":"/             // slots for tracking what values are still in use. We do it before the sleeping,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50486,"byte_end":50583,"line_start":59,"line_end":59,"column_start":1,"column_end":98}},{"value":"/             // not at the end of the scope.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50584,"byte_end":50631,"line_start":60,"line_end":60,"column_start":1,"column_end":48}},{"value":"/             drop(value);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50632,"byte_end":50660,"line_start":61,"line_end":61,"column_start":1,"column_end":29}},{"value":"/             thread::sleep(Duration::from_millis(50));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50661,"byte_end":50718,"line_start":62,"line_end":62,"column_start":1,"column_end":58}},{"value":"/         }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50719,"byte_end":50732,"line_start":63,"line_end":63,"column_start":1,"column_end":14}},{"value":"/     });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50733,"byte_end":50744,"line_start":64,"line_end":64,"column_start":1,"column_end":12}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50745,"byte_end":50750,"line_start":65,"line_end":65,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50751,"byte_end":50754,"line_start":66,"line_end":66,"column_start":1,"column_end":4}},{"value":"/ // Passing the whole thing directly","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50755,"byte_end":50794,"line_start":67,"line_end":67,"column_start":1,"column_end":40}},{"value":"/ // (If we kept another Arc to it, we could change the value behind the scenes)","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50795,"byte_end":50877,"line_start":68,"line_end":68,"column_start":1,"column_end":83}},{"value":"/ work_with_usize(Arc::new(ArcSwap::from_pointee(42)));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50878,"byte_end":50935,"line_start":69,"line_end":69,"column_start":1,"column_end":58}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50936,"byte_end":50939,"line_start":70,"line_end":70,"column_start":1,"column_end":4}},{"value":"/ // Passing a subset of a structure","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50940,"byte_end":50978,"line_start":71,"line_end":71,"column_start":1,"column_end":39}},{"value":"/ struct Cfg {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50979,"byte_end":50995,"line_start":72,"line_end":72,"column_start":1,"column_end":17}},{"value":"/     value: usize,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":50996,"byte_end":51017,"line_start":73,"line_end":73,"column_start":1,"column_end":22}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51018,"byte_end":51023,"line_start":74,"line_end":74,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51024,"byte_end":51027,"line_start":75,"line_end":75,"column_start":1,"column_end":4}},{"value":"/ let cfg = Arc::new(ArcSwap::from_pointee(Cfg { value: 0 }));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51028,"byte_end":51092,"line_start":76,"line_end":76,"column_start":1,"column_end":65}},{"value":"/ work_with_usize(Map::new(Arc::clone(&cfg), |cfg: &Cfg| &cfg.value));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51093,"byte_end":51165,"line_start":77,"line_end":77,"column_start":1,"column_end":73}},{"value":"/ cfg.store(Arc::new(Cfg { value: 42 }));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51166,"byte_end":51209,"line_start":78,"line_end":78,"column_start":1,"column_end":44}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51210,"byte_end":51213,"line_start":79,"line_end":79,"column_start":1,"column_end":4}},{"value":"/ // Passing a constant that can't change. Useful mostly for testing purposes.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51214,"byte_end":51294,"line_start":80,"line_end":80,"column_start":1,"column_end":81}},{"value":"/ work_with_usize(Constant(42));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51295,"byte_end":51329,"line_start":81,"line_end":81,"column_start":1,"column_end":35}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51330,"byte_end":51337,"line_start":82,"line_end":82,"column_start":1,"column_end":8}}]},{"kind":"Trait","id":{"krate":0,"index":29},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51764,"byte_end":51770,"line_start":97,"line_end":97,"column_start":11,"column_end":17},"name":"Access","qualname":"::access::Access","value":"Access<T>","parent":null,"children":[{"krate":0,"index":31},{"krate":0,"index":32}],"decl_id":null,"docs":" Abstracts over ways code can get access to a value of type `T`.","sig":null,"attributes":[{"value":"/ Abstracts over ways code can get access to a value of type `T`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51520,"byte_end":51587,"line_start":93,"line_end":93,"column_start":1,"column_end":68}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51588,"byte_end":51591,"line_start":94,"line_end":94,"column_start":1,"column_end":4}},{"value":"/ This is the trait that parts of code will use when accessing a subpart of the big data","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51592,"byte_end":51682,"line_start":95,"line_end":95,"column_start":1,"column_end":91}},{"value":"/ structure. See the [module documentation](index.html) for details.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51683,"byte_end":51753,"line_start":96,"line_end":96,"column_start":1,"column_end":71}}]},{"kind":"Type","id":{"krate":0,"index":31},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52065,"byte_end":52070,"line_start":103,"line_end":103,"column_start":10,"column_end":15},"name":"Guard","qualname":"::access::Access::Guard","value":"type Guard: Deref<Target = T>;","parent":{"krate":0,"index":29},"children":[],"decl_id":null,"docs":" A guard object containing the value and keeping it alive.","sig":null,"attributes":[{"value":"/ A guard object containing the value and keeping it alive.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51780,"byte_end":51841,"line_start":98,"line_end":98,"column_start":5,"column_end":66}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51846,"byte_end":51849,"line_start":99,"line_end":99,"column_start":5,"column_end":8}},{"value":"/ For technical reasons, the library doesn't allow direct access into the stored value. A","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51854,"byte_end":51945,"line_start":100,"line_end":100,"column_start":5,"column_end":96}},{"value":"/ temporary guard object must be loaded, that keeps the actual value alive for the time of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":51950,"byte_end":52042,"line_start":101,"line_end":101,"column_start":5,"column_end":97}},{"value":"/ use.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52047,"byte_end":52055,"line_start":102,"line_end":102,"column_start":5,"column_end":13}}]},{"kind":"Method","id":{"krate":0,"index":32},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52260,"byte_end":52264,"line_start":109,"line_end":109,"column_start":8,"column_end":12},"name":"load","qualname":"::access::Access::load","value":"pub fn load(&Self) -> Self::Guard","parent":{"krate":0,"index":29},"children":[],"decl_id":null,"docs":" The loading method.","sig":null,"attributes":[{"value":"/ The loading method.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52096,"byte_end":52119,"line_start":105,"line_end":105,"column_start":5,"column_end":28}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52124,"byte_end":52127,"line_start":106,"line_end":106,"column_start":5,"column_end":8}},{"value":"/ This returns the guard that holds the actual value. Should be called anew each time a fresh","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52132,"byte_end":52227,"line_start":107,"line_end":107,"column_start":5,"column_end":100}},{"value":"/ value is needed.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52232,"byte_end":52252,"line_start":108,"line_end":108,"column_start":5,"column_end":25}}]},{"kind":"Struct","id":{"krate":0,"index":753},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52657,"byte_end":52668,"line_start":129,"line_end":129,"column_start":12,"column_end":23},"name":"DirectDeref","qualname":"::access::DirectDeref","value":"","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":64},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53410,"byte_end":53418,"line_start":160,"line_end":160,"column_start":12,"column_end":20},"name":"DynGuard","qualname":"::access::DynGuard","value":"","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":72},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54339,"byte_end":54348,"line_start":193,"line_end":193,"column_start":11,"column_end":20},"name":"DynAccess","qualname":"::access::DynAccess","value":"DynAccess<T>","parent":null,"children":[{"krate":0,"index":74}],"decl_id":null,"docs":" An object-safe version of the [`Access`] trait.","sig":null,"attributes":[{"value":"/ An object-safe version of the [`Access`] trait.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53574,"byte_end":53625,"line_start":169,"line_end":169,"column_start":1,"column_end":52}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53626,"byte_end":53629,"line_start":170,"line_end":170,"column_start":1,"column_end":4}},{"value":"/ This can be used instead of the [`Access`] trait in case a type erasure is desired. This has","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53630,"byte_end":53726,"line_start":171,"line_end":171,"column_start":1,"column_end":97}},{"value":"/ the effect of performance hit (due to boxing of the result and due to dynamic dispatch), but","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53727,"byte_end":53823,"line_start":172,"line_end":172,"column_start":1,"column_end":97}},{"value":"/ makes certain code simpler and possibly makes the executable smaller.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53824,"byte_end":53897,"line_start":173,"line_end":173,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53898,"byte_end":53901,"line_start":174,"line_end":174,"column_start":1,"column_end":4}},{"value":"/ This is automatically implemented for everything that implements [`Access`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53902,"byte_end":53982,"line_start":175,"line_end":175,"column_start":1,"column_end":81}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53983,"byte_end":53986,"line_start":176,"line_end":176,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53987,"byte_end":54001,"line_start":177,"line_end":177,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54002,"byte_end":54005,"line_start":178,"line_end":178,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54006,"byte_end":54017,"line_start":179,"line_end":179,"column_start":1,"column_end":12}},{"value":"/ use std::thread;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54018,"byte_end":54038,"line_start":180,"line_end":180,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54039,"byte_end":54042,"line_start":181,"line_end":181,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::access::{Constant, DynAccess};","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54043,"byte_end":54091,"line_start":182,"line_end":182,"column_start":1,"column_end":49}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54092,"byte_end":54095,"line_start":183,"line_end":183,"column_start":1,"column_end":4}},{"value":"/ fn do_something(value: Box<dyn DynAccess<usize> + Send>) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54096,"byte_end":54158,"line_start":184,"line_end":184,"column_start":1,"column_end":63}},{"value":"/     thread::spawn(move || {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54159,"byte_end":54190,"line_start":185,"line_end":185,"column_start":1,"column_end":32}},{"value":"/         let v = value.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54191,"byte_end":54224,"line_start":186,"line_end":186,"column_start":1,"column_end":34}},{"value":"/         println!(\"{}\", *v);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54225,"byte_end":54256,"line_start":187,"line_end":187,"column_start":1,"column_end":32}},{"value":"/     });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54257,"byte_end":54268,"line_start":188,"line_end":188,"column_start":1,"column_end":12}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54269,"byte_end":54274,"line_start":189,"line_end":189,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54275,"byte_end":54278,"line_start":190,"line_end":190,"column_start":1,"column_end":4}},{"value":"/ do_something(Box::new(Constant(42)));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54279,"byte_end":54320,"line_start":191,"line_end":191,"column_start":1,"column_end":42}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54321,"byte_end":54328,"line_start":192,"line_end":192,"column_start":1,"column_end":8}}]},{"kind":"Method","id":{"krate":0,"index":74},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54405,"byte_end":54409,"line_start":195,"line_end":195,"column_start":8,"column_end":12},"name":"load","qualname":"::access::DynAccess::load","value":"pub fn load(&Self) -> DynGuard<T>","parent":{"krate":0,"index":72},"children":[],"decl_id":null,"docs":" The equivalent of [`Access::load`].\n","sig":null,"attributes":[{"value":"/ The equivalent of [`Access::load`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54358,"byte_end":54397,"line_start":194,"line_end":194,"column_start":5,"column_end":44}}]},{"kind":"Struct","id":{"krate":0,"index":762},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54663,"byte_end":54671,"line_start":210,"line_end":210,"column_start":12,"column_end":20},"name":"MapGuard","qualname":"::access::MapGuard","value":"MapGuard {  }","parent":null,"children":[{"krate":0,"index":767},{"krate":0,"index":768},{"krate":0,"index":769}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":787},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55176,"byte_end":55179,"line_start":232,"line_end":232,"column_start":12,"column_end":15},"name":"Map","qualname":"::access::Map","value":"Map {  }","parent":null,"children":[{"krate":0,"index":791},{"krate":0,"index":792},{"krate":0,"index":793}],"decl_id":null,"docs":" An adaptor to provide access to a part of larger structure.","sig":null,"attributes":[{"value":"/ An adaptor to provide access to a part of larger structure.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54957,"byte_end":55020,"line_start":227,"line_end":227,"column_start":1,"column_end":64}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55021,"byte_end":55024,"line_start":228,"line_end":228,"column_start":1,"column_end":4}},{"value":"/ This is the *active* part of this module. Use the [module documentation](index.html) for the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55025,"byte_end":55121,"line_start":229,"line_end":229,"column_start":1,"column_end":97}},{"value":"/ details.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55122,"byte_end":55134,"line_start":230,"line_end":230,"column_start":1,"column_end":13}}]},{"kind":"Method","id":{"krate":0,"index":90},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55916,"byte_end":55919,"line_start":250,"line_end":250,"column_start":12,"column_end":15},"name":"new","qualname":"<Map<A, T, F>>::new","value":"pub fn new<R>(A, F) -> Self where F: Fn(&T) -> &R + Clone","parent":null,"children":[],"decl_id":null,"docs":" Creates a new instance.","sig":null,"attributes":[{"value":"/ Creates a new instance.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55293,"byte_end":55320,"line_start":239,"line_end":239,"column_start":5,"column_end":32}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55325,"byte_end":55328,"line_start":240,"line_end":240,"column_start":5,"column_end":8}},{"value":"/ # Parameters","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55333,"byte_end":55349,"line_start":241,"line_end":241,"column_start":5,"column_end":21}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55354,"byte_end":55357,"line_start":242,"line_end":242,"column_start":5,"column_end":8}},{"value":"/ * `access`: Access to the bigger structure. This is usually something like `Arc<ArcSwap>`","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55362,"byte_end":55455,"line_start":243,"line_end":243,"column_start":5,"column_end":98}},{"value":"/   or `&ArcSwap`. It is technically possible to use any other [`Access`] here, though, for","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55460,"byte_end":55553,"line_start":244,"line_end":244,"column_start":5,"column_end":98}},{"value":"/   example to sub-delegate into even smaller structure from a [`Map`] (or generic","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55558,"byte_end":55642,"line_start":245,"line_end":245,"column_start":5,"column_end":89}},{"value":"/   [`Access`]).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55647,"byte_end":55665,"line_start":246,"line_end":246,"column_start":5,"column_end":23}},{"value":"/ * `projection`: A function (or closure) responsible to providing a reference into the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55670,"byte_end":55759,"line_start":247,"line_end":247,"column_start":5,"column_end":94}},{"value":"/   bigger bigger structure, selecting just subset of it. In general, it is expected to be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55764,"byte_end":55856,"line_start":248,"line_end":248,"column_start":5,"column_end":97}},{"value":"/   *cheap* (like only taking reference).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55861,"byte_end":55904,"line_start":249,"line_end":249,"column_start":5,"column_end":48}}]},{"kind":"Struct","id":{"krate":0,"index":808},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56562,"byte_end":56575,"line_start":280,"line_end":280,"column_start":12,"column_end":25},"name":"ConstantDeref","qualname":"::access::ConstantDeref","value":"","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":841},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":57161,"byte_end":57169,"line_start":298,"line_end":298,"column_start":12,"column_end":20},"name":"Constant","qualname":"::access::Constant","value":"","parent":null,"children":[],"decl_id":null,"docs":" Access to an constant.","sig":null,"attributes":[{"value":"/ Access to an constant.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56695,"byte_end":56721,"line_start":289,"line_end":289,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56722,"byte_end":56725,"line_start":290,"line_end":290,"column_start":1,"column_end":4}},{"value":"/ This wraps a constant value to provide [`Access`] to it. It is constant in the sense that,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56726,"byte_end":56820,"line_start":291,"line_end":291,"column_start":1,"column_end":95}},{"value":"/ unlike [`ArcSwapAny`] and [`Map`], the loaded value will always stay the same (there's no","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56821,"byte_end":56914,"line_start":292,"line_end":292,"column_start":1,"column_end":94}},{"value":"/ remote `store`).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56915,"byte_end":56935,"line_start":293,"line_end":293,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56936,"byte_end":56939,"line_start":294,"line_end":294,"column_start":1,"column_end":4}},{"value":"/ The purpose is mostly testing and plugging a parameter that works generically from code that","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56940,"byte_end":57036,"line_start":295,"line_end":295,"column_start":1,"column_end":97}},{"value":"/ doesn't need the updating functionality.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":57037,"byte_end":57081,"line_start":296,"line_end":296,"column_start":1,"column_end":45}}]},{"kind":"Field","id":{"krate":0,"index":844},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":57173,"byte_end":57178,"line_start":298,"line_end":298,"column_start":24,"column_end":29},"name":"0","qualname":"::access::Constant::0","value":"T","parent":{"krate":0,"index":841},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":116},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60278,"byte_end":60284,"line_start":4,"line_end":4,"column_start":15,"column_end":21},"name":"Sealed","qualname":"::as_raw::sealed::Sealed","value":"Sealed","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":120},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61075,"byte_end":61080,"line_start":31,"line_end":31,"column_start":11,"column_end":16},"name":"AsRaw","qualname":"::as_raw::AsRaw","value":"AsRaw<T>: Sealed","parent":null,"children":[{"krate":0,"index":122}],"decl_id":null,"docs":" A trait describing things that can be turned into a raw pointer.","sig":null,"attributes":[{"value":"/ A trait describing things that can be turned into a raw pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60318,"byte_end":60386,"line_start":9,"line_end":9,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60387,"byte_end":60390,"line_start":10,"line_end":10,"column_start":1,"column_end":4}},{"value":"/ This is just an abstraction of things that can be passed to the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60391,"byte_end":60458,"line_start":11,"line_end":11,"column_start":1,"column_end":68}},{"value":"/ [`compare_and_swap`](struct.ArcSwapAny.html#method.compare_and_swap).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60459,"byte_end":60532,"line_start":12,"line_end":12,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60533,"byte_end":60536,"line_start":13,"line_end":13,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60537,"byte_end":60551,"line_start":14,"line_end":14,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60552,"byte_end":60555,"line_start":15,"line_end":15,"column_start":1,"column_end":4}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60556,"byte_end":60563,"line_start":16,"line_end":16,"column_start":1,"column_end":8}},{"value":"/ use std::ptr;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60564,"byte_end":60581,"line_start":17,"line_end":17,"column_start":1,"column_end":18}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60582,"byte_end":60605,"line_start":18,"line_end":18,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60606,"byte_end":60609,"line_start":19,"line_end":19,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::ArcSwapOption;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60610,"byte_end":60642,"line_start":20,"line_end":20,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60643,"byte_end":60646,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ let a = Arc::new(42);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60647,"byte_end":60672,"line_start":22,"line_end":22,"column_start":1,"column_end":26}},{"value":"/ let shared = ArcSwapOption::from(Some(Arc::clone(&a)));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60673,"byte_end":60732,"line_start":23,"line_end":23,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60733,"byte_end":60736,"line_start":24,"line_end":24,"column_start":1,"column_end":4}},{"value":"/ shared.compare_and_swap(&a, Some(Arc::clone(&a)));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60737,"byte_end":60791,"line_start":25,"line_end":25,"column_start":1,"column_end":55}},{"value":"/ shared.compare_and_swap(&None::<Arc<_>>, Some(Arc::clone(&a)));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60792,"byte_end":60859,"line_start":26,"line_end":26,"column_start":1,"column_end":68}},{"value":"/ shared.compare_and_swap(shared.load(), Some(Arc::clone(&a)));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60860,"byte_end":60925,"line_start":27,"line_end":27,"column_start":1,"column_end":66}},{"value":"/ shared.compare_and_swap(&shared.load(), Some(Arc::clone(&a)));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60926,"byte_end":60992,"line_start":28,"line_end":28,"column_start":1,"column_end":67}},{"value":"/ shared.compare_and_swap(ptr::null(), Some(Arc::clone(&a)));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":60993,"byte_end":61056,"line_start":29,"line_end":29,"column_start":1,"column_end":64}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61057,"byte_end":61064,"line_start":30,"line_end":30,"column_start":1,"column_end":8}}]},{"kind":"Method","id":{"krate":0,"index":122},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61148,"byte_end":61154,"line_start":33,"line_end":33,"column_start":8,"column_end":14},"name":"as_raw","qualname":"::as_raw::AsRaw::as_raw","value":"pub fn as_raw(&Self) -> *mut T","parent":{"krate":0,"index":120},"children":[],"decl_id":null,"docs":" Converts the value into a raw pointer.\n","sig":null,"attributes":[{"value":"/ Converts the value into a raw pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61098,"byte_end":61140,"line_start":32,"line_end":32,"column_start":5,"column_end":47}}]},{"kind":"Mod","id":{"krate":0,"index":154},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"cache","qualname":"::cache","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","parent":null,"children":[{"krate":0,"index":155},{"krate":0,"index":158},{"krate":0,"index":161},{"krate":0,"index":164},{"krate":0,"index":167},{"krate":0,"index":170},{"krate":0,"index":874},{"krate":0,"index":883},{"krate":0,"index":879},{"krate":0,"index":173},{"krate":0,"index":185},{"krate":0,"index":190},{"krate":0,"index":887},{"krate":0,"index":898},{"krate":0,"index":893},{"krate":0,"index":195}],"decl_id":null,"docs":" Caching handle into the [ArcSwapAny].","sig":null,"attributes":[{"value":"deny(unsafe_code)","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":61919,"byte_end":61940,"line_start":1,"line_end":1,"column_start":1,"column_end":22}},{"value":"/ Caching handle into the [ArcSwapAny].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":61942,"byte_end":61983,"line_start":3,"line_end":3,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":61984,"byte_end":61987,"line_start":4,"line_end":4,"column_start":1,"column_end":4}},{"value":"/ The [Cache] keeps a copy of the internal [Arc] for faster access.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":61988,"byte_end":62057,"line_start":5,"line_end":5,"column_start":1,"column_end":70}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62058,"byte_end":62061,"line_start":6,"line_end":6,"column_start":1,"column_end":4}},{"value":"/ [Arc]: std::sync::Arc","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62062,"byte_end":62087,"line_start":7,"line_end":7,"column_start":1,"column_end":26}}]},{"kind":"Trait","id":{"krate":0,"index":170},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62554,"byte_end":62560,"line_start":23,"line_end":23,"column_start":11,"column_end":17},"name":"Access","qualname":"::cache::Access","value":"Access<T>","parent":null,"children":[{"krate":0,"index":172}],"decl_id":null,"docs":" Generalization of caches providing access to `T`.","sig":null,"attributes":[{"value":"/ Generalization of caches providing access to `T`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62227,"byte_end":62280,"line_start":16,"line_end":16,"column_start":1,"column_end":54}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62281,"byte_end":62284,"line_start":17,"line_end":17,"column_start":1,"column_end":4}},{"value":"/ This abstracts over all kinds of caches that can provide a cheap access to values of type `T`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62285,"byte_end":62383,"line_start":18,"line_end":18,"column_start":1,"column_end":99}},{"value":"/ This is useful in cases where some code doesn't care if the `T` is the whole structure or just","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62384,"byte_end":62482,"line_start":19,"line_end":19,"column_start":1,"column_end":99}},{"value":"/ a part of it.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62483,"byte_end":62500,"line_start":20,"line_end":20,"column_start":1,"column_end":18}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62501,"byte_end":62504,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ See the example at [`Cache::map`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62505,"byte_end":62543,"line_start":22,"line_end":22,"column_start":1,"column_end":39}}]},{"kind":"Method","id":{"krate":0,"index":172},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62712,"byte_end":62716,"line_start":27,"line_end":27,"column_start":8,"column_end":12},"name":"load","qualname":"::cache::Access::load","value":"pub fn load(&mut Self) -> &T","parent":{"krate":0,"index":170},"children":[],"decl_id":null,"docs":" Loads the value from cache.","sig":null,"attributes":[{"value":"/ Loads the value from cache.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62570,"byte_end":62601,"line_start":24,"line_end":24,"column_start":5,"column_end":36}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62606,"byte_end":62609,"line_start":25,"line_end":25,"column_start":5,"column_end":8}},{"value":"/ This revalidates the value in the cache, then provides the access to the cached value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62614,"byte_end":62704,"line_start":26,"line_end":26,"column_start":5,"column_end":95}}]},{"kind":"Struct","id":{"krate":0,"index":874},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64474,"byte_end":64479,"line_start":74,"line_end":74,"column_start":12,"column_end":17},"name":"Cache","qualname":"::cache::Cache","value":"Cache {  }","parent":null,"children":[{"krate":0,"index":877},{"krate":0,"index":878}],"decl_id":null,"docs":" Caching handle for [`ArcSwapAny`][ArcSwapAny].","sig":null,"attributes":[{"value":"/ Caching handle for [`ArcSwapAny`][ArcSwapAny].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62738,"byte_end":62788,"line_start":30,"line_end":30,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62789,"byte_end":62792,"line_start":31,"line_end":31,"column_start":1,"column_end":4}},{"value":"/ Instead of loading the [`Arc`][Arc] on every request from the shared storage, this keeps","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62793,"byte_end":62885,"line_start":32,"line_end":32,"column_start":1,"column_end":93}},{"value":"/ another copy inside itself. Upon request it only cheaply revalidates it is up to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62886,"byte_end":62970,"line_start":33,"line_end":33,"column_start":1,"column_end":85}},{"value":"/ date. If it is, access is significantly faster. If it is stale, the [load_full] is done and the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":62971,"byte_end":63070,"line_start":34,"line_end":34,"column_start":1,"column_end":100}},{"value":"/ cache value is replaced. Under a read-heavy loads, the measured speedup are 10-25 times,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63071,"byte_end":63163,"line_start":35,"line_end":35,"column_start":1,"column_end":93}},{"value":"/ depending on the architecture.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63164,"byte_end":63198,"line_start":36,"line_end":36,"column_start":1,"column_end":35}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63199,"byte_end":63202,"line_start":37,"line_end":37,"column_start":1,"column_end":4}},{"value":"/ There are, however, downsides:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63203,"byte_end":63237,"line_start":38,"line_end":38,"column_start":1,"column_end":35}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63238,"byte_end":63241,"line_start":39,"line_end":39,"column_start":1,"column_end":4}},{"value":"/ * The handle needs to be kept around by the caller (usually, one per thread). This is fine if","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63242,"byte_end":63339,"line_start":40,"line_end":40,"column_start":1,"column_end":98}},{"value":"/   there's one global `ArcSwapAny`, but starts being tricky with eg. data structures build from","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63340,"byte_end":63438,"line_start":41,"line_end":41,"column_start":1,"column_end":99}},{"value":"/   them.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63439,"byte_end":63450,"line_start":42,"line_end":42,"column_start":1,"column_end":12}},{"value":"/ * As it keeps a copy of the [Arc] inside the cache, the old value may be kept alive for longer","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63451,"byte_end":63549,"line_start":43,"line_end":43,"column_start":1,"column_end":99}},{"value":"/   period of time ‒ it is replaced by the new value on [load][Cache::load]. You may not want to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63550,"byte_end":63650,"line_start":44,"line_end":44,"column_start":1,"column_end":99}},{"value":"/   use this if dropping the old value in timely manner is important (possibly because of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63651,"byte_end":63742,"line_start":45,"line_end":45,"column_start":1,"column_end":92}},{"value":"/   releasing large amount of RAM or because of closing file handles).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63743,"byte_end":63815,"line_start":46,"line_end":46,"column_start":1,"column_end":73}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63816,"byte_end":63819,"line_start":47,"line_end":47,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63820,"byte_end":63834,"line_start":48,"line_end":48,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63835,"byte_end":63838,"line_start":49,"line_end":49,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63839,"byte_end":63850,"line_start":50,"line_end":50,"column_start":1,"column_end":12}},{"value":"/ # fn do_something<V>(_v: V) { }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63851,"byte_end":63886,"line_start":51,"line_end":51,"column_start":1,"column_end":36}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63887,"byte_end":63910,"line_start":52,"line_end":52,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63911,"byte_end":63914,"line_start":53,"line_end":53,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::{ArcSwap, Cache};","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63915,"byte_end":63950,"line_start":54,"line_end":54,"column_start":1,"column_end":36}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63951,"byte_end":63954,"line_start":55,"line_end":55,"column_start":1,"column_end":4}},{"value":"/ let shared = Arc::new(ArcSwap::from_pointee(42));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":63955,"byte_end":64008,"line_start":56,"line_end":56,"column_start":1,"column_end":54}},{"value":"/ // Start 10 worker threads...","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64009,"byte_end":64042,"line_start":57,"line_end":57,"column_start":1,"column_end":34}},{"value":"/ for _ in 0..10 {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64043,"byte_end":64063,"line_start":58,"line_end":58,"column_start":1,"column_end":21}},{"value":"/     let mut cache = Cache::new(Arc::clone(&shared));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64064,"byte_end":64120,"line_start":59,"line_end":59,"column_start":1,"column_end":57}},{"value":"/     std::thread::spawn(move || {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64121,"byte_end":64157,"line_start":60,"line_end":60,"column_start":1,"column_end":37}},{"value":"/         // Keep loading it like mad..","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64158,"byte_end":64199,"line_start":61,"line_end":61,"column_start":1,"column_end":42}},{"value":"/         loop {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64200,"byte_end":64218,"line_start":62,"line_end":62,"column_start":1,"column_end":19}},{"value":"/             let value = cache.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64219,"byte_end":64260,"line_start":63,"line_end":63,"column_start":1,"column_end":42}},{"value":"/             do_something(value);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64261,"byte_end":64297,"line_start":64,"line_end":64,"column_start":1,"column_end":37}},{"value":"/         }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64298,"byte_end":64311,"line_start":65,"line_end":65,"column_start":1,"column_end":14}},{"value":"/     });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64312,"byte_end":64323,"line_start":66,"line_end":66,"column_start":1,"column_end":12}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64324,"byte_end":64329,"line_start":67,"line_end":67,"column_start":1,"column_end":6}},{"value":"/ shared.store(Arc::new(12));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64330,"byte_end":64361,"line_start":68,"line_end":68,"column_start":1,"column_end":32}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64362,"byte_end":64369,"line_start":69,"line_end":69,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64370,"byte_end":64373,"line_start":70,"line_end":70,"column_start":1,"column_end":4}},{"value":"/ [Arc]: std::sync::Arc","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64374,"byte_end":64399,"line_start":71,"line_end":71,"column_start":1,"column_end":26}},{"value":"/ [load_full]: ArcSwapAny::load_full","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64400,"byte_end":64438,"line_start":72,"line_end":72,"column_start":1,"column_end":39}}]},{"kind":"Method","id":{"krate":0,"index":177},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65147,"byte_end":65150,"line_start":94,"line_end":94,"column_start":12,"column_end":15},"name":"new","qualname":"<Cache<A, T>>::new","value":"pub fn new(A) -> Self","parent":null,"children":[],"decl_id":null,"docs":" Creates a new caching handle.","sig":null,"attributes":[{"value":"/ Creates a new caching handle.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64637,"byte_end":64670,"line_start":85,"line_end":85,"column_start":5,"column_end":38}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64675,"byte_end":64678,"line_start":86,"line_end":86,"column_start":5,"column_end":8}},{"value":"/ The parameter is something dereferencing into an [`ArcSwapAny`] (eg. either to [`ArcSwap`]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64683,"byte_end":64777,"line_start":87,"line_end":87,"column_start":5,"column_end":99}},{"value":"/ or [`ArcSwapOption`]). That can be [`ArcSwapAny`] itself, but that's not very useful. But","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64782,"byte_end":64875,"line_start":88,"line_end":88,"column_start":5,"column_end":98}},{"value":"/ it also can be a reference to it or `Arc`, which makes it possible to share the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64880,"byte_end":64963,"line_start":89,"line_end":89,"column_start":5,"column_end":88}},{"value":"/ [`ArcSwapAny`] with multiple caches or access it in non-cached way too.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64968,"byte_end":65043,"line_start":90,"line_end":90,"column_start":5,"column_end":80}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65048,"byte_end":65051,"line_start":91,"line_end":91,"column_start":5,"column_end":8}},{"value":"/ [`ArcSwapOption`]: crate::ArcSwapOption","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65056,"byte_end":65099,"line_start":92,"line_end":92,"column_start":5,"column_end":48}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65104,"byte_end":65135,"line_start":93,"line_end":93,"column_start":5,"column_end":36}}]},{"kind":"Method","id":{"krate":0,"index":178},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65338,"byte_end":65346,"line_start":100,"line_end":100,"column_start":12,"column_end":20},"name":"arc_swap","qualname":"<Cache<A, T>>::arc_swap","value":"pub fn arc_swap(&Self) -> &A::Target","parent":null,"children":[],"decl_id":null,"docs":" Gives access to the (possibly shared) cached [`ArcSwapAny`].\n","sig":null,"attributes":[{"value":"/ Gives access to the (possibly shared) cached [`ArcSwapAny`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65262,"byte_end":65326,"line_start":99,"line_end":99,"column_start":5,"column_end":69}}]},{"kind":"Method","id":{"krate":0,"index":179},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65808,"byte_end":65812,"line_start":112,"line_end":112,"column_start":12,"column_end":16},"name":"load","qualname":"<Cache<A, T>>::load","value":"pub fn load(&mut Self) -> &T","parent":null,"children":[],"decl_id":null,"docs":" Loads the currently held value.","sig":null,"attributes":[{"value":"/ Loads the currently held value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65404,"byte_end":65439,"line_start":104,"line_end":104,"column_start":5,"column_end":40}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65444,"byte_end":65447,"line_start":105,"line_end":105,"column_start":5,"column_end":8}},{"value":"/ This first checks if the cached value is up to date. This check is very cheap.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65452,"byte_end":65534,"line_start":106,"line_end":106,"column_start":5,"column_end":87}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65539,"byte_end":65542,"line_start":107,"line_end":107,"column_start":5,"column_end":8}},{"value":"/ If it is up to date, the cached value is simply returned without additional costs. If it is","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65547,"byte_end":65642,"line_start":108,"line_end":108,"column_start":5,"column_end":100}},{"value":"/ outdated, a load is done on the underlying shared storage. The newly loaded value is then","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65647,"byte_end":65740,"line_start":109,"line_end":109,"column_start":5,"column_end":98}},{"value":"/ stored in the cache and returned.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65745,"byte_end":65782,"line_start":110,"line_end":110,"column_start":5,"column_end":42}},{"value":"inline","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":65787,"byte_end":65796,"line_start":111,"line_end":111,"column_start":5,"column_end":14}}]},{"kind":"Method","id":{"krate":0,"index":182},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68419,"byte_end":68422,"line_start":182,"line_end":182,"column_start":12,"column_end":15},"name":"map","qualname":"<Cache<A, T>>::map","value":"pub fn map<F, U>(Self, F) -> MapCache<A, T, F> where F: FnMut(&T) -> &U","parent":null,"children":[],"decl_id":null,"docs":" Turns this cache into a cache with a projection inside the cached value.","sig":null,"attributes":[{"value":"/ Turns this cache into a cache with a projection inside the cached value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":66530,"byte_end":66606,"line_start":134,"line_end":134,"column_start":5,"column_end":81}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":66611,"byte_end":66614,"line_start":135,"line_end":135,"column_start":5,"column_end":8}},{"value":"/ You'd use this in case when some part of code needs access to fresh values of `U`, however","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":66619,"byte_end":66713,"line_start":136,"line_end":136,"column_start":5,"column_end":99}},{"value":"/ a bigger structure containing `U` is provided by this cache. The possibility of giving the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":66718,"byte_end":66812,"line_start":137,"line_end":137,"column_start":5,"column_end":99}},{"value":"/ whole structure to the part of the code falls short in terms of reusability (the part of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":66817,"byte_end":66909,"line_start":138,"line_end":138,"column_start":5,"column_end":97}},{"value":"/ the code could be used within multiple contexts, each with a bigger different structure","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":66914,"byte_end":67005,"line_start":139,"line_end":139,"column_start":5,"column_end":96}},{"value":"/ containing `U`) and code separation (the code shouldn't needs to know about the big","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67010,"byte_end":67097,"line_start":140,"line_end":140,"column_start":5,"column_end":92}},{"value":"/ structure).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67102,"byte_end":67117,"line_start":141,"line_end":141,"column_start":5,"column_end":20}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67122,"byte_end":67125,"line_start":142,"line_end":142,"column_start":5,"column_end":8}},{"value":"/ # Warning","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67130,"byte_end":67143,"line_start":143,"line_end":143,"column_start":5,"column_end":18}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67148,"byte_end":67151,"line_start":144,"line_end":144,"column_start":5,"column_end":8}},{"value":"/ As the provided `f` is called inside every [`load`][Access::load], this one should be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67156,"byte_end":67245,"line_start":145,"line_end":145,"column_start":5,"column_end":94}},{"value":"/ cheap. Most often it is expected to be just a closure taking reference of some inner field.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67250,"byte_end":67345,"line_start":146,"line_end":146,"column_start":5,"column_end":100}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67350,"byte_end":67353,"line_start":147,"line_end":147,"column_start":5,"column_end":8}},{"value":"/ For the same reasons, it should not have side effects and should never panic (these will","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67358,"byte_end":67450,"line_start":148,"line_end":148,"column_start":5,"column_end":97}},{"value":"/ not break Rust's safety rules, but might produce behaviour you don't expect).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67455,"byte_end":67536,"line_start":149,"line_end":149,"column_start":5,"column_end":86}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67541,"byte_end":67544,"line_start":150,"line_end":150,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67549,"byte_end":67563,"line_start":151,"line_end":151,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67568,"byte_end":67571,"line_start":152,"line_end":152,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67576,"byte_end":67587,"line_start":153,"line_end":153,"column_start":5,"column_end":16}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67592,"byte_end":67618,"line_start":154,"line_end":154,"column_start":5,"column_end":31}},{"value":"/ use arc_swap::cache::{Access, Cache};","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67623,"byte_end":67664,"line_start":155,"line_end":155,"column_start":5,"column_end":46}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67669,"byte_end":67672,"line_start":156,"line_end":156,"column_start":5,"column_end":8}},{"value":"/ struct InnerCfg {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67677,"byte_end":67698,"line_start":157,"line_end":157,"column_start":5,"column_end":26}},{"value":"/     answer: usize,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67703,"byte_end":67725,"line_start":158,"line_end":158,"column_start":5,"column_end":27}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67730,"byte_end":67735,"line_start":159,"line_end":159,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67740,"byte_end":67743,"line_start":160,"line_end":160,"column_start":5,"column_end":8}},{"value":"/ struct FullCfg {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67748,"byte_end":67768,"line_start":161,"line_end":161,"column_start":5,"column_end":25}},{"value":"/     inner: InnerCfg,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67773,"byte_end":67797,"line_start":162,"line_end":162,"column_start":5,"column_end":29}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67802,"byte_end":67807,"line_start":163,"line_end":163,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67812,"byte_end":67815,"line_start":164,"line_end":164,"column_start":5,"column_end":8}},{"value":"/ fn use_inner<A: Access<InnerCfg>>(cache: &mut A) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67820,"byte_end":67874,"line_start":165,"line_end":165,"column_start":5,"column_end":59}},{"value":"/     let value = cache.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67879,"byte_end":67912,"line_start":166,"line_end":166,"column_start":5,"column_end":38}},{"value":"/     println!(\"The answer is: {}\", value.answer);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67917,"byte_end":67969,"line_start":167,"line_end":167,"column_start":5,"column_end":57}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67974,"byte_end":67979,"line_start":168,"line_end":168,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67984,"byte_end":67987,"line_start":169,"line_end":169,"column_start":5,"column_end":8}},{"value":"/ let full_cfg = ArcSwap::from_pointee(FullCfg {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":67992,"byte_end":68042,"line_start":170,"line_end":170,"column_start":5,"column_end":55}},{"value":"/     inner: InnerCfg {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68047,"byte_end":68072,"line_start":171,"line_end":171,"column_start":5,"column_end":30}},{"value":"/         answer: 42,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68077,"byte_end":68100,"line_start":172,"line_end":172,"column_start":5,"column_end":28}},{"value":"/     }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68105,"byte_end":68114,"line_start":173,"line_end":173,"column_start":5,"column_end":14}},{"value":"/ });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68119,"byte_end":68126,"line_start":174,"line_end":174,"column_start":5,"column_end":12}},{"value":"/ let cache = Cache::new(&full_cfg);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68131,"byte_end":68169,"line_start":175,"line_end":175,"column_start":5,"column_end":43}},{"value":"/ use_inner(&mut cache.map(|full| &full.inner));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68174,"byte_end":68224,"line_start":176,"line_end":176,"column_start":5,"column_end":55}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68229,"byte_end":68232,"line_start":177,"line_end":177,"column_start":5,"column_end":8}},{"value":"/ let inner_cfg = ArcSwap::from_pointee(InnerCfg { answer: 24 });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68237,"byte_end":68304,"line_start":178,"line_end":178,"column_start":5,"column_end":72}},{"value":"/ let mut inner_cache = Cache::new(&inner_cfg);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68309,"byte_end":68358,"line_start":179,"line_end":179,"column_start":5,"column_end":54}},{"value":"/ use_inner(&mut inner_cache);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68363,"byte_end":68395,"line_start":180,"line_end":180,"column_start":5,"column_end":37}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68400,"byte_end":68407,"line_start":181,"line_end":181,"column_start":5,"column_end":12}}]},{"kind":"Struct","id":{"krate":0,"index":887},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":69297,"byte_end":69305,"line_start":220,"line_end":220,"column_start":12,"column_end":20},"name":"MapCache","qualname":"::cache::MapCache","value":"MapCache {  }","parent":null,"children":[{"krate":0,"index":891},{"krate":0,"index":892}],"decl_id":null,"docs":" An implementation of a cache with a projection into the accessed value.","sig":null,"attributes":[{"value":"/ An implementation of a cache with a projection into the accessed value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":69036,"byte_end":69111,"line_start":215,"line_end":215,"column_start":1,"column_end":76}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":69112,"byte_end":69115,"line_start":216,"line_end":216,"column_start":1,"column_end":4}},{"value":"/ This is the implementation structure for [`Cache::map`]. It can't be created directly and it","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":69116,"byte_end":69212,"line_start":217,"line_end":217,"column_start":1,"column_end":97}},{"value":"/ should be used through the [`Access`] trait.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":69213,"byte_end":69261,"line_start":218,"line_end":218,"column_start":1,"column_end":49}}]},{"kind":"Mod","id":{"krate":0,"index":378},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"docs","qualname":"::docs","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","parent":null,"children":[{"krate":0,"index":379},{"krate":0,"index":380},{"krate":0,"index":381},{"krate":0,"index":382}],"decl_id":null,"docs":" Additional documentation.","sig":null,"attributes":[{"value":"/ Additional documentation.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":111815,"byte_end":111844,"line_start":1,"line_end":1,"column_start":1,"column_end":30}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":111845,"byte_end":111848,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ Here we have some more general topics that might be good to know that just don't fit to the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":111849,"byte_end":111944,"line_start":3,"line_end":3,"column_start":1,"column_end":96}},{"value":"/ crate level intro.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":111945,"byte_end":111967,"line_start":4,"line_end":4,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":111968,"byte_end":111971,"line_start":5,"line_end":5,"column_start":1,"column_end":4}},{"value":"/ Also, there were some previous blog posts about the crate which you might find interesting.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":111972,"byte_end":112067,"line_start":6,"line_end":6,"column_start":1,"column_end":96}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112068,"byte_end":112071,"line_start":7,"line_end":7,"column_start":1,"column_end":4}},{"value":"/ # Atomic orderings","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112072,"byte_end":112094,"line_start":8,"line_end":8,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112095,"byte_end":112098,"line_start":9,"line_end":9,"column_start":1,"column_end":4}},{"value":"/ Each operation on the [`ArcSwapAny`] with [`DefaultStrategy`] type callable concurrently (eg.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112099,"byte_end":112196,"line_start":10,"line_end":10,"column_start":1,"column_end":98}},{"value":"/ [`load`], but not [`into_inner`]) contains at least one [`SeqCst`] atomic read-write operation,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112197,"byte_end":112296,"line_start":11,"line_end":11,"column_start":1,"column_end":100}},{"value":"/ therefore even operations on different instances have a defined global order of operations.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112297,"byte_end":112392,"line_start":12,"line_end":12,"column_start":1,"column_end":96}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112393,"byte_end":112396,"line_start":13,"line_end":13,"column_start":1,"column_end":4}},{"value":"/ # Features","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112397,"byte_end":112411,"line_start":14,"line_end":14,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112412,"byte_end":112415,"line_start":15,"line_end":15,"column_start":1,"column_end":4}},{"value":"/ The `weak` feature adds the ability to use arc-swap with the [`Weak`] pointer too,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112416,"byte_end":112502,"line_start":16,"line_end":16,"column_start":1,"column_end":87}},{"value":"/ through the [`ArcSwapWeak`] type. The needed std support is stabilized in rust version 1.45 (as","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112503,"byte_end":112602,"line_start":17,"line_end":17,"column_start":1,"column_end":100}},{"value":"/ of now in beta).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112603,"byte_end":112623,"line_start":18,"line_end":18,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112624,"byte_end":112627,"line_start":19,"line_end":19,"column_start":1,"column_end":4}},{"value":"/ The `experimental-strategies` enables few more strategies that can be used. Note that these","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112628,"byte_end":112723,"line_start":20,"line_end":20,"column_start":1,"column_end":96}},{"value":"/ **are not** part of the API stability guarantees and they may be changed, renamed or removed at","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112724,"byte_end":112823,"line_start":21,"line_end":21,"column_start":1,"column_end":100}},{"value":"/ any time.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112824,"byte_end":112837,"line_start":22,"line_end":22,"column_start":1,"column_end":14}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112838,"byte_end":112841,"line_start":23,"line_end":23,"column_start":1,"column_end":4}},{"value":"/ # Minimal compiler version","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112842,"byte_end":112872,"line_start":24,"line_end":24,"column_start":1,"column_end":31}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112873,"byte_end":112876,"line_start":25,"line_end":25,"column_start":1,"column_end":4}},{"value":"/ The `1` versions will compile on all compilers supporting the 2018 edition. Note that this","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112877,"byte_end":112971,"line_start":26,"line_end":26,"column_start":1,"column_end":95}},{"value":"/ applies only if no additional feature flags are enabled and does not apply to compiling or","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":112972,"byte_end":113066,"line_start":27,"line_end":27,"column_start":1,"column_end":95}},{"value":"/ running tests.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113067,"byte_end":113085,"line_start":28,"line_end":28,"column_start":1,"column_end":19}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113086,"byte_end":113089,"line_start":29,"line_end":29,"column_start":1,"column_end":4}},{"value":"/ [`ArcSwapAny`]: crate::ArcSwapAny","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113090,"byte_end":113127,"line_start":30,"line_end":30,"column_start":1,"column_end":38}},{"value":"/ [`ArcSwapWeak`]: crate::ArcSwapWeak","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113128,"byte_end":113167,"line_start":31,"line_end":31,"column_start":1,"column_end":40}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113168,"byte_end":113205,"line_start":32,"line_end":32,"column_start":1,"column_end":38}},{"value":"/ [`into_inner`]: crate::ArcSwapAny::into_inner","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113206,"byte_end":113255,"line_start":33,"line_end":33,"column_start":1,"column_end":50}},{"value":"/ [`DefaultStrategy`]: crate::DefaultStrategy","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113256,"byte_end":113303,"line_start":34,"line_end":34,"column_start":1,"column_end":48}},{"value":"/ [`SeqCst`]: std::sync::atomic::Ordering::SeqCst","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113304,"byte_end":113355,"line_start":35,"line_end":35,"column_start":1,"column_end":52}},{"value":"/ [`Weak`]: std::sync::Weak","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113356,"byte_end":113385,"line_start":36,"line_end":36,"column_start":1,"column_end":30}}]},{"kind":"Mod","id":{"krate":0,"index":379},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"internal","qualname":"::docs::internal","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","parent":null,"children":[],"decl_id":null,"docs":" Internal details.","sig":null,"attributes":[{"value":"/ Internal details.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113466,"byte_end":113487,"line_start":1,"line_end":1,"column_start":1,"column_end":22}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113488,"byte_end":113491,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ While the other parts of documentation are useful to users of the crate, this part is probably","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113492,"byte_end":113590,"line_start":3,"line_end":3,"column_start":1,"column_end":99}},{"value":"/ helpful only if you want to look into the code or are curious about how it works internally.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113591,"byte_end":113687,"line_start":4,"line_end":4,"column_start":1,"column_end":97}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113688,"byte_end":113691,"line_start":5,"line_end":5,"column_start":1,"column_end":4}},{"value":"/ Also note that any of these details may change in future versions and are not part of the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113692,"byte_end":113785,"line_start":6,"line_end":6,"column_start":1,"column_end":94}},{"value":"/ stability guarantees. Don't rely on anything here.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113786,"byte_end":113840,"line_start":7,"line_end":7,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113841,"byte_end":113844,"line_start":8,"line_end":8,"column_start":1,"column_end":4}},{"value":"/ # Storing the [`Arc`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113845,"byte_end":113871,"line_start":9,"line_end":9,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113872,"byte_end":113875,"line_start":10,"line_end":10,"column_start":1,"column_end":4}},{"value":"/ The [`Arc`] can be turned into a raw pointer and back. This is abstracted by the [`RefCnt`]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113876,"byte_end":113971,"line_start":11,"line_end":11,"column_start":1,"column_end":96}},{"value":"/ trait and it is technically possible to implement it for custom types (this crate also","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":113972,"byte_end":114062,"line_start":12,"line_end":12,"column_start":1,"column_end":91}},{"value":"/ implements it for [`Rc`] and [`Weak`], though the actual usefulness of these is a bit","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114063,"byte_end":114152,"line_start":13,"line_end":13,"column_start":1,"column_end":90}},{"value":"/ questionable).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114153,"byte_end":114171,"line_start":14,"line_end":14,"column_start":1,"column_end":19}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114172,"byte_end":114175,"line_start":15,"line_end":15,"column_start":1,"column_end":4}},{"value":"/ The raw pointer is stored inside an [`AtomicPtr`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114176,"byte_end":114230,"line_start":16,"line_end":16,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114231,"byte_end":114234,"line_start":17,"line_end":17,"column_start":1,"column_end":4}},{"value":"/ # Protection of reference counts","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114235,"byte_end":114271,"line_start":18,"line_end":18,"column_start":1,"column_end":37}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114272,"byte_end":114275,"line_start":19,"line_end":19,"column_start":1,"column_end":4}},{"value":"/ The first idea would be to just use [`AtomicPtr`] with whatever the [`Arc::into_raw`] returns.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114276,"byte_end":114374,"line_start":20,"line_end":20,"column_start":1,"column_end":99}},{"value":"/ Then replacing it would be fine (there's no need to update ref counts). The load needs to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114375,"byte_end":114468,"line_start":21,"line_end":21,"column_start":1,"column_end":94}},{"value":"/ increment the reference count ‒ one still stays inside and another is returned to the caller.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114469,"byte_end":114568,"line_start":22,"line_end":22,"column_start":1,"column_end":98}},{"value":"/ This is done by re-creating the Arc from the raw pointer and then cloning it, throwing one","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114569,"byte_end":114663,"line_start":23,"line_end":23,"column_start":1,"column_end":95}},{"value":"/ instance away (without destroying it).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114664,"byte_end":114706,"line_start":24,"line_end":24,"column_start":1,"column_end":43}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114707,"byte_end":114710,"line_start":25,"line_end":25,"column_start":1,"column_end":4}},{"value":"/ This approach has a problem. There's a short time between we read the raw pointer and increment","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114711,"byte_end":114810,"line_start":26,"line_end":26,"column_start":1,"column_end":100}},{"value":"/ the count. If some other thread replaces the stored Arc and throws it away, the ref count could","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114811,"byte_end":114910,"line_start":27,"line_end":27,"column_start":1,"column_end":100}},{"value":"/ drop to 0, get destroyed and we would be trying to bump ref counts in a ghost, which would be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":114911,"byte_end":115008,"line_start":28,"line_end":28,"column_start":1,"column_end":98}},{"value":"/ totally broken.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115009,"byte_end":115028,"line_start":29,"line_end":29,"column_start":1,"column_end":20}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115029,"byte_end":115032,"line_start":30,"line_end":30,"column_start":1,"column_end":4}},{"value":"/ To prevent this, we actually use two approaches in a hybrid manner.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115033,"byte_end":115104,"line_start":31,"line_end":31,"column_start":1,"column_end":72}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115105,"byte_end":115108,"line_start":32,"line_end":32,"column_start":1,"column_end":4}},{"value":"/ The first one is based on hazard pointers idea, but slightly modified. There's a global","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115109,"byte_end":115200,"line_start":33,"line_end":33,"column_start":1,"column_end":92}},{"value":"/ repository of pointers that owe a reference. When someone swaps a pointer, it walks this list","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115201,"byte_end":115298,"line_start":34,"line_end":34,"column_start":1,"column_end":98}},{"value":"/ and pays all the debts (and takes them out of the repository).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115299,"byte_end":115365,"line_start":35,"line_end":35,"column_start":1,"column_end":67}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115366,"byte_end":115369,"line_start":36,"line_end":36,"column_start":1,"column_end":4}},{"value":"/ For simplicity and performance, storing into the repository is fallible. If storing into the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115370,"byte_end":115466,"line_start":37,"line_end":37,"column_start":1,"column_end":97}},{"value":"/ repository fails (because the thread used up all its own slots, or because the pointer got","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115467,"byte_end":115561,"line_start":38,"line_end":38,"column_start":1,"column_end":95}},{"value":"/ replaced in just the wrong moment and it can't confirm the reservation), unlike the full","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115562,"byte_end":115654,"line_start":39,"line_end":39,"column_start":1,"column_end":93}},{"value":"/ hazard-pointers approach, we don't retry, but fall back onto secondary strategy.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115655,"byte_end":115739,"line_start":40,"line_end":40,"column_start":1,"column_end":85}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115740,"byte_end":115743,"line_start":41,"line_end":41,"column_start":1,"column_end":4}},{"value":"/ The secondary strategy is similar, but a bit more complex (and therefore slower, that's why it","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115744,"byte_end":115842,"line_start":42,"line_end":42,"column_start":1,"column_end":99}},{"value":"/ is only a fallback). We first publish an intent to read a pointer (and where we are reading it","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115843,"byte_end":115941,"line_start":43,"line_end":43,"column_start":1,"column_end":99}},{"value":"/ from). Then we actually do so and publish the debt, like previously.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":115942,"byte_end":116014,"line_start":44,"line_end":44,"column_start":1,"column_end":73}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116015,"byte_end":116018,"line_start":45,"line_end":45,"column_start":1,"column_end":4}},{"value":"/ The writer pays the debts as usual. But also, if it sees the intent to read the value, it helps","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116019,"byte_end":116118,"line_start":46,"line_end":46,"column_start":1,"column_end":100}},{"value":"/ along, reads it, bumps the reference and passes it to the reader. Therefore, if the reader","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116119,"byte_end":116213,"line_start":47,"line_end":47,"column_start":1,"column_end":95}},{"value":"/ fails to do the protection itself, because it got interrupted by a writer, it finds a","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116214,"byte_end":116303,"line_start":48,"line_end":48,"column_start":1,"column_end":90}},{"value":"/ ready-made replacement value it can just use and doesn't have to retry. Also, the writer","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116304,"byte_end":116396,"line_start":49,"line_end":49,"column_start":1,"column_end":93}},{"value":"/ doesn't have to wait for the reader in any way, because it can just solve its problem and move","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116397,"byte_end":116495,"line_start":50,"line_end":50,"column_start":1,"column_end":99}},{"value":"/ on.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116496,"byte_end":116503,"line_start":51,"line_end":51,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116504,"byte_end":116507,"line_start":52,"line_end":52,"column_start":1,"column_end":4}},{"value":"/ # Unsafety","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116508,"byte_end":116522,"line_start":53,"line_end":53,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116523,"byte_end":116526,"line_start":54,"line_end":54,"column_start":1,"column_end":4}},{"value":"/ All the uses of the unsafe keyword is just to turn the raw pointer back to Arc. It originated","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116527,"byte_end":116624,"line_start":55,"line_end":55,"column_start":1,"column_end":98}},{"value":"/ from an Arc in the first place, so the only thing to ensure is it is still valid. That means its","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116625,"byte_end":116725,"line_start":56,"line_end":56,"column_start":1,"column_end":101}},{"value":"/ ref count never dropped to 0.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116726,"byte_end":116759,"line_start":57,"line_end":57,"column_start":1,"column_end":34}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116760,"byte_end":116763,"line_start":58,"line_end":58,"column_start":1,"column_end":4}},{"value":"/ At the beginning, there's ref count of 1 stored in the raw pointer (and maybe some others","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116764,"byte_end":116857,"line_start":59,"line_end":59,"column_start":1,"column_end":94}},{"value":"/ elsewhere, but we can't rely on these). This 1 stays there for the whole time the pointer is","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116858,"byte_end":116954,"line_start":60,"line_end":60,"column_start":1,"column_end":97}},{"value":"/ stored there. When the arc is replaced, this 1 is returned to the caller, so we just have to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":116955,"byte_end":117051,"line_start":61,"line_end":61,"column_start":1,"column_end":97}},{"value":"/ make sure no more readers access it by that time.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117052,"byte_end":117105,"line_start":62,"line_end":62,"column_start":1,"column_end":54}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117106,"byte_end":117109,"line_start":63,"line_end":63,"column_start":1,"column_end":4}},{"value":"/ # Leases and debts","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117110,"byte_end":117132,"line_start":64,"line_end":64,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117133,"byte_end":117136,"line_start":65,"line_end":65,"column_start":1,"column_end":4}},{"value":"/ Instead of incrementing the reference count, the pointer reference can be owed. In such case, it","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117137,"byte_end":117237,"line_start":66,"line_end":66,"column_start":1,"column_end":101}},{"value":"/ is recorded into a global storage. As each thread has its own storage (the global storage is","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117238,"byte_end":117334,"line_start":67,"line_end":67,"column_start":1,"column_end":97}},{"value":"/ composed of multiple thread storages), the readers don't contend. When the pointer is no longer","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117335,"byte_end":117434,"line_start":68,"line_end":68,"column_start":1,"column_end":100}},{"value":"/ in use, the debt is erased.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117435,"byte_end":117466,"line_start":69,"line_end":69,"column_start":1,"column_end":32}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117467,"byte_end":117470,"line_start":70,"line_end":70,"column_start":1,"column_end":4}},{"value":"/ The writer pays all the existing debts, therefore the reader have the full Arc with ref count at","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117471,"byte_end":117571,"line_start":71,"line_end":71,"column_start":1,"column_end":101}},{"value":"/ that time. The reader is made aware the debt was paid and decrements the reference count.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117572,"byte_end":117665,"line_start":72,"line_end":72,"column_start":1,"column_end":94}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117666,"byte_end":117669,"line_start":73,"line_end":73,"column_start":1,"column_end":4}},{"value":"/ # Memory orders","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117670,"byte_end":117689,"line_start":74,"line_end":74,"column_start":1,"column_end":20}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117690,"byte_end":117693,"line_start":75,"line_end":75,"column_start":1,"column_end":4}},{"value":"/ ## Synchronizing the data pointed to by the pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117694,"byte_end":117750,"line_start":76,"line_end":76,"column_start":1,"column_end":57}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117751,"byte_end":117754,"line_start":77,"line_end":77,"column_start":1,"column_end":4}},{"value":"/ We have AcqRel (well, SeqCst, but that's included) on the swap and Acquire on the loads. In case","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117755,"byte_end":117855,"line_start":78,"line_end":78,"column_start":1,"column_end":101}},{"value":"/ of the double read around the debt allocation, we do that on the *second*, because of ABA.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117856,"byte_end":117950,"line_start":79,"line_end":79,"column_start":1,"column_end":95}},{"value":"/ That's also why that SeqCst on the allocation of debt itself is not enough.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":117951,"byte_end":118030,"line_start":80,"line_end":80,"column_start":1,"column_end":80}},{"value":"/ the *latest* decrement. By making both the increment and decrement AcqRel, we effectively chain","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118031,"byte_end":118130,"line_start":81,"line_end":81,"column_start":1,"column_end":100}},{"value":"/ the edges together.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118131,"byte_end":118154,"line_start":82,"line_end":82,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118155,"byte_end":118158,"line_start":83,"line_end":83,"column_start":1,"column_end":4}},{"value":"/ # Memory orders around debts","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118159,"byte_end":118191,"line_start":84,"line_end":84,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118192,"byte_end":118195,"line_start":85,"line_end":85,"column_start":1,"column_end":4}},{"value":"/ The linked list of debt nodes only grows. The shape of the list (existence of nodes) is","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118196,"byte_end":118287,"line_start":86,"line_end":86,"column_start":1,"column_end":92}},{"value":"/ synchronized through Release on creation and Acquire on load on the head pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118288,"byte_end":118373,"line_start":87,"line_end":87,"column_start":1,"column_end":86}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118374,"byte_end":118377,"line_start":88,"line_end":88,"column_start":1,"column_end":4}},{"value":"/ The debts work similar to locks ‒ Acquire and Release make all the pointer manipulation at the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118378,"byte_end":118478,"line_start":89,"line_end":89,"column_start":1,"column_end":99}},{"value":"/ interval where it is written down. However, we use the SeqCst on the allocation of the debt","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118479,"byte_end":118574,"line_start":90,"line_end":90,"column_start":1,"column_end":96}},{"value":"/ because when we see an empty slot, we need to make sure that it happened after we have","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118575,"byte_end":118665,"line_start":91,"line_end":91,"column_start":1,"column_end":91}},{"value":"/ overwritten the pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118666,"byte_end":118694,"line_start":92,"line_end":92,"column_start":1,"column_end":29}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118695,"byte_end":118698,"line_start":93,"line_end":93,"column_start":1,"column_end":4}},{"value":"/ In case the writer pays the debt, it sees the new enough data (for the same reasons the stale","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118699,"byte_end":118796,"line_start":94,"line_end":94,"column_start":1,"column_end":98}},{"value":"/ empties are not seen). The reference count on the Arc is AcqRel and makes sure it is not","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118797,"byte_end":118889,"line_start":95,"line_end":95,"column_start":1,"column_end":93}},{"value":"/ destroyed too soon. The writer traverses all the slots, therefore they don't need to synchronize","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118890,"byte_end":118990,"line_start":96,"line_end":96,"column_start":1,"column_end":101}},{"value":"/ with each other.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":118991,"byte_end":119011,"line_start":97,"line_end":97,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119012,"byte_end":119015,"line_start":98,"line_end":98,"column_start":1,"column_end":4}},{"value":"/ Further details are inside the internal `debt` module.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119016,"byte_end":119074,"line_start":99,"line_end":99,"column_start":1,"column_end":59}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119075,"byte_end":119078,"line_start":100,"line_end":100,"column_start":1,"column_end":4}},{"value":"/ [`RefCnt`]: crate::RefCnt","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119079,"byte_end":119108,"line_start":101,"line_end":101,"column_start":1,"column_end":30}},{"value":"/ [`Arc`]: std::sync::Arc","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119109,"byte_end":119136,"line_start":102,"line_end":102,"column_start":1,"column_end":28}},{"value":"/ [`Arc::into_raw`]: std::sync::Arc::into_raw","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119137,"byte_end":119184,"line_start":103,"line_end":103,"column_start":1,"column_end":48}},{"value":"/ [`Rc`]: std::rc::Rc","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119185,"byte_end":119208,"line_start":104,"line_end":104,"column_start":1,"column_end":24}},{"value":"/ [`Weak`]: std::sync::Weak","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119209,"byte_end":119238,"line_start":105,"line_end":105,"column_start":1,"column_end":30}},{"value":"/ [`AtomicPtr`]: std::sync::atomic::AtomicPtr","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/internal.rs","byte_start":119239,"byte_end":119286,"line_start":106,"line_end":106,"column_start":1,"column_end":48}}]},{"kind":"Mod","id":{"krate":0,"index":380},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"limitations","qualname":"::docs::limitations","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","parent":null,"children":[],"decl_id":null,"docs":" Limitations and common pitfalls.","sig":null,"attributes":[{"value":"/ Limitations and common pitfalls.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119288,"byte_end":119324,"line_start":1,"line_end":1,"column_start":1,"column_end":37}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119325,"byte_end":119328,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ # Sized types","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119329,"byte_end":119346,"line_start":3,"line_end":3,"column_start":1,"column_end":18}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119347,"byte_end":119350,"line_start":4,"line_end":4,"column_start":1,"column_end":4}},{"value":"/ This currently works only for `Sized` types. Unsized types have „fat pointers“, which are twice","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119351,"byte_end":119454,"line_start":5,"line_end":5,"column_start":1,"column_end":100}},{"value":"/ as large as the normal ones. The [`AtomicPtr`] doesn't support them. One could use something","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119455,"byte_end":119551,"line_start":6,"line_end":6,"column_start":1,"column_end":97}},{"value":"/ like `AtomicU128` for them. The catch is this doesn't exist and the difference would make it","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119552,"byte_end":119648,"line_start":7,"line_end":7,"column_start":1,"column_end":97}},{"value":"/ really hard to implement the debt storage/stripped down hazard pointers.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119649,"byte_end":119725,"line_start":8,"line_end":8,"column_start":1,"column_end":77}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119726,"byte_end":119729,"line_start":9,"line_end":9,"column_start":1,"column_end":4}},{"value":"/ A workaround is to use double indirection:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119730,"byte_end":119776,"line_start":10,"line_end":10,"column_start":1,"column_end":47}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119777,"byte_end":119780,"line_start":11,"line_end":11,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119781,"byte_end":119792,"line_start":12,"line_end":12,"column_start":1,"column_end":12}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119793,"byte_end":119821,"line_start":13,"line_end":13,"column_start":1,"column_end":29}},{"value":"/ // This doesn't work:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119822,"byte_end":119847,"line_start":14,"line_end":14,"column_start":1,"column_end":26}},{"value":"/ // let data: ArcSwap<[u8]> = ArcSwap::new(Arc::from([1, 2, 3]));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119848,"byte_end":119916,"line_start":15,"line_end":15,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119917,"byte_end":119920,"line_start":16,"line_end":16,"column_start":1,"column_end":4}},{"value":"/ // But this does:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119921,"byte_end":119942,"line_start":17,"line_end":17,"column_start":1,"column_end":22}},{"value":"/ let data: ArcSwap<Box<[u8]>> = ArcSwap::from_pointee(Box::new([1, 2, 3]));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":119943,"byte_end":120021,"line_start":18,"line_end":18,"column_start":1,"column_end":79}},{"value":"/ # drop(data);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120022,"byte_end":120039,"line_start":19,"line_end":19,"column_start":1,"column_end":18}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120040,"byte_end":120047,"line_start":20,"line_end":20,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120048,"byte_end":120051,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ # Too many [`Guard`]s","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120052,"byte_end":120077,"line_start":22,"line_end":22,"column_start":1,"column_end":26}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120078,"byte_end":120081,"line_start":23,"line_end":23,"column_start":1,"column_end":4}},{"value":"/ There's only limited number of \"fast\" slots for borrowing from [`ArcSwap`] for each single","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120082,"byte_end":120176,"line_start":24,"line_end":24,"column_start":1,"column_end":95}},{"value":"/ thread (currently 8, but this might change in future versions). If these run out, the algorithm","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120177,"byte_end":120276,"line_start":25,"line_end":25,"column_start":1,"column_end":100}},{"value":"/ falls back to slower path.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120277,"byte_end":120307,"line_start":26,"line_end":26,"column_start":1,"column_end":31}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120308,"byte_end":120311,"line_start":27,"line_end":27,"column_start":1,"column_end":4}},{"value":"/ If too many [`Guard`]s are kept around, the performance might be poor. These are not intended","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120312,"byte_end":120409,"line_start":28,"line_end":28,"column_start":1,"column_end":98}},{"value":"/ to be stored in data structures or used across async yield points.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120410,"byte_end":120480,"line_start":29,"line_end":29,"column_start":1,"column_end":71}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120481,"byte_end":120484,"line_start":30,"line_end":30,"column_start":1,"column_end":4}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120485,"byte_end":120516,"line_start":31,"line_end":31,"column_start":1,"column_end":32}},{"value":"/ [`Guard`]: crate::Guard","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120517,"byte_end":120544,"line_start":32,"line_end":32,"column_start":1,"column_end":28}},{"value":"/ [`AtomicPtr`]: std::sync::atomic::AtomicPtr","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120545,"byte_end":120592,"line_start":33,"line_end":33,"column_start":1,"column_end":48}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120593,"byte_end":120596,"line_start":34,"line_end":34,"column_start":1,"column_end":4}},{"value":"/ # No `Clone` implementation","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120597,"byte_end":120628,"line_start":35,"line_end":35,"column_start":1,"column_end":32}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120629,"byte_end":120632,"line_start":36,"line_end":36,"column_start":1,"column_end":4}},{"value":"/ Previous version implemented [`Clone`], but it turned out to be very confusing to people, since","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120633,"byte_end":120732,"line_start":37,"line_end":37,"column_start":1,"column_end":100}},{"value":"/ it created fully independent [`ArcSwap`]. Users expected the instances to be tied to each","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120733,"byte_end":120826,"line_start":38,"line_end":38,"column_start":1,"column_end":94}},{"value":"/ other, that store in one would change the result of future load of the other.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120827,"byte_end":120908,"line_start":39,"line_end":39,"column_start":1,"column_end":82}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120909,"byte_end":120912,"line_start":40,"line_end":40,"column_start":1,"column_end":4}},{"value":"/ To emulate the original behaviour, one can do something like this:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120913,"byte_end":120983,"line_start":41,"line_end":41,"column_start":1,"column_end":71}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120984,"byte_end":120987,"line_start":42,"line_end":42,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":120988,"byte_end":120999,"line_start":43,"line_end":43,"column_start":1,"column_end":12}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":121000,"byte_end":121028,"line_start":44,"line_end":44,"column_start":1,"column_end":29}},{"value":"/ # let old = ArcSwap::from_pointee(42);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":121029,"byte_end":121071,"line_start":45,"line_end":45,"column_start":1,"column_end":43}},{"value":"/ let new = ArcSwap::new(old.load_full());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":121072,"byte_end":121116,"line_start":46,"line_end":46,"column_start":1,"column_end":45}},{"value":"/ # let _ = new;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":121117,"byte_end":121135,"line_start":47,"line_end":47,"column_start":1,"column_end":19}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/limitations.rs","byte_start":121136,"byte_end":121143,"line_start":48,"line_end":48,"column_start":1,"column_end":8}}]},{"kind":"Mod","id":{"krate":0,"index":381},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"patterns","qualname":"::docs::patterns","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","parent":null,"children":[],"decl_id":null,"docs":" Common use patterns","sig":null,"attributes":[{"value":"/ Common use patterns","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121145,"byte_end":121168,"line_start":1,"line_end":1,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121169,"byte_end":121172,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ Here are some common patterns one can use for inspiration. These are mostly covered by examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121173,"byte_end":121272,"line_start":3,"line_end":3,"column_start":1,"column_end":100}},{"value":"/ at the right type in the crate, but this lists them at a single place.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121273,"byte_end":121347,"line_start":4,"line_end":4,"column_start":1,"column_end":75}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121348,"byte_end":121351,"line_start":5,"line_end":5,"column_start":1,"column_end":4}},{"value":"/ # Sharing of configuration data","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121352,"byte_end":121387,"line_start":6,"line_end":6,"column_start":1,"column_end":36}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121388,"byte_end":121391,"line_start":7,"line_end":7,"column_start":1,"column_end":4}},{"value":"/ We want to share configuration from some source with rare updates to some high performance","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121392,"byte_end":121486,"line_start":8,"line_end":8,"column_start":1,"column_end":95}},{"value":"/ worker threads. It can be configuration in its true sense, or a routing table.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121487,"byte_end":121569,"line_start":9,"line_end":9,"column_start":1,"column_end":83}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121570,"byte_end":121573,"line_start":10,"line_end":10,"column_start":1,"column_end":4}},{"value":"/ The idea here is, each new version is a newly allocated in its own [`Arc`]. It is then stored","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121574,"byte_end":121671,"line_start":11,"line_end":11,"column_start":1,"column_end":98}},{"value":"/ into a *shared* `ArcSwap` instance.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121672,"byte_end":121711,"line_start":12,"line_end":12,"column_start":1,"column_end":40}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121712,"byte_end":121715,"line_start":13,"line_end":13,"column_start":1,"column_end":4}},{"value":"/ Each worker then loads the current version before each work chunk. In case a new version is","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121716,"byte_end":121811,"line_start":14,"line_end":14,"column_start":1,"column_end":96}},{"value":"/ stored, the worker keeps using the loaded one until it ends the work chunk and, if it's the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121812,"byte_end":121907,"line_start":15,"line_end":15,"column_start":1,"column_end":96}},{"value":"/ last one to have the version, deallocates it automatically by dropping the [`Guard`]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121908,"byte_end":121996,"line_start":16,"line_end":16,"column_start":1,"column_end":89}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":121997,"byte_end":122000,"line_start":17,"line_end":17,"column_start":1,"column_end":4}},{"value":"/ Note that the configuration needs to be passed through a *single shared* [`ArcSwap`]. That","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122001,"byte_end":122095,"line_start":18,"line_end":18,"column_start":1,"column_end":95}},{"value":"/ means we need to share that instance and we do so through an [`Arc`] (one could use a global","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122096,"byte_end":122192,"line_start":19,"line_end":19,"column_start":1,"column_end":97}},{"value":"/ variable instead).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122193,"byte_end":122215,"line_start":20,"line_end":20,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122216,"byte_end":122219,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ Therefore, what we have is `Arc<ArcSwap<Config>>`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122220,"byte_end":122274,"line_start":22,"line_end":22,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122275,"byte_end":122278,"line_start":23,"line_end":23,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122279,"byte_end":122290,"line_start":24,"line_end":24,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122291,"byte_end":122316,"line_start":25,"line_end":25,"column_start":1,"column_end":26}},{"value":"/ # use std::thread;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122317,"byte_end":122339,"line_start":26,"line_end":26,"column_start":1,"column_end":23}},{"value":"/ # use std::time::Duration;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122340,"byte_end":122370,"line_start":27,"line_end":27,"column_start":1,"column_end":31}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122371,"byte_end":122376,"line_start":28,"line_end":28,"column_start":1,"column_end":6}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122377,"byte_end":122405,"line_start":29,"line_end":29,"column_start":1,"column_end":29}},{"value":"/ # struct Work;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122406,"byte_end":122424,"line_start":30,"line_end":30,"column_start":1,"column_end":19}},{"value":"/ # impl Work { fn fetch() -> Self { Work } fn perform(&self, _: &Config) {} }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122425,"byte_end":122505,"line_start":31,"line_end":31,"column_start":1,"column_end":81}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122506,"byte_end":122511,"line_start":32,"line_end":32,"column_start":1,"column_end":6}},{"value":"/ #[derive(Debug, Default)]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122512,"byte_end":122541,"line_start":33,"line_end":33,"column_start":1,"column_end":30}},{"value":"/ struct Config {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122542,"byte_end":122561,"line_start":34,"line_end":34,"column_start":1,"column_end":20}},{"value":"/     // ... Stuff in here ...","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122562,"byte_end":122594,"line_start":35,"line_end":35,"column_start":1,"column_end":33}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122595,"byte_end":122600,"line_start":36,"line_end":36,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122601,"byte_end":122604,"line_start":37,"line_end":37,"column_start":1,"column_end":4}},{"value":"/ // We wrap the ArcSwap into an Arc, so we can share it between threads.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122605,"byte_end":122680,"line_start":38,"line_end":38,"column_start":1,"column_end":76}},{"value":"/ let config = Arc::new(ArcSwap::from_pointee(Config::default()));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122681,"byte_end":122749,"line_start":39,"line_end":39,"column_start":1,"column_end":69}},{"value":"/ // The configuration thread","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122750,"byte_end":122781,"line_start":40,"line_end":40,"column_start":1,"column_end":32}},{"value":"/ thread::spawn({","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122782,"byte_end":122801,"line_start":41,"line_end":41,"column_start":1,"column_end":20}},{"value":"/     let config = Arc::clone(&config);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122802,"byte_end":122843,"line_start":42,"line_end":42,"column_start":1,"column_end":42}},{"value":"/     move || {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122844,"byte_end":122861,"line_start":43,"line_end":43,"column_start":1,"column_end":18}},{"value":"/         loop {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122862,"byte_end":122880,"line_start":44,"line_end":44,"column_start":1,"column_end":19}},{"value":"/             thread::sleep(Duration::from_secs(60));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122881,"byte_end":122936,"line_start":45,"line_end":45,"column_start":1,"column_end":56}},{"value":"/             // Actually, load it from somewhere","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122937,"byte_end":122988,"line_start":46,"line_end":46,"column_start":1,"column_end":52}},{"value":"/             let new_config = Arc::new(Config::default());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":122989,"byte_end":123050,"line_start":47,"line_end":47,"column_start":1,"column_end":62}},{"value":"/             config.store(new_config);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123051,"byte_end":123092,"line_start":48,"line_end":48,"column_start":1,"column_end":42}},{"value":"/         }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123093,"byte_end":123106,"line_start":49,"line_end":49,"column_start":1,"column_end":14}},{"value":"/     }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123107,"byte_end":123116,"line_start":50,"line_end":50,"column_start":1,"column_end":10}},{"value":"/ });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123117,"byte_end":123124,"line_start":51,"line_end":51,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123125,"byte_end":123128,"line_start":52,"line_end":52,"column_start":1,"column_end":4}},{"value":"/ // The worker thread","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123129,"byte_end":123153,"line_start":53,"line_end":53,"column_start":1,"column_end":25}},{"value":"/ for _ in 0..10 {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123154,"byte_end":123174,"line_start":54,"line_end":54,"column_start":1,"column_end":21}},{"value":"/     thread::spawn({","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123175,"byte_end":123198,"line_start":55,"line_end":55,"column_start":1,"column_end":24}},{"value":"/         let config = Arc::clone(&config);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123199,"byte_end":123244,"line_start":56,"line_end":56,"column_start":1,"column_end":46}},{"value":"/         move || {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123245,"byte_end":123266,"line_start":57,"line_end":57,"column_start":1,"column_end":22}},{"value":"/             loop {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123267,"byte_end":123289,"line_start":58,"line_end":58,"column_start":1,"column_end":23}},{"value":"/                 let work = Work::fetch();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123290,"byte_end":123335,"line_start":59,"line_end":59,"column_start":1,"column_end":46}},{"value":"/                 let config = config.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123336,"byte_end":123383,"line_start":60,"line_end":60,"column_start":1,"column_end":48}},{"value":"/                 work.perform(&config);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123384,"byte_end":123426,"line_start":61,"line_end":61,"column_start":1,"column_end":43}},{"value":"/             }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123427,"byte_end":123444,"line_start":62,"line_end":62,"column_start":1,"column_end":18}},{"value":"/         }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123445,"byte_end":123458,"line_start":63,"line_end":63,"column_start":1,"column_end":14}},{"value":"/     });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123459,"byte_end":123470,"line_start":64,"line_end":64,"column_start":1,"column_end":12}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123471,"byte_end":123476,"line_start":65,"line_end":65,"column_start":1,"column_end":6}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123477,"byte_end":123484,"line_start":66,"line_end":66,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123485,"byte_end":123488,"line_start":67,"line_end":67,"column_start":1,"column_end":4}},{"value":"/ # Consistent snapshots","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123489,"byte_end":123515,"line_start":68,"line_end":68,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123516,"byte_end":123519,"line_start":69,"line_end":69,"column_start":1,"column_end":4}},{"value":"/ While one probably wants to get a fresh instance every time a work chunk is available,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123520,"byte_end":123610,"line_start":70,"line_end":70,"column_start":1,"column_end":91}},{"value":"/ therefore there would be one [`load`] for each work chunk, it is often also important that the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123611,"byte_end":123709,"line_start":71,"line_end":71,"column_start":1,"column_end":99}},{"value":"/ configuration doesn't change in the *middle* of processing of one chunk. Therefore, one","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123710,"byte_end":123801,"line_start":72,"line_end":72,"column_start":1,"column_end":92}},{"value":"/ commonly wants *exactly* one [`load`] for the work chunk, not *at least* one. If the processing","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123802,"byte_end":123901,"line_start":73,"line_end":73,"column_start":1,"column_end":100}},{"value":"/ had multiple phases, one would use something like this:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123902,"byte_end":123961,"line_start":74,"line_end":74,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123962,"byte_end":123965,"line_start":75,"line_end":75,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123966,"byte_end":123977,"line_start":76,"line_end":76,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":123978,"byte_end":124003,"line_start":77,"line_end":77,"column_start":1,"column_end":26}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124004,"byte_end":124009,"line_start":78,"line_end":78,"column_start":1,"column_end":6}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124010,"byte_end":124038,"line_start":79,"line_end":79,"column_start":1,"column_end":29}},{"value":"/ # struct Config;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124039,"byte_end":124059,"line_start":80,"line_end":80,"column_start":1,"column_end":21}},{"value":"/ # struct Work;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124060,"byte_end":124078,"line_start":81,"line_end":81,"column_start":1,"column_end":19}},{"value":"/ # impl Work {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124079,"byte_end":124096,"line_start":82,"line_end":82,"column_start":1,"column_end":18}},{"value":"/ #     fn fetch() -> Self { Work }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124097,"byte_end":124134,"line_start":83,"line_end":83,"column_start":1,"column_end":38}},{"value":"/ #     fn phase_1(&self, _: &Config) {}","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124135,"byte_end":124177,"line_start":84,"line_end":84,"column_start":1,"column_end":43}},{"value":"/ #     fn phase_2(&self, _: &Config) {}","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124178,"byte_end":124220,"line_start":85,"line_end":85,"column_start":1,"column_end":43}},{"value":"/ # }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124221,"byte_end":124228,"line_start":86,"line_end":86,"column_start":1,"column_end":8}},{"value":"/ # let config = Arc::new(ArcSwap::from_pointee(Config));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124229,"byte_end":124288,"line_start":87,"line_end":87,"column_start":1,"column_end":60}},{"value":"/ let work = Work::fetch();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124289,"byte_end":124318,"line_start":88,"line_end":88,"column_start":1,"column_end":30}},{"value":"/ let config = config.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124319,"byte_end":124350,"line_start":89,"line_end":89,"column_start":1,"column_end":32}},{"value":"/ work.phase_1(&config);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124351,"byte_end":124377,"line_start":90,"line_end":90,"column_start":1,"column_end":27}},{"value":"/ // We keep the same config value here","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124378,"byte_end":124419,"line_start":91,"line_end":91,"column_start":1,"column_end":42}},{"value":"/ work.phase_2(&config);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124420,"byte_end":124446,"line_start":92,"line_end":92,"column_start":1,"column_end":27}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124447,"byte_end":124454,"line_start":93,"line_end":93,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124455,"byte_end":124458,"line_start":94,"line_end":94,"column_start":1,"column_end":4}},{"value":"/ Over this:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124459,"byte_end":124473,"line_start":95,"line_end":95,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124474,"byte_end":124477,"line_start":96,"line_end":96,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124478,"byte_end":124489,"line_start":97,"line_end":97,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124490,"byte_end":124515,"line_start":98,"line_end":98,"column_start":1,"column_end":26}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124516,"byte_end":124521,"line_start":99,"line_end":99,"column_start":1,"column_end":6}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124522,"byte_end":124550,"line_start":100,"line_end":100,"column_start":1,"column_end":29}},{"value":"/ # struct Config;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124551,"byte_end":124571,"line_start":101,"line_end":101,"column_start":1,"column_end":21}},{"value":"/ # struct Work;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124572,"byte_end":124590,"line_start":102,"line_end":102,"column_start":1,"column_end":19}},{"value":"/ # impl Work {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124591,"byte_end":124608,"line_start":103,"line_end":103,"column_start":1,"column_end":18}},{"value":"/ #     fn fetch() -> Self { Work }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124609,"byte_end":124646,"line_start":104,"line_end":104,"column_start":1,"column_end":38}},{"value":"/ #     fn phase_1(&self, _: &Config) {}","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124647,"byte_end":124689,"line_start":105,"line_end":105,"column_start":1,"column_end":43}},{"value":"/ #     fn phase_2(&self, _: &Config) {}","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124690,"byte_end":124732,"line_start":106,"line_end":106,"column_start":1,"column_end":43}},{"value":"/ # }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124733,"byte_end":124740,"line_start":107,"line_end":107,"column_start":1,"column_end":8}},{"value":"/ # let config = Arc::new(ArcSwap::from_pointee(Config));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124741,"byte_end":124800,"line_start":108,"line_end":108,"column_start":1,"column_end":60}},{"value":"/ let work = Work::fetch();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124801,"byte_end":124830,"line_start":109,"line_end":109,"column_start":1,"column_end":30}},{"value":"/ work.phase_1(&config.load());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124831,"byte_end":124864,"line_start":110,"line_end":110,"column_start":1,"column_end":34}},{"value":"/ // WARNING!! This is broken, because in between phase_1 and phase_2, the other thread could","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124865,"byte_end":124960,"line_start":111,"line_end":111,"column_start":1,"column_end":96}},{"value":"/ // have replaced the config. Then each phase would be performed with a different one and that","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":124961,"byte_end":125058,"line_start":112,"line_end":112,"column_start":1,"column_end":98}},{"value":"/ // could lead to surprises.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125059,"byte_end":125090,"line_start":113,"line_end":113,"column_start":1,"column_end":32}},{"value":"/ work.phase_2(&config.load());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125091,"byte_end":125124,"line_start":114,"line_end":114,"column_start":1,"column_end":34}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125125,"byte_end":125132,"line_start":115,"line_end":115,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125133,"byte_end":125136,"line_start":116,"line_end":116,"column_start":1,"column_end":4}},{"value":"/ # Caching of the configuration","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125137,"byte_end":125171,"line_start":117,"line_end":117,"column_start":1,"column_end":35}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125172,"byte_end":125175,"line_start":118,"line_end":118,"column_start":1,"column_end":4}},{"value":"/ Let's say that the work chunks are really small, but there's *a lot* of them to work on. Maybe","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125176,"byte_end":125274,"line_start":119,"line_end":119,"column_start":1,"column_end":99}},{"value":"/ we are routing packets and the configuration is the routing table that can sometimes change,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125275,"byte_end":125371,"line_start":120,"line_end":120,"column_start":1,"column_end":97}},{"value":"/ but mostly doesn't.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125372,"byte_end":125395,"line_start":121,"line_end":121,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125396,"byte_end":125399,"line_start":122,"line_end":122,"column_start":1,"column_end":4}},{"value":"/ There's an overhead to [`load`]. If the work chunks are small enough, that could be measurable.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125400,"byte_end":125499,"line_start":123,"line_end":123,"column_start":1,"column_end":100}},{"value":"/ We can reach for [`Cache`]. It makes loads much faster (in the order of accessing local","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125500,"byte_end":125591,"line_start":124,"line_end":124,"column_start":1,"column_end":92}},{"value":"/ variables) in case nothing has changed. It has two costs, it makes the load slightly slower in","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125592,"byte_end":125690,"line_start":125,"line_end":125,"column_start":1,"column_end":99}},{"value":"/ case the thing *did* change (which is rare) and if the worker is inactive, it holds the old","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125691,"byte_end":125786,"line_start":126,"line_end":126,"column_start":1,"column_end":96}},{"value":"/ cached value alive.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125787,"byte_end":125810,"line_start":127,"line_end":127,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125811,"byte_end":125814,"line_start":128,"line_end":128,"column_start":1,"column_end":4}},{"value":"/ This is OK for our use case, because the routing table is usually small enough so some stale","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125815,"byte_end":125911,"line_start":129,"line_end":129,"column_start":1,"column_end":97}},{"value":"/ instances taking a bit of memory isn't an issue.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125912,"byte_end":125964,"line_start":130,"line_end":130,"column_start":1,"column_end":53}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125965,"byte_end":125968,"line_start":131,"line_end":131,"column_start":1,"column_end":4}},{"value":"/ The part that takes care of updates stays the same as above.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":125969,"byte_end":126033,"line_start":132,"line_end":132,"column_start":1,"column_end":65}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126034,"byte_end":126037,"line_start":133,"line_end":133,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126038,"byte_end":126049,"line_start":134,"line_end":134,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126050,"byte_end":126075,"line_start":135,"line_end":135,"column_start":1,"column_end":26}},{"value":"/ # use std::thread;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126076,"byte_end":126098,"line_start":136,"line_end":136,"column_start":1,"column_end":23}},{"value":"/ # use arc_swap::{ArcSwap, Cache};","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126099,"byte_end":126136,"line_start":137,"line_end":137,"column_start":1,"column_end":38}},{"value":"/ # struct Packet; impl Packet { fn receive() -> Self { Packet } }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126137,"byte_end":126205,"line_start":138,"line_end":138,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126206,"byte_end":126209,"line_start":139,"line_end":139,"column_start":1,"column_end":4}},{"value":"/ #[derive(Debug, Default)]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126210,"byte_end":126239,"line_start":140,"line_end":140,"column_start":1,"column_end":30}},{"value":"/ struct RoutingTable {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126240,"byte_end":126265,"line_start":141,"line_end":141,"column_start":1,"column_end":26}},{"value":"/     // ... Stuff in here ...","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126266,"byte_end":126298,"line_start":142,"line_end":142,"column_start":1,"column_end":33}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126299,"byte_end":126304,"line_start":143,"line_end":143,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126305,"byte_end":126308,"line_start":144,"line_end":144,"column_start":1,"column_end":4}},{"value":"/ impl RoutingTable {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126309,"byte_end":126332,"line_start":145,"line_end":145,"column_start":1,"column_end":24}},{"value":"/     fn route(&self, _: Packet) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126333,"byte_end":126369,"line_start":146,"line_end":146,"column_start":1,"column_end":37}},{"value":"/         // ... Interesting things are done here ...","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126370,"byte_end":126425,"line_start":147,"line_end":147,"column_start":1,"column_end":56}},{"value":"/     }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126426,"byte_end":126435,"line_start":148,"line_end":148,"column_start":1,"column_end":10}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126436,"byte_end":126441,"line_start":149,"line_end":149,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126442,"byte_end":126445,"line_start":150,"line_end":150,"column_start":1,"column_end":4}},{"value":"/ let routing_table = Arc::new(ArcSwap::from_pointee(RoutingTable::default()));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126446,"byte_end":126527,"line_start":151,"line_end":151,"column_start":1,"column_end":82}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126528,"byte_end":126531,"line_start":152,"line_end":152,"column_start":1,"column_end":4}},{"value":"/ for _ in 0..10 {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126532,"byte_end":126552,"line_start":153,"line_end":153,"column_start":1,"column_end":21}},{"value":"/     thread::spawn({","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126553,"byte_end":126576,"line_start":154,"line_end":154,"column_start":1,"column_end":24}},{"value":"/         let routing_table = Arc::clone(&routing_table);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126577,"byte_end":126636,"line_start":155,"line_end":155,"column_start":1,"column_end":60}},{"value":"/         move || {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126637,"byte_end":126658,"line_start":156,"line_end":156,"column_start":1,"column_end":22}},{"value":"/             let mut routing_table = Cache::new(routing_table);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126659,"byte_end":126725,"line_start":157,"line_end":157,"column_start":1,"column_end":67}},{"value":"/             loop {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126726,"byte_end":126748,"line_start":158,"line_end":158,"column_start":1,"column_end":23}},{"value":"/                 let packet = Packet::receive();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126749,"byte_end":126800,"line_start":159,"line_end":159,"column_start":1,"column_end":52}},{"value":"/                 // This load is cheaper, because we cache in the private Cache thing.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126801,"byte_end":126890,"line_start":160,"line_end":160,"column_start":1,"column_end":90}},{"value":"/                 // But if the above receive takes a long time, the Cache will keep the stale","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126891,"byte_end":126987,"line_start":161,"line_end":161,"column_start":1,"column_end":97}},{"value":"/                 // value  alive until this time (when it will get replaced by up to date value).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":126988,"byte_end":127088,"line_start":162,"line_end":162,"column_start":1,"column_end":101}},{"value":"/                 let current = routing_table.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127089,"byte_end":127144,"line_start":163,"line_end":163,"column_start":1,"column_end":56}},{"value":"/                 current.route(packet);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127145,"byte_end":127187,"line_start":164,"line_end":164,"column_start":1,"column_end":43}},{"value":"/             }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127188,"byte_end":127205,"line_start":165,"line_end":165,"column_start":1,"column_end":18}},{"value":"/         }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127206,"byte_end":127219,"line_start":166,"line_end":166,"column_start":1,"column_end":14}},{"value":"/     });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127220,"byte_end":127231,"line_start":167,"line_end":167,"column_start":1,"column_end":12}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127232,"byte_end":127237,"line_start":168,"line_end":168,"column_start":1,"column_end":6}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127238,"byte_end":127245,"line_start":169,"line_end":169,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127246,"byte_end":127249,"line_start":170,"line_end":170,"column_start":1,"column_end":4}},{"value":"/ # Projecting into configuration field","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127250,"byte_end":127291,"line_start":171,"line_end":171,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127292,"byte_end":127295,"line_start":172,"line_end":172,"column_start":1,"column_end":4}},{"value":"/ We have a larger application, composed of multiple components. Each component has its own","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127296,"byte_end":127389,"line_start":173,"line_end":173,"column_start":1,"column_end":94}},{"value":"/ `ComponentConfig` structure. Then, the whole application has a `Config` structure that contains","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127390,"byte_end":127489,"line_start":174,"line_end":174,"column_start":1,"column_end":100}},{"value":"/ a component config for each component:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127490,"byte_end":127532,"line_start":175,"line_end":175,"column_start":1,"column_end":43}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127533,"byte_end":127536,"line_start":176,"line_end":176,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127537,"byte_end":127548,"line_start":177,"line_end":177,"column_start":1,"column_end":12}},{"value":"/ # struct ComponentConfig;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127549,"byte_end":127578,"line_start":178,"line_end":178,"column_start":1,"column_end":30}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127579,"byte_end":127582,"line_start":179,"line_end":179,"column_start":1,"column_end":4}},{"value":"/ struct Config {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127583,"byte_end":127602,"line_start":180,"line_end":180,"column_start":1,"column_end":20}},{"value":"/     component: ComponentConfig,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127603,"byte_end":127638,"line_start":181,"line_end":181,"column_start":1,"column_end":36}},{"value":"/     // ... Some other components and things ...","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127639,"byte_end":127690,"line_start":182,"line_end":182,"column_start":1,"column_end":52}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127691,"byte_end":127696,"line_start":183,"line_end":183,"column_start":1,"column_end":6}},{"value":"/ # let c = Config { component: ComponentConfig };","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127697,"byte_end":127749,"line_start":184,"line_end":184,"column_start":1,"column_end":53}},{"value":"/ # let _ = c.component;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127750,"byte_end":127776,"line_start":185,"line_end":185,"column_start":1,"column_end":27}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127777,"byte_end":127784,"line_start":186,"line_end":186,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127785,"byte_end":127788,"line_start":187,"line_end":187,"column_start":1,"column_end":4}},{"value":"/ We would like to use [`ArcSwap`] to push updates to the components. But for various reasons,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127789,"byte_end":127885,"line_start":188,"line_end":188,"column_start":1,"column_end":97}},{"value":"/ it's not a good idea to put the whole `ArcSwap<Config>` to each component, eg:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127886,"byte_end":127968,"line_start":189,"line_end":189,"column_start":1,"column_end":83}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127969,"byte_end":127972,"line_start":190,"line_end":190,"column_start":1,"column_end":4}},{"value":"/ * That would make each component depend on the top level config, which feels reversed.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":127973,"byte_end":128063,"line_start":191,"line_end":191,"column_start":1,"column_end":91}},{"value":"/ * It doesn't allow reusing the same component in multiple applications, as these would have","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128064,"byte_end":128159,"line_start":192,"line_end":192,"column_start":1,"column_end":96}},{"value":"/   different `Config` structures.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128160,"byte_end":128196,"line_start":193,"line_end":193,"column_start":1,"column_end":37}},{"value":"/ * One needs to build the whole `Config` for tests.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128197,"byte_end":128251,"line_start":194,"line_end":194,"column_start":1,"column_end":55}},{"value":"/ * There's a risk of entanglement, that the component would start looking at configuration of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128252,"byte_end":128348,"line_start":195,"line_end":195,"column_start":1,"column_end":97}},{"value":"/   different parts of code, which would be hard to debug.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128349,"byte_end":128409,"line_start":196,"line_end":196,"column_start":1,"column_end":61}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128410,"byte_end":128413,"line_start":197,"line_end":197,"column_start":1,"column_end":4}},{"value":"/ We also could have a separate `ArcSwap<ComponentConfig>` for each component, but that also","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128414,"byte_end":128508,"line_start":198,"line_end":198,"column_start":1,"column_end":95}},{"value":"/ doesn't feel right, as we would have to push updates to multiple places and they could be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128509,"byte_end":128602,"line_start":199,"line_end":199,"column_start":1,"column_end":94}},{"value":"/ inconsistent for a while and we would have to decompose the `Config` structure into the parts,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128603,"byte_end":128701,"line_start":200,"line_end":200,"column_start":1,"column_end":99}},{"value":"/ because we need our things in [`Arc`]s to be put into [`ArcSwap`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128702,"byte_end":128772,"line_start":201,"line_end":201,"column_start":1,"column_end":71}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128773,"byte_end":128776,"line_start":202,"line_end":202,"column_start":1,"column_end":4}},{"value":"/ This is where the [`Access`] trait comes into play. The trait abstracts over things that can","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128777,"byte_end":128873,"line_start":203,"line_end":203,"column_start":1,"column_end":97}},{"value":"/ give access to up to date version of specific T. That can be a [`Constant`] (which is useful","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128874,"byte_end":128970,"line_start":204,"line_end":204,"column_start":1,"column_end":97}},{"value":"/ mostly for the tests, where one doesn't care about the updating), it can be an","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":128971,"byte_end":129053,"line_start":205,"line_end":205,"column_start":1,"column_end":83}},{"value":"/ [`ArcSwap<T>`][`ArcSwap`] itself, but it also can be an [`ArcSwap`] paired with a closure to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129054,"byte_end":129150,"line_start":206,"line_end":206,"column_start":1,"column_end":97}},{"value":"/ project into the specific field. The [`DynAccess`] is similar, but allows type erasure. That's","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129151,"byte_end":129249,"line_start":207,"line_end":207,"column_start":1,"column_end":99}},{"value":"/ more convenient, but a little bit slower.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129250,"byte_end":129295,"line_start":208,"line_end":208,"column_start":1,"column_end":46}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129296,"byte_end":129299,"line_start":209,"line_end":209,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129300,"byte_end":129311,"line_start":210,"line_end":210,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129312,"byte_end":129337,"line_start":211,"line_end":211,"column_start":1,"column_end":26}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129338,"byte_end":129366,"line_start":212,"line_end":212,"column_start":1,"column_end":29}},{"value":"/ # use arc_swap::access::{DynAccess, Map};","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129367,"byte_end":129412,"line_start":213,"line_end":213,"column_start":1,"column_end":46}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129413,"byte_end":129416,"line_start":214,"line_end":214,"column_start":1,"column_end":4}},{"value":"/ #[derive(Debug, Default)]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129417,"byte_end":129446,"line_start":215,"line_end":215,"column_start":1,"column_end":30}},{"value":"/ struct ComponentConfig;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129447,"byte_end":129474,"line_start":216,"line_end":216,"column_start":1,"column_end":28}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129475,"byte_end":129478,"line_start":217,"line_end":217,"column_start":1,"column_end":4}},{"value":"/ struct Component {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129479,"byte_end":129501,"line_start":218,"line_end":218,"column_start":1,"column_end":23}},{"value":"/     config: Box<dyn DynAccess<ComponentConfig>>,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129502,"byte_end":129554,"line_start":219,"line_end":219,"column_start":1,"column_end":53}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129555,"byte_end":129560,"line_start":220,"line_end":220,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129561,"byte_end":129564,"line_start":221,"line_end":221,"column_start":1,"column_end":4}},{"value":"/ #[derive(Debug, Default)]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129565,"byte_end":129594,"line_start":222,"line_end":222,"column_start":1,"column_end":30}},{"value":"/ struct Config {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129595,"byte_end":129614,"line_start":223,"line_end":223,"column_start":1,"column_end":20}},{"value":"/     component: ComponentConfig,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129615,"byte_end":129650,"line_start":224,"line_end":224,"column_start":1,"column_end":36}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129651,"byte_end":129656,"line_start":225,"line_end":225,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129657,"byte_end":129660,"line_start":226,"line_end":226,"column_start":1,"column_end":4}},{"value":"/ let config = Arc::new(ArcSwap::from_pointee(Config::default()));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129661,"byte_end":129729,"line_start":227,"line_end":227,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129730,"byte_end":129733,"line_start":228,"line_end":228,"column_start":1,"column_end":4}},{"value":"/ let component = Component {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129734,"byte_end":129765,"line_start":229,"line_end":229,"column_start":1,"column_end":32}},{"value":"/     config: Box::new(Map::new(Arc::clone(&config), |config: &Config| &config.component)),","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129766,"byte_end":129859,"line_start":230,"line_end":230,"column_start":1,"column_end":94}},{"value":"/ };","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129860,"byte_end":129866,"line_start":231,"line_end":231,"column_start":1,"column_end":7}},{"value":"/ # let _ = component.config;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129867,"byte_end":129898,"line_start":232,"line_end":232,"column_start":1,"column_end":32}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129899,"byte_end":129906,"line_start":233,"line_end":233,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129907,"byte_end":129910,"line_start":234,"line_end":234,"column_start":1,"column_end":4}},{"value":"/ One would use `Box::new(Constant(ComponentConfig))` in unittests instead as the `config` field.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":129911,"byte_end":130010,"line_start":235,"line_end":235,"column_start":1,"column_end":100}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130011,"byte_end":130014,"line_start":236,"line_end":236,"column_start":1,"column_end":4}},{"value":"/ The [`Cache`] has its own [`Access`][crate::cache::Access] trait for similar purposes.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130015,"byte_end":130105,"line_start":237,"line_end":237,"column_start":1,"column_end":91}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130106,"byte_end":130109,"line_start":238,"line_end":238,"column_start":1,"column_end":4}},{"value":"/ [`Arc`]: std::sync::Arc","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130110,"byte_end":130137,"line_start":239,"line_end":239,"column_start":1,"column_end":28}},{"value":"/ [`Guard`]: crate::Guard","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130138,"byte_end":130165,"line_start":240,"line_end":240,"column_start":1,"column_end":28}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130166,"byte_end":130203,"line_start":241,"line_end":241,"column_start":1,"column_end":38}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130204,"byte_end":130235,"line_start":242,"line_end":242,"column_start":1,"column_end":32}},{"value":"/ [`Cache`]: crate::cache::Cache","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130236,"byte_end":130270,"line_start":243,"line_end":243,"column_start":1,"column_end":35}},{"value":"/ [`Access`]: crate::access::Access","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130271,"byte_end":130308,"line_start":244,"line_end":244,"column_start":1,"column_end":38}},{"value":"/ [`DynAccess`]: crate::access::DynAccess","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130309,"byte_end":130352,"line_start":245,"line_end":245,"column_start":1,"column_end":44}},{"value":"/ [`Constant`]: crate::access::Constant","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/patterns.rs","byte_start":130353,"byte_end":130394,"line_start":246,"line_end":246,"column_start":1,"column_end":42}}]},{"kind":"Mod","id":{"krate":0,"index":382},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"performance","qualname":"::docs::performance","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","parent":null,"children":[],"decl_id":null,"docs":" Performance characteristics.","sig":null,"attributes":[{"value":"/ Performance characteristics.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130396,"byte_end":130428,"line_start":1,"line_end":1,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130429,"byte_end":130432,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ There are several performance advantages of [`ArcSwap`] over [`RwLock`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130433,"byte_end":130509,"line_start":3,"line_end":3,"column_start":1,"column_end":77}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130510,"byte_end":130513,"line_start":4,"line_end":4,"column_start":1,"column_end":4}},{"value":"/ ## Lock-free readers","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130514,"byte_end":130538,"line_start":5,"line_end":5,"column_start":1,"column_end":25}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130539,"byte_end":130542,"line_start":6,"line_end":6,"column_start":1,"column_end":4}},{"value":"/ All the read operations are always [lock-free]. Most of the time, they are actually","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130543,"byte_end":130630,"line_start":7,"line_end":7,"column_start":1,"column_end":88}},{"value":"/ [wait-free]. They are [lock-free] from time to time, with at least `usize::MAX / 4` accesses","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130631,"byte_end":130727,"line_start":8,"line_end":8,"column_start":1,"column_end":97}},{"value":"/ that are [wait-free] in between.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130728,"byte_end":130764,"line_start":9,"line_end":9,"column_start":1,"column_end":37}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130765,"byte_end":130768,"line_start":10,"line_end":10,"column_start":1,"column_end":4}},{"value":"/ Writers are [lock-free].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130769,"byte_end":130797,"line_start":11,"line_end":11,"column_start":1,"column_end":29}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130798,"byte_end":130801,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ Whenever the documentation talks about *contention* in the context of [`ArcSwap`], it talks","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130802,"byte_end":130897,"line_start":13,"line_end":13,"column_start":1,"column_end":96}},{"value":"/ about contention on the CPU level ‒ multiple cores having to deal with accessing the same cache","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":130898,"byte_end":130999,"line_start":14,"line_end":14,"column_start":1,"column_end":100}},{"value":"/ line. This slows things down (compared to each one accessing its own cache line), but an","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131000,"byte_end":131092,"line_start":15,"line_end":15,"column_start":1,"column_end":93}},{"value":"/ eventual progress is still guaranteed and the cost is significantly lower than parking threads","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131093,"byte_end":131191,"line_start":16,"line_end":16,"column_start":1,"column_end":99}},{"value":"/ as with mutex-style contention.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131192,"byte_end":131227,"line_start":17,"line_end":17,"column_start":1,"column_end":36}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131228,"byte_end":131231,"line_start":18,"line_end":18,"column_start":1,"column_end":4}},{"value":"/ ## Speeds","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131232,"byte_end":131245,"line_start":19,"line_end":19,"column_start":1,"column_end":14}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131246,"byte_end":131249,"line_start":20,"line_end":20,"column_start":1,"column_end":4}},{"value":"/ The base line speed of read operations is similar to using an *uncontended* [`Mutex`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131250,"byte_end":131340,"line_start":21,"line_end":21,"column_start":1,"column_end":91}},{"value":"/ However, [`load`] suffers no contention from any other read operations and only slight","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131341,"byte_end":131431,"line_start":22,"line_end":22,"column_start":1,"column_end":91}},{"value":"/ ones during updates. The [`load_full`] operation is additionally contended only on","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131432,"byte_end":131518,"line_start":23,"line_end":23,"column_start":1,"column_end":87}},{"value":"/ the reference count of the [`Arc`] inside ‒ so, in general, while [`Mutex`] rapidly","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131519,"byte_end":131608,"line_start":24,"line_end":24,"column_start":1,"column_end":88}},{"value":"/ loses its performance when being in active use by multiple threads at once and","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131609,"byte_end":131691,"line_start":25,"line_end":25,"column_start":1,"column_end":83}},{"value":"/ [`RwLock`] is slow to start with, [`ArcSwap`] mostly keeps its performance even when read by","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131692,"byte_end":131788,"line_start":26,"line_end":26,"column_start":1,"column_end":97}},{"value":"/ many threads in parallel.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131789,"byte_end":131818,"line_start":27,"line_end":27,"column_start":1,"column_end":30}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131819,"byte_end":131822,"line_start":28,"line_end":28,"column_start":1,"column_end":4}},{"value":"/ Write operations are considered expensive. A write operation is more expensive than access to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131823,"byte_end":131920,"line_start":29,"line_end":29,"column_start":1,"column_end":98}},{"value":"/ an *uncontended* [`Mutex`] and on some architectures even slower than uncontended","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":131921,"byte_end":132006,"line_start":30,"line_end":30,"column_start":1,"column_end":86}},{"value":"/ [`RwLock`]. However, it is faster than either under contention.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132007,"byte_end":132074,"line_start":31,"line_end":31,"column_start":1,"column_end":68}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132075,"byte_end":132078,"line_start":32,"line_end":32,"column_start":1,"column_end":4}},{"value":"/ There are some (very unscientific) [benchmarks] within the source code of the library, and the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132079,"byte_end":132177,"line_start":33,"line_end":33,"column_start":1,"column_end":99}},{"value":"/ [`DefaultStrategy`][crate::DefaultStrategy] has some numbers measured on my computer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132178,"byte_end":132267,"line_start":34,"line_end":34,"column_start":1,"column_end":90}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132268,"byte_end":132271,"line_start":35,"line_end":35,"column_start":1,"column_end":4}},{"value":"/ The exact numbers are highly dependant on the machine used (both absolute numbers and relative","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132272,"byte_end":132370,"line_start":36,"line_end":36,"column_start":1,"column_end":99}},{"value":"/ between different data structures). Not only architectures have a huge impact (eg. x86 vs ARM),","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132371,"byte_end":132470,"line_start":37,"line_end":37,"column_start":1,"column_end":100}},{"value":"/ but even AMD vs. Intel or two different Intel processors. Therefore, if what matters is more","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132471,"byte_end":132567,"line_start":38,"line_end":38,"column_start":1,"column_end":97}},{"value":"/ the speed than the wait-free guarantees, you're advised to do your own measurements.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132568,"byte_end":132656,"line_start":39,"line_end":39,"column_start":1,"column_end":89}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132657,"byte_end":132660,"line_start":40,"line_end":40,"column_start":1,"column_end":4}},{"value":"/ Further speed improvements may be gained by the use of the [`Cache`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132661,"byte_end":132734,"line_start":41,"line_end":41,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132735,"byte_end":132738,"line_start":42,"line_end":42,"column_start":1,"column_end":4}},{"value":"/ ## Consistency","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132739,"byte_end":132757,"line_start":43,"line_end":43,"column_start":1,"column_end":19}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132758,"byte_end":132761,"line_start":44,"line_end":44,"column_start":1,"column_end":4}},{"value":"/ The combination of [wait-free] guarantees of readers and no contention between concurrent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132762,"byte_end":132855,"line_start":45,"line_end":45,"column_start":1,"column_end":94}},{"value":"/ [`load`]s provides *consistent* performance characteristics of the synchronization mechanism.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132856,"byte_end":132953,"line_start":46,"line_end":46,"column_start":1,"column_end":98}},{"value":"/ This might be important for soft-realtime applications (the CPU-level contention caused by a","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":132954,"byte_end":133050,"line_start":47,"line_end":47,"column_start":1,"column_end":97}},{"value":"/ recent update/write operation might be problematic for some hard-realtime cases, though).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133051,"byte_end":133144,"line_start":48,"line_end":48,"column_start":1,"column_end":94}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133145,"byte_end":133148,"line_start":49,"line_end":49,"column_start":1,"column_end":4}},{"value":"/ ## Choosing the right reading operation","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133149,"byte_end":133192,"line_start":50,"line_end":50,"column_start":1,"column_end":44}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133193,"byte_end":133196,"line_start":51,"line_end":51,"column_start":1,"column_end":4}},{"value":"/ There are several load operations available. While the general go-to one should be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133197,"byte_end":133283,"line_start":52,"line_end":52,"column_start":1,"column_end":87}},{"value":"/ [`load`], there may be situations in which the others are a better match.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133284,"byte_end":133361,"line_start":53,"line_end":53,"column_start":1,"column_end":78}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133362,"byte_end":133365,"line_start":54,"line_end":54,"column_start":1,"column_end":4}},{"value":"/ The [`load`] usually only borrows the instance from the shared [`ArcSwap`]. This makes","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133366,"byte_end":133456,"line_start":55,"line_end":55,"column_start":1,"column_end":91}},{"value":"/ it faster, because different threads don't contend on the reference count. There are two","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133457,"byte_end":133549,"line_start":56,"line_end":56,"column_start":1,"column_end":93}},{"value":"/ situations when this borrow isn't possible. If the content gets changed, all existing","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133550,"byte_end":133639,"line_start":57,"line_end":57,"column_start":1,"column_end":90}},{"value":"/ [`Guard`]s are promoted to contain an owned instance. The promotion is done by the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133640,"byte_end":133726,"line_start":58,"line_end":58,"column_start":1,"column_end":87}},{"value":"/ writer, but the readers still need to decrement the reference counts of the old instance when","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133727,"byte_end":133824,"line_start":59,"line_end":59,"column_start":1,"column_end":98}},{"value":"/ they no longer use it, contending on the count.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133825,"byte_end":133876,"line_start":60,"line_end":60,"column_start":1,"column_end":52}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133877,"byte_end":133880,"line_start":61,"line_end":61,"column_start":1,"column_end":4}},{"value":"/ The other situation derives from internal implementation. The number of borrows each thread can","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133881,"byte_end":133980,"line_start":62,"line_end":62,"column_start":1,"column_end":100}},{"value":"/ have at each time (across all [`Guard`]s) is limited. If this limit is exceeded, an owned","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":133981,"byte_end":134074,"line_start":63,"line_end":63,"column_start":1,"column_end":94}},{"value":"/ instance is created instead.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134075,"byte_end":134107,"line_start":64,"line_end":64,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134108,"byte_end":134111,"line_start":65,"line_end":65,"column_start":1,"column_end":4}},{"value":"/ Therefore, if you intend to hold onto the loaded value for extended time span, you may prefer","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134112,"byte_end":134209,"line_start":66,"line_end":66,"column_start":1,"column_end":98}},{"value":"/ [`load_full`]. It loads the pointer instance ([`Arc`]) without borrowing, which is","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134210,"byte_end":134296,"line_start":67,"line_end":67,"column_start":1,"column_end":87}},{"value":"/ slower (because of the possible contention on the reference count), but doesn't consume one of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134297,"byte_end":134395,"line_start":68,"line_end":68,"column_start":1,"column_end":99}},{"value":"/ the borrow slots, which will make it more likely for following [`load`]s to have a slot","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134396,"byte_end":134487,"line_start":69,"line_end":69,"column_start":1,"column_end":92}},{"value":"/ available. Similarly, if some API needs an owned `Arc`, [`load_full`] is more convenient and","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134488,"byte_end":134584,"line_start":70,"line_end":70,"column_start":1,"column_end":97}},{"value":"/ potentially faster then first [`load`]ing and then cloning that [`Arc`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134585,"byte_end":134661,"line_start":71,"line_end":71,"column_start":1,"column_end":77}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134662,"byte_end":134665,"line_start":72,"line_end":72,"column_start":1,"column_end":4}},{"value":"/ Additionally, it is possible to use a [`Cache`] to get further speed improvement at the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134666,"byte_end":134757,"line_start":73,"line_end":73,"column_start":1,"column_end":92}},{"value":"/ cost of less comfortable API and possibly keeping the older values alive for longer than","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134758,"byte_end":134850,"line_start":74,"line_end":74,"column_start":1,"column_end":93}},{"value":"/ necessary.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134851,"byte_end":134865,"line_start":75,"line_end":75,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134866,"byte_end":134869,"line_start":76,"line_end":76,"column_start":1,"column_end":4}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134870,"byte_end":134901,"line_start":77,"line_end":77,"column_start":1,"column_end":32}},{"value":"/ [`Cache`]: crate::cache::Cache","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134902,"byte_end":134936,"line_start":78,"line_end":78,"column_start":1,"column_end":35}},{"value":"/ [`Guard`]: crate::Guard","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134937,"byte_end":134964,"line_start":79,"line_end":79,"column_start":1,"column_end":28}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":134965,"byte_end":135002,"line_start":80,"line_end":80,"column_start":1,"column_end":38}},{"value":"/ [`load_full`]: crate::ArcSwapAny::load_full","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":135003,"byte_end":135050,"line_start":81,"line_end":81,"column_start":1,"column_end":48}},{"value":"/ [`Arc`]: std::sync::Arc","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":135051,"byte_end":135078,"line_start":82,"line_end":82,"column_start":1,"column_end":28}},{"value":"/ [`Mutex`]: std::sync::Mutex","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":135079,"byte_end":135110,"line_start":83,"line_end":83,"column_start":1,"column_end":32}},{"value":"/ [`RwLock`]: std::sync::RwLock","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":135111,"byte_end":135144,"line_start":84,"line_end":84,"column_start":1,"column_end":34}},{"value":"/ [benchmarks]: https://github.com/vorner/arc-swap/tree/master/benchmarks","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":135145,"byte_end":135220,"line_start":85,"line_end":85,"column_start":1,"column_end":76}},{"value":"/ [lock-free]: https://en.wikipedia.org/wiki/Non-blocking_algorithm#Lock-freedom","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":135221,"byte_end":135303,"line_start":86,"line_end":86,"column_start":1,"column_end":83}},{"value":"/ [wait-free]: https://en.wikipedia.org/wiki/Non-blocking_algorithm#Wait-freedom","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/performance.rs","byte_start":135304,"byte_end":135386,"line_start":87,"line_end":87,"column_start":1,"column_end":83}}]},{"kind":"Trait","id":{"krate":0,"index":393},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137117,"byte_end":137123,"line_start":37,"line_end":37,"column_start":18,"column_end":24},"name":"RefCnt","qualname":"::ref_cnt::RefCnt","value":"RefCnt: Clone","parent":null,"children":[{"krate":0,"index":394},{"krate":0,"index":395},{"krate":0,"index":396},{"krate":0,"index":397},{"krate":0,"index":398},{"krate":0,"index":399}],"decl_id":null,"docs":" A trait describing smart reference counted pointers.","sig":null,"attributes":[{"value":"/ A trait describing smart reference counted pointers.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135440,"byte_end":135496,"line_start":5,"line_end":5,"column_start":1,"column_end":57}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135497,"byte_end":135500,"line_start":6,"line_end":6,"column_start":1,"column_end":4}},{"value":"/ Note that in a way [`Option<Arc<T>>`][Option] is also a smart reference counted pointer, just","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135501,"byte_end":135598,"line_start":7,"line_end":7,"column_start":1,"column_end":98}},{"value":"/ one that can hold NULL.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135599,"byte_end":135626,"line_start":8,"line_end":8,"column_start":1,"column_end":28}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135627,"byte_end":135630,"line_start":9,"line_end":9,"column_start":1,"column_end":4}},{"value":"/ The trait is unsafe, because a wrong implementation will break the [ArcSwapAny]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135631,"byte_end":135714,"line_start":10,"line_end":10,"column_start":1,"column_end":84}},{"value":"/ implementation and lead to UB.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135715,"byte_end":135749,"line_start":11,"line_end":11,"column_start":1,"column_end":35}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135750,"byte_end":135753,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ This is not actually expected for downstream crate to implement, this is just means to reuse","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135754,"byte_end":135850,"line_start":13,"line_end":13,"column_start":1,"column_end":97}},{"value":"/ code for [Arc] and [`Option<Arc>`][Option] variants. However, it is theoretically possible (if","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135851,"byte_end":135949,"line_start":14,"line_end":14,"column_start":1,"column_end":99}},{"value":"/ you have your own [Arc] implementation).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135950,"byte_end":135994,"line_start":15,"line_end":15,"column_start":1,"column_end":45}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135995,"byte_end":135998,"line_start":16,"line_end":16,"column_start":1,"column_end":4}},{"value":"/ It is also implemented for [Rc], but that is not considered very useful (because the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":135999,"byte_end":136087,"line_start":17,"line_end":17,"column_start":1,"column_end":89}},{"value":"/ [ArcSwapAny] is not `Send` or `Sync`, therefore there's very little advantage for it to be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136088,"byte_end":136182,"line_start":18,"line_end":18,"column_start":1,"column_end":95}},{"value":"/ atomic).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136183,"byte_end":136195,"line_start":19,"line_end":19,"column_start":1,"column_end":13}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136196,"byte_end":136199,"line_start":20,"line_end":20,"column_start":1,"column_end":4}},{"value":"/ # Safety","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136200,"byte_end":136212,"line_start":21,"line_end":21,"column_start":1,"column_end":13}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136213,"byte_end":136216,"line_start":22,"line_end":22,"column_start":1,"column_end":4}},{"value":"/ Aside from the obvious properties (like that incrementing and decrementing a reference count","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136217,"byte_end":136313,"line_start":23,"line_end":23,"column_start":1,"column_end":97}},{"value":"/ cancel each out and that having less references tracked than how many things actually point to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136314,"byte_end":136412,"line_start":24,"line_end":24,"column_start":1,"column_end":99}},{"value":"/ the value is fine as long as the count doesn't drop to 0), it also must satisfy that if two","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136413,"byte_end":136508,"line_start":25,"line_end":25,"column_start":1,"column_end":96}},{"value":"/ pointers have the same value, they point to the same object. This is specifically not true for","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136509,"byte_end":136607,"line_start":26,"line_end":26,"column_start":1,"column_end":99}},{"value":"/ ZSTs, but it is true for `Arc`s of ZSTs, because they have the reference counts just after the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136608,"byte_end":136706,"line_start":27,"line_end":27,"column_start":1,"column_end":99}},{"value":"/ value. It would be fine to point to a type-erased version of the same object, though (if one","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136707,"byte_end":136803,"line_start":28,"line_end":28,"column_start":1,"column_end":97}},{"value":"/ could use this trait with unsized types in the first place).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136804,"byte_end":136868,"line_start":29,"line_end":29,"column_start":1,"column_end":65}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136869,"byte_end":136872,"line_start":30,"line_end":30,"column_start":1,"column_end":4}},{"value":"/ Furthermore, the type should be Pin (eg. if the type is cloned or moved, it should still","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136873,"byte_end":136965,"line_start":31,"line_end":31,"column_start":1,"column_end":93}},{"value":"/ point/deref to the same place in memory).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":136966,"byte_end":137011,"line_start":32,"line_end":32,"column_start":1,"column_end":46}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137012,"byte_end":137015,"line_start":33,"line_end":33,"column_start":1,"column_end":4}},{"value":"/ [Arc]: std::sync::Arc","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137016,"byte_end":137041,"line_start":34,"line_end":34,"column_start":1,"column_end":26}},{"value":"/ [Rc]: std::rc::Rc","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137042,"byte_end":137063,"line_start":35,"line_end":35,"column_start":1,"column_end":22}},{"value":"/ [ArcSwapAny]: crate::ArcSwapAny","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137064,"byte_end":137099,"line_start":36,"line_end":36,"column_start":1,"column_end":36}}]},{"kind":"Type","id":{"krate":0,"index":394},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137187,"byte_end":137191,"line_start":39,"line_end":39,"column_start":10,"column_end":14},"name":"Base","qualname":"::ref_cnt::RefCnt::Base","value":"type Base;","parent":{"krate":0,"index":393},"children":[],"decl_id":null,"docs":" The base type the pointer points to.\n","sig":null,"attributes":[{"value":"/ The base type the pointer points to.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137137,"byte_end":137177,"line_start":38,"line_end":38,"column_start":5,"column_end":45}}]},{"kind":"Method","id":{"krate":0,"index":395},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137586,"byte_end":137594,"line_start":48,"line_end":48,"column_start":8,"column_end":16},"name":"into_ptr","qualname":"::ref_cnt::RefCnt::into_ptr","value":"pub fn into_ptr(Self) -> *mut Self::Base","parent":{"krate":0,"index":393},"children":[],"decl_id":null,"docs":" Converts the smart pointer into a raw pointer, without affecting the reference count.","sig":null,"attributes":[{"value":"/ Converts the smart pointer into a raw pointer, without affecting the reference count.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137198,"byte_end":137287,"line_start":41,"line_end":41,"column_start":5,"column_end":94}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137292,"byte_end":137295,"line_start":42,"line_end":42,"column_start":5,"column_end":8}},{"value":"/ This can be seen as kind of freezing the pointer ‒ it'll be later converted back using","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137300,"byte_end":137392,"line_start":43,"line_end":43,"column_start":5,"column_end":95}},{"value":"/ [`from_ptr`](#method.from_ptr).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137397,"byte_end":137432,"line_start":44,"line_end":44,"column_start":5,"column_end":40}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137437,"byte_end":137440,"line_start":45,"line_end":45,"column_start":5,"column_end":8}},{"value":"/ The pointer must point to the value stored (and the value must be the same as one returned","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137445,"byte_end":137539,"line_start":46,"line_end":46,"column_start":5,"column_end":99}},{"value":"/ by [`as_ptr`](#method.as_ptr).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137544,"byte_end":137578,"line_start":47,"line_end":47,"column_start":5,"column_end":39}}]},{"kind":"Method","id":{"krate":0,"index":396},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137789,"byte_end":137795,"line_start":53,"line_end":53,"column_start":8,"column_end":14},"name":"as_ptr","qualname":"::ref_cnt::RefCnt::as_ptr","value":"pub fn as_ptr(&Self) -> *mut Self::Base","parent":{"krate":0,"index":393},"children":[],"decl_id":null,"docs":" Provides a view into the smart pointer as a raw pointer.","sig":null,"attributes":[{"value":"/ Provides a view into the smart pointer as a raw pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137630,"byte_end":137690,"line_start":50,"line_end":50,"column_start":5,"column_end":65}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137695,"byte_end":137698,"line_start":51,"line_end":51,"column_start":5,"column_end":8}},{"value":"/ This must not affect the reference count ‒ the pointer is only borrowed.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137703,"byte_end":137781,"line_start":52,"line_end":52,"column_start":5,"column_end":81}}]},{"kind":"Method","id":{"krate":0,"index":397},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138484,"byte_end":138492,"line_start":66,"line_end":66,"column_start":15,"column_end":23},"name":"from_ptr","qualname":"::ref_cnt::RefCnt::from_ptr","value":"pub unsafe fn from_ptr(*const Self::Base) -> Self","parent":{"krate":0,"index":393},"children":[],"decl_id":null,"docs":" Converts a raw pointer back into the smart pointer, without affecting the reference count.","sig":null,"attributes":[{"value":"/ Converts a raw pointer back into the smart pointer, without affecting the reference count.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137832,"byte_end":137926,"line_start":55,"line_end":55,"column_start":5,"column_end":99}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137931,"byte_end":137934,"line_start":56,"line_end":56,"column_start":5,"column_end":8}},{"value":"/ This is only called on values previously returned by [`into_ptr`](#method.into_ptr).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137939,"byte_end":138027,"line_start":57,"line_end":57,"column_start":5,"column_end":93}},{"value":"/ However, it is not guaranteed to be 1:1 relation ‒ `from_ptr` may be called more times than","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138032,"byte_end":138129,"line_start":58,"line_end":58,"column_start":5,"column_end":100}},{"value":"/ `into_ptr` temporarily provided the reference count never drops under 1 during that time","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138134,"byte_end":138226,"line_start":59,"line_end":59,"column_start":5,"column_end":97}},{"value":"/ (the implementation sometimes owes a reference). These extra pointers will either be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138231,"byte_end":138319,"line_start":60,"line_end":60,"column_start":5,"column_end":93}},{"value":"/ converted back using `into_ptr` or forgotten.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138324,"byte_end":138373,"line_start":61,"line_end":61,"column_start":5,"column_end":54}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138378,"byte_end":138381,"line_start":62,"line_end":62,"column_start":5,"column_end":8}},{"value":"/ # Safety","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138386,"byte_end":138398,"line_start":63,"line_end":63,"column_start":5,"column_end":17}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138403,"byte_end":138406,"line_start":64,"line_end":64,"column_start":5,"column_end":8}},{"value":"/ This must not be called by code outside of this crate.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138411,"byte_end":138469,"line_start":65,"line_end":65,"column_start":5,"column_end":63}}]},{"kind":"Method","id":{"krate":0,"index":398},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138653,"byte_end":138656,"line_start":71,"line_end":71,"column_start":8,"column_end":11},"name":"inc","qualname":"::ref_cnt::RefCnt::inc","value":"pub fn inc(&Self) -> *mut Self::Base","parent":{"krate":0,"index":393},"children":[],"decl_id":null,"docs":" Increments the reference count by one.","sig":null,"attributes":[{"value":"/ Increments the reference count by one.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138531,"byte_end":138573,"line_start":68,"line_end":68,"column_start":5,"column_end":47}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138578,"byte_end":138581,"line_start":69,"line_end":69,"column_start":5,"column_end":8}},{"value":"/ Return the pointer to the inner thing as a side effect.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138586,"byte_end":138645,"line_start":70,"line_end":70,"column_start":5,"column_end":64}}]},{"kind":"Method","id":{"krate":0,"index":399},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139117,"byte_end":139120,"line_start":84,"line_end":84,"column_start":15,"column_end":18},"name":"dec","qualname":"::ref_cnt::RefCnt::dec","value":"pub unsafe fn dec(*const Self::Base)","parent":{"krate":0,"index":393},"children":[],"decl_id":null,"docs":" Decrements the reference count by one.","sig":null,"attributes":[{"value":"/ Decrements the reference count by one.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138740,"byte_end":138782,"line_start":75,"line_end":75,"column_start":5,"column_end":47}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138787,"byte_end":138790,"line_start":76,"line_end":76,"column_start":5,"column_end":8}},{"value":"/ Note this is called on a raw pointer (one previously returned by","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138795,"byte_end":138863,"line_start":77,"line_end":77,"column_start":5,"column_end":73}},{"value":"/ [`into_ptr`](#method.into_ptr). This may lead to dropping of the reference count to 0 and","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138868,"byte_end":138961,"line_start":78,"line_end":78,"column_start":5,"column_end":98}},{"value":"/ destruction of the internal pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":138966,"byte_end":139006,"line_start":79,"line_end":79,"column_start":5,"column_end":45}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139011,"byte_end":139014,"line_start":80,"line_end":80,"column_start":5,"column_end":8}},{"value":"/ # Safety","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139019,"byte_end":139031,"line_start":81,"line_end":81,"column_start":5,"column_end":17}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139036,"byte_end":139039,"line_start":82,"line_end":82,"column_start":5,"column_end":8}},{"value":"/ This must not be called by code outside of this crate.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139044,"byte_end":139102,"line_start":83,"line_end":83,"column_start":5,"column_end":63}}]},{"kind":"Mod","id":{"krate":0,"index":418},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"strategy","qualname":"::strategy","value":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","parent":null,"children":[{"krate":0,"index":419},{"krate":0,"index":422},{"krate":0,"index":425},{"krate":0,"index":428},{"krate":0,"index":507},{"krate":0,"index":547},{"krate":0,"index":548},{"krate":0,"index":549},{"krate":0,"index":551},{"krate":0,"index":554},{"krate":0,"index":555},{"krate":0,"index":556},{"krate":0,"index":574},{"krate":0,"index":576},{"krate":0,"index":579},{"krate":0,"index":581}],"decl_id":null,"docs":" Strategies for protecting the reference counts.","sig":null,"attributes":[{"value":"/ Strategies for protecting the reference counts.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140274,"byte_end":140325,"line_start":1,"line_end":1,"column_start":1,"column_end":52}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140326,"byte_end":140329,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ There are multiple algorithms how to protect the reference counts while they're being updated","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140330,"byte_end":140427,"line_start":3,"line_end":3,"column_start":1,"column_end":98}},{"value":"/ by multiple threads, each with its own set of pros and cons. The [`DefaultStrategy`] is used by","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140428,"byte_end":140527,"line_start":4,"line_end":4,"column_start":1,"column_end":100}},{"value":"/ default and should generally be the least surprising option. It is possible to pick a different","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140528,"byte_end":140627,"line_start":5,"line_end":5,"column_start":1,"column_end":100}},{"value":"/ strategy.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140628,"byte_end":140641,"line_start":6,"line_end":6,"column_start":1,"column_end":14}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140642,"byte_end":140645,"line_start":7,"line_end":7,"column_start":1,"column_end":4}},{"value":"/ For now, the traits in here are sealed and don't expose any methods to the users of the crate.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140646,"byte_end":140744,"line_start":8,"line_end":8,"column_start":1,"column_end":99}},{"value":"/ This is because we are not confident about the details just yet. In the future it may be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140745,"byte_end":140837,"line_start":9,"line_end":9,"column_start":1,"column_end":93}},{"value":"/ possible for downstream users to implement their own, but for now it is only so users can","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140838,"byte_end":140931,"line_start":10,"line_end":10,"column_start":1,"column_end":94}},{"value":"/ choose one of the provided.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140932,"byte_end":140963,"line_start":11,"line_end":11,"column_start":1,"column_end":32}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140964,"byte_end":140967,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ It is expected that future strategies would come with different capabilities and limitations.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":140968,"byte_end":141065,"line_start":13,"line_end":13,"column_start":1,"column_end":98}},{"value":"/ In particular, some that are not \"tight\" in the cleanup (delay the cleanup) or not support the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141066,"byte_end":141164,"line_start":14,"line_end":14,"column_start":1,"column_end":99}},{"value":"/ compare and swap operations.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141165,"byte_end":141197,"line_start":15,"line_end":15,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141198,"byte_end":141201,"line_start":16,"line_end":16,"column_start":1,"column_end":4}},{"value":"/ Currently, we have these strategies:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141202,"byte_end":141242,"line_start":17,"line_end":17,"column_start":1,"column_end":41}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141243,"byte_end":141246,"line_start":18,"line_end":18,"column_start":1,"column_end":4}},{"value":"/ * [`DefaultStrategy`] (this one is used implicitly)","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141247,"byte_end":141302,"line_start":19,"line_end":19,"column_start":1,"column_end":56}},{"value":"/ * [`RwLock<()>`][std::sync::RwLock]","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141303,"byte_end":141342,"line_start":20,"line_end":20,"column_start":1,"column_end":40}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141343,"byte_end":141346,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ # Testing","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141347,"byte_end":141360,"line_start":22,"line_end":22,"column_start":1,"column_end":14}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141361,"byte_end":141364,"line_start":23,"line_end":23,"column_start":1,"column_end":4}},{"value":"/ Formally, the [`RwLock<()>`][std::sync::RwLock] may be used as a strategy too. It doesn't have","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141365,"byte_end":141463,"line_start":24,"line_end":24,"column_start":1,"column_end":99}},{"value":"/ the performance characteristics or lock-free guarantees of the others, but it is much simpler","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141464,"byte_end":141561,"line_start":25,"line_end":25,"column_start":1,"column_end":98}},{"value":"/ and contains less `unsafe` code (actually, less code altogether). Therefore, it can be used for","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141562,"byte_end":141661,"line_start":26,"line_end":26,"column_start":1,"column_end":100}},{"value":"/ testing purposes and cross-checking.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141662,"byte_end":141702,"line_start":27,"line_end":27,"column_start":1,"column_end":41}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141703,"byte_end":141706,"line_start":28,"line_end":28,"column_start":1,"column_end":4}},{"value":"/ Note that generally, using [`RwLock<Arc<T>>`][std::sync::RwLock] is likely to be better","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141707,"byte_end":141798,"line_start":29,"line_end":29,"column_start":1,"column_end":92}},{"value":"/ performance wise. So if the goal is to not use third-party unsafe code, only the one in","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141799,"byte_end":141890,"line_start":30,"line_end":30,"column_start":1,"column_end":92}},{"value":"/ [`std`], that is the better option. This is provided mostly for investigation and testing of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141891,"byte_end":141987,"line_start":31,"line_end":31,"column_start":1,"column_end":97}},{"value":"/ [`ArcSwap`] itself or algorithms written to use [`ArcSwap`].","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":141988,"byte_end":142052,"line_start":32,"line_end":32,"column_start":1,"column_end":65}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142053,"byte_end":142056,"line_start":33,"line_end":33,"column_start":1,"column_end":4}},{"value":"/ *This is not meant to be used in production code*.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142057,"byte_end":142111,"line_start":34,"line_end":34,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142112,"byte_end":142115,"line_start":35,"line_end":35,"column_start":1,"column_end":4}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142116,"byte_end":142147,"line_start":36,"line_end":36,"column_start":1,"column_end":32}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142148,"byte_end":142185,"line_start":37,"line_end":37,"column_start":1,"column_end":38}}]},{"kind":"Struct","id":{"krate":0,"index":469},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":148794,"byte_end":148810,"line_start":27,"line_end":27,"column_start":12,"column_end":28},"name":"HybridProtection","qualname":"::strategy::hybrid::HybridProtection","value":"HybridProtection {  }","parent":null,"children":[{"krate":0,"index":471},{"krate":0,"index":472}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":489},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":153842,"byte_end":153848,"line_start":160,"line_end":160,"column_start":11,"column_end":17},"name":"Config","qualname":"::strategy::hybrid::Config","value":"Config","parent":null,"children":[{"krate":0,"index":490}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Const","id":{"krate":0,"index":490},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":153916,"byte_end":153924,"line_start":162,"line_end":162,"column_start":11,"column_end":19},"name":"USE_FAST","qualname":"::strategy::hybrid::Config::USE_FAST","value":"bool","parent":{"krate":0,"index":489},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":931},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":153972,"byte_end":153985,"line_start":166,"line_end":166,"column_start":12,"column_end":25},"name":"DefaultConfig","qualname":"::strategy::hybrid::DefaultConfig","value":"","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":937},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":154093,"byte_end":154107,"line_start":173,"line_end":173,"column_start":12,"column_end":26},"name":"HybridStrategy","qualname":"::strategy::hybrid::HybridStrategy","value":"HybridStrategy {  }","parent":null,"children":[{"krate":0,"index":939}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Type","id":{"krate":0,"index":554},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144785,"byte_end":144800,"line_start":93,"line_end":93,"column_start":10,"column_end":25},"name":"DefaultStrategy","qualname":"::strategy::DefaultStrategy","value":"HybridStrategy<DefaultConfig>","parent":null,"children":[],"decl_id":null,"docs":" The default strategy.","sig":null,"attributes":[{"value":"/ The default strategy.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142480,"byte_end":142505,"line_start":53,"line_end":53,"column_start":1,"column_end":26}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142506,"byte_end":142509,"line_start":54,"line_end":54,"column_start":1,"column_end":4}},{"value":"/ It is used by the type aliases [`ArcSwap`][crate::ArcSwap] and","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142510,"byte_end":142576,"line_start":55,"line_end":55,"column_start":1,"column_end":67}},{"value":"/ [`ArcSwapOption`][crate::ArcSwapOption]. Only the other strategies need to be used explicitly.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142577,"byte_end":142675,"line_start":56,"line_end":56,"column_start":1,"column_end":99}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142676,"byte_end":142679,"line_start":57,"line_end":57,"column_start":1,"column_end":4}},{"value":"/ # Performance characteristics","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142680,"byte_end":142713,"line_start":58,"line_end":58,"column_start":1,"column_end":34}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142714,"byte_end":142717,"line_start":59,"line_end":59,"column_start":1,"column_end":4}},{"value":"/ * It is optimized for read-heavy situations, with possibly many concurrent read accesses from","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142718,"byte_end":142815,"line_start":60,"line_end":60,"column_start":1,"column_end":98}},{"value":"/   multiple threads. Readers don't contend each other at all.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142816,"byte_end":142880,"line_start":61,"line_end":61,"column_start":1,"column_end":65}},{"value":"/ * Readers are wait-free (with the exception of at most once in `usize::MAX / 4` accesses, which","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142881,"byte_end":142980,"line_start":62,"line_end":62,"column_start":1,"column_end":100}},{"value":"/   is only lock-free).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":142981,"byte_end":143006,"line_start":63,"line_end":63,"column_start":1,"column_end":26}},{"value":"/ * Writers are lock-free.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143007,"byte_end":143035,"line_start":64,"line_end":64,"column_start":1,"column_end":29}},{"value":"/ * Reclamation is exact ‒ the resource is released as soon as possible (works like RAII, not","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143036,"byte_end":143133,"line_start":65,"line_end":65,"column_start":1,"column_end":96}},{"value":"/   like a traditional garbage collector; can contain non-`'static` data).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143134,"byte_end":143210,"line_start":66,"line_end":66,"column_start":1,"column_end":77}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143211,"byte_end":143214,"line_start":67,"line_end":67,"column_start":1,"column_end":4}},{"value":"/ Each thread has a limited number of fast slots (currently 8, but the exact number is not","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143215,"byte_end":143307,"line_start":68,"line_end":68,"column_start":1,"column_end":93}},{"value":"/ guaranteed). If it holds at most that many [`Guard`]s at once, acquiring them is fast. Once","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143308,"byte_end":143403,"line_start":69,"line_end":69,"column_start":1,"column_end":96}},{"value":"/ these slots are used up (by holding to these many [`Guard`]s), acquiring more of them will be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143404,"byte_end":143501,"line_start":70,"line_end":70,"column_start":1,"column_end":98}},{"value":"/ slightly slower, but still wait-free.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143502,"byte_end":143543,"line_start":71,"line_end":71,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143544,"byte_end":143547,"line_start":72,"line_end":72,"column_start":1,"column_end":4}},{"value":"/ If you expect to hold a lot of \"handles\" to the data around, or hold onto it for a long time,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143548,"byte_end":143645,"line_start":73,"line_end":73,"column_start":1,"column_end":98}},{"value":"/ you may want to prefer the [`load_full`][crate::ArcSwapAny::load_full] method.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143646,"byte_end":143728,"line_start":74,"line_end":74,"column_start":1,"column_end":83}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143729,"byte_end":143732,"line_start":75,"line_end":75,"column_start":1,"column_end":4}},{"value":"/ The speed of the fast slots is in the ballpark of locking an *uncontented* mutex. The advantage","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143733,"byte_end":143832,"line_start":76,"line_end":76,"column_start":1,"column_end":100}},{"value":"/ over the mutex is the stability of speed in the face of contention from other threads ‒ while","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143833,"byte_end":143932,"line_start":77,"line_end":77,"column_start":1,"column_end":98}},{"value":"/ the performance of mutex goes rapidly down, the slowdown of running out of held slots or heavy","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":143933,"byte_end":144031,"line_start":78,"line_end":78,"column_start":1,"column_end":99}},{"value":"/ concurrent writer thread in the area of single-digit multiples.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144032,"byte_end":144099,"line_start":79,"line_end":79,"column_start":1,"column_end":68}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144100,"byte_end":144103,"line_start":80,"line_end":80,"column_start":1,"column_end":4}},{"value":"/ The ballpark benchmark figures (my older computer) are around these, but you're welcome to run","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144104,"byte_end":144202,"line_start":81,"line_end":81,"column_start":1,"column_end":99}},{"value":"/ the benchmarks in the git repository or write your own.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144203,"byte_end":144262,"line_start":82,"line_end":82,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144263,"byte_end":144266,"line_start":83,"line_end":83,"column_start":1,"column_end":4}},{"value":"/ * Load (both uncontented and contented by other loads): ~30ns","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144267,"byte_end":144332,"line_start":84,"line_end":84,"column_start":1,"column_end":66}},{"value":"/ * `load_full`: ~50ns uncontented, goes up a bit with other `load_full` in other threads on the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144333,"byte_end":144431,"line_start":85,"line_end":85,"column_start":1,"column_end":99}},{"value":"/   same `Arc` value (~80-100ns).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144432,"byte_end":144467,"line_start":86,"line_end":86,"column_start":1,"column_end":36}},{"value":"/ * Loads after running out of the slots ‒ about 10-20ns slower than `load_full`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144468,"byte_end":144553,"line_start":87,"line_end":87,"column_start":1,"column_end":84}},{"value":"/ * Stores: Dependent on number of threads, but generally low microseconds.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144554,"byte_end":144631,"line_start":88,"line_end":88,"column_start":1,"column_end":78}},{"value":"/ * Loads with heavy concurrent writer (to the same `ArcSwap`): ~250ns.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144632,"byte_end":144705,"line_start":89,"line_end":89,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144706,"byte_end":144709,"line_start":90,"line_end":90,"column_start":1,"column_end":4}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144710,"byte_end":144747,"line_start":91,"line_end":91,"column_start":1,"column_end":38}},{"value":"/ [`Guard`]: crate::Guard","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144748,"byte_end":144775,"line_start":92,"line_end":92,"column_start":1,"column_end":28}}]},{"kind":"Type","id":{"krate":0,"index":555},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145708,"byte_end":145727,"line_start":111,"line_end":111,"column_start":10,"column_end":29},"name":"IndependentStrategy","qualname":"::strategy::IndependentStrategy","value":"DefaultStrategy","parent":null,"children":[],"decl_id":null,"docs":" Strategy for isolating instances.","sig":null,"attributes":[{"value":"/ Strategy for isolating instances.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144835,"byte_end":144872,"line_start":95,"line_end":95,"column_start":1,"column_end":38}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144873,"byte_end":144876,"line_start":96,"line_end":96,"column_start":1,"column_end":4}},{"value":"/ It is similar to [`DefaultStrategy`], however the spin lock is not sharded (therefore multiple","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144877,"byte_end":144975,"line_start":97,"line_end":97,"column_start":1,"column_end":99}},{"value":"/ concurrent threads might get bigger hit when multiple threads have to fall back). Nevertheless,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":144976,"byte_end":145075,"line_start":98,"line_end":98,"column_start":1,"column_end":100}},{"value":"/ each instance has a private spin lock, not influencing the other instances. That also makes","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145076,"byte_end":145171,"line_start":99,"line_end":99,"column_start":1,"column_end":96}},{"value":"/ them bigger in memory.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145172,"byte_end":145198,"line_start":100,"line_end":100,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145199,"byte_end":145202,"line_start":101,"line_end":101,"column_start":1,"column_end":4}},{"value":"/ The hazard pointers are still shared between all instances.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145203,"byte_end":145266,"line_start":102,"line_end":102,"column_start":1,"column_end":64}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145267,"byte_end":145270,"line_start":103,"line_end":103,"column_start":1,"column_end":4}},{"value":"/ The purpose of this strategy is meant for cases where a single instance is going to be","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145271,"byte_end":145361,"line_start":104,"line_end":104,"column_start":1,"column_end":91}},{"value":"/ \"tortured\" a lot, so it should not overflow to other instances.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145362,"byte_end":145429,"line_start":105,"line_end":105,"column_start":1,"column_end":68}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145430,"byte_end":145433,"line_start":106,"line_end":106,"column_start":1,"column_end":4}},{"value":"/ This too may be changed for something else (but with at least as good guarantees, primarily","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145434,"byte_end":145529,"line_start":107,"line_end":107,"column_start":1,"column_end":96}},{"value":"/ that other instances won't get influenced by the \"torture\").","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145530,"byte_end":145594,"line_start":108,"line_end":108,"column_start":1,"column_end":65}}]},{"kind":"Trait","id":{"krate":0,"index":565},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146030,"byte_end":146043,"line_start":124,"line_end":124,"column_start":15,"column_end":28},"name":"InnerStrategy","qualname":"::strategy::sealed::InnerStrategy","value":"InnerStrategy<T: RefCnt>","parent":null,"children":[{"krate":0,"index":567},{"krate":0,"index":568},{"krate":0,"index":569}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Type","id":{"krate":0,"index":567},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146100,"byte_end":146109,"line_start":126,"line_end":126,"column_start":14,"column_end":23},"name":"Protected","qualname":"::strategy::sealed::InnerStrategy::Protected","value":"type Protected: Protected<T>;","parent":{"krate":0,"index":565},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Method","id":{"krate":0,"index":568},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146143,"byte_end":146147,"line_start":127,"line_end":127,"column_start":19,"column_end":23},"name":"load","qualname":"::strategy::sealed::InnerStrategy::load","value":"pub unsafe fn load(&Self, &AtomicPtr<T::Base>) -> Self::Protected","parent":{"krate":0,"index":565},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Method","id":{"krate":0,"index":569},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146223,"byte_end":146239,"line_start":128,"line_end":128,"column_start":19,"column_end":35},"name":"wait_for_readers","qualname":"::strategy::sealed::InnerStrategy::wait_for_readers","value":"pub unsafe fn wait_for_readers(&Self, *const T::Base, &AtomicPtr<T::Base>)","parent":{"krate":0,"index":565},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":570},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146320,"byte_end":146323,"line_start":131,"line_end":131,"column_start":15,"column_end":18},"name":"CaS","qualname":"::strategy::sealed::CaS","value":"CaS<T: RefCnt>: InnerStrategy<T>","parent":null,"children":[{"krate":0,"index":572}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Method","id":{"krate":0,"index":572},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146373,"byte_end":146389,"line_start":132,"line_end":132,"column_start":19,"column_end":35},"name":"compare_and_swap","qualname":"::strategy::sealed::CaS::compare_and_swap","value":"pub unsafe fn compare_and_swap<C: AsRaw<T::Base>>(&Self, &AtomicPtr<T::Base>,\n                                                  C, T) -> Self::Protected","parent":{"krate":0,"index":570},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":574},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147180,"byte_end":147188,"line_start":150,"line_end":150,"column_start":11,"column_end":19},"name":"Strategy","qualname":"::strategy::Strategy","value":"Strategy<T: RefCnt>: sealed::InnerStrategy<T>","parent":null,"children":[],"decl_id":null,"docs":" A strategy for protecting the reference counted pointer `T`.","sig":null,"attributes":[{"value":"/ A strategy for protecting the reference counted pointer `T`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146554,"byte_end":146618,"line_start":141,"line_end":141,"column_start":1,"column_end":65}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146619,"byte_end":146622,"line_start":142,"line_end":142,"column_start":1,"column_end":4}},{"value":"/ This chooses the algorithm for how the reference counts are protected. Note that the user of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146623,"byte_end":146719,"line_start":143,"line_end":143,"column_start":1,"column_end":97}},{"value":"/ the crate can't implement the trait and can't access any method; this is hopefully temporary","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146720,"byte_end":146816,"line_start":144,"line_end":144,"column_start":1,"column_end":97}},{"value":"/ measure to make sure the interface is not part of the stability guarantees of the crate. Once","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146817,"byte_end":146914,"line_start":145,"line_end":145,"column_start":1,"column_end":98}},{"value":"/ enough experience is gained with implementing various strategies, it will be un-sealed and","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146915,"byte_end":147009,"line_start":146,"line_end":146,"column_start":1,"column_end":95}},{"value":"/ users will be able to provide their own implementation.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147010,"byte_end":147069,"line_start":147,"line_end":147,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147070,"byte_end":147073,"line_start":148,"line_end":148,"column_start":1,"column_end":4}},{"value":"/ For now, the trait works only as a bound to talk about the types that represent strategies.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147074,"byte_end":147169,"line_start":149,"line_end":149,"column_start":1,"column_end":96}}]},{"kind":"Trait","id":{"krate":0,"index":579},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147620,"byte_end":147623,"line_start":159,"line_end":159,"column_start":11,"column_end":14},"name":"CaS","qualname":"::strategy::CaS","value":"CaS<T: RefCnt>: sealed::CaS<T>","parent":null,"children":[],"decl_id":null,"docs":" An extension of the [`Strategy`], allowing for compare and swap operation.","sig":null,"attributes":[{"value":"/ An extension of the [`Strategy`], allowing for compare and swap operation.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147296,"byte_end":147374,"line_start":153,"line_end":153,"column_start":1,"column_end":79}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147375,"byte_end":147378,"line_start":154,"line_end":154,"column_start":1,"column_end":4}},{"value":"/ The compare and swap operation is \"advanced\" and not all strategies need to support them.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147379,"byte_end":147472,"line_start":155,"line_end":155,"column_start":1,"column_end":94}},{"value":"/ Therefore, it is a separate trait.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147473,"byte_end":147511,"line_start":156,"line_end":156,"column_start":1,"column_end":39}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147512,"byte_end":147515,"line_start":157,"line_end":157,"column_start":1,"column_end":4}},{"value":"/ Similarly, it is not yet made publicly usable or implementable and works only as a bound.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147516,"byte_end":147609,"line_start":158,"line_end":158,"column_start":1,"column_end":94}}]},{"kind":"Struct","id":{"krate":0,"index":655},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6132,"byte_end":6137,"line_start":159,"line_end":159,"column_start":12,"column_end":17},"name":"Guard","qualname":"::Guard","value":"Guard {  }","parent":null,"children":[{"krate":0,"index":658}],"decl_id":null,"docs":" A temporary storage of the pointer.","sig":null,"attributes":[{"value":"/ A temporary storage of the pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5830,"byte_end":5869,"line_start":154,"line_end":154,"column_start":1,"column_end":40}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5870,"byte_end":5873,"line_start":155,"line_end":155,"column_start":1,"column_end":4}},{"value":"/ This guard object is returned from most loading methods (with the notable exception of","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5874,"byte_end":5964,"line_start":156,"line_end":156,"column_start":1,"column_end":91}},{"value":"/ [`load_full`](struct.ArcSwapAny.html#method.load_full)). It dereferences to the smart pointer","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5965,"byte_end":6062,"line_start":157,"line_end":157,"column_start":1,"column_end":98}},{"value":"/ loaded, so most operations are to be done using that.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6063,"byte_end":6120,"line_start":158,"line_end":158,"column_start":1,"column_end":58}}]},{"kind":"Method","id":{"krate":0,"index":663},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6552,"byte_end":6562,"line_start":171,"line_end":171,"column_start":12,"column_end":22},"name":"into_inner","qualname":"<Guard<T, S>>::into_inner","value":"pub fn into_inner(Self) -> T","parent":null,"children":[],"decl_id":null,"docs":" Converts it into the held value.","sig":null,"attributes":[{"value":"/ Converts it into the held value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6267,"byte_end":6303,"line_start":164,"line_end":164,"column_start":5,"column_end":41}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6308,"byte_end":6311,"line_start":165,"line_end":165,"column_start":5,"column_end":8}},{"value":"/ This, on occasion, may be a tiny bit faster than cloning the Arc or whatever is being held","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6316,"byte_end":6410,"line_start":166,"line_end":166,"column_start":5,"column_end":99}},{"value":"/ inside.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6415,"byte_end":6426,"line_start":167,"line_end":167,"column_start":5,"column_end":16}},{"value":"allow(clippy :: wrong_self_convention)","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6487,"byte_end":6526,"line_start":169,"line_end":169,"column_start":5,"column_end":44}},{"value":"inline","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6531,"byte_end":6540,"line_start":170,"line_end":170,"column_start":5,"column_end":14}}]},{"kind":"Method","id":{"krate":0,"index":664},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7189,"byte_end":7199,"line_start":191,"line_end":191,"column_start":12,"column_end":22},"name":"from_inner","qualname":"<Guard<T, S>>::from_inner","value":"pub fn from_inner(T) -> Self","parent":null,"children":[],"decl_id":null,"docs":" Create a guard for a given value `inner`.","sig":null,"attributes":[{"value":"/ Create a guard for a given value `inner`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6627,"byte_end":6672,"line_start":175,"line_end":175,"column_start":5,"column_end":50}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6677,"byte_end":6680,"line_start":176,"line_end":176,"column_start":5,"column_end":8}},{"value":"/ This can be useful on occasion to pass a specific object to code that expects or","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6685,"byte_end":6769,"line_start":177,"line_end":177,"column_start":5,"column_end":89}},{"value":"/ wants to store a Guard.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6774,"byte_end":6801,"line_start":178,"line_end":178,"column_start":5,"column_end":32}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6806,"byte_end":6809,"line_start":179,"line_end":179,"column_start":5,"column_end":8}},{"value":"/ # Example","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6814,"byte_end":6827,"line_start":180,"line_end":180,"column_start":5,"column_end":18}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6832,"byte_end":6835,"line_start":181,"line_end":181,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6840,"byte_end":6851,"line_start":182,"line_end":182,"column_start":5,"column_end":16}},{"value":"/ # use arc_swap::{ArcSwap, DefaultStrategy, Guard};","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6856,"byte_end":6910,"line_start":183,"line_end":183,"column_start":5,"column_end":59}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6915,"byte_end":6940,"line_start":184,"line_end":184,"column_start":5,"column_end":30}},{"value":"/ # let p = ArcSwap::from_pointee(42);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6945,"byte_end":6985,"line_start":185,"line_end":185,"column_start":5,"column_end":45}},{"value":"/ // Create two guards pointing to the same object","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6990,"byte_end":7042,"line_start":186,"line_end":186,"column_start":5,"column_end":57}},{"value":"/ let g1 = p.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7047,"byte_end":7069,"line_start":187,"line_end":187,"column_start":5,"column_end":27}},{"value":"/ let g2 = Guard::<_, DefaultStrategy>::from_inner(Arc::clone(&*g1));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7074,"byte_end":7145,"line_start":188,"line_end":188,"column_start":5,"column_end":76}},{"value":"/ # drop(g2);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7150,"byte_end":7165,"line_start":189,"line_end":189,"column_start":5,"column_end":20}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7170,"byte_end":7177,"line_start":190,"line_end":190,"column_start":5,"column_end":12}}]},{"kind":"Struct","id":{"krate":0,"index":691},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10507,"byte_end":10517,"line_start":292,"line_end":292,"column_start":12,"column_end":22},"name":"ArcSwapAny","qualname":"::ArcSwapAny","value":"ArcSwapAny {  }","parent":null,"children":[{"krate":0,"index":694},{"krate":0,"index":695},{"krate":0,"index":696}],"decl_id":null,"docs":" An atomic storage for a reference counted smart pointer like [`Arc`] or `Option<Arc>`.","sig":null,"attributes":[{"value":"/ An atomic storage for a reference counted smart pointer like [`Arc`] or `Option<Arc>`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8447,"byte_end":8537,"line_start":244,"line_end":244,"column_start":1,"column_end":91}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8538,"byte_end":8541,"line_start":245,"line_end":245,"column_start":1,"column_end":4}},{"value":"/ This is a storage where a smart pointer may live. It can be read and written atomically from","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8542,"byte_end":8638,"line_start":246,"line_end":246,"column_start":1,"column_end":97}},{"value":"/ several threads, but doesn't act like a pointer itself.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8639,"byte_end":8698,"line_start":247,"line_end":247,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8699,"byte_end":8702,"line_start":248,"line_end":248,"column_start":1,"column_end":4}},{"value":"/ One can be created [`from`] an [`Arc`]. To get the pointer back, use the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8703,"byte_end":8779,"line_start":249,"line_end":249,"column_start":1,"column_end":77}},{"value":"/ [`load`](#method.load).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8780,"byte_end":8807,"line_start":250,"line_end":250,"column_start":1,"column_end":28}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8808,"byte_end":8811,"line_start":251,"line_end":251,"column_start":1,"column_end":4}},{"value":"/ # Note","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8812,"byte_end":8822,"line_start":252,"line_end":252,"column_start":1,"column_end":11}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8823,"byte_end":8826,"line_start":253,"line_end":253,"column_start":1,"column_end":4}},{"value":"/ This is the common generic implementation. This allows sharing the same code for storing","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8827,"byte_end":8919,"line_start":254,"line_end":254,"column_start":1,"column_end":93}},{"value":"/ both `Arc` and `Option<Arc>` (and possibly other similar types).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8920,"byte_end":8988,"line_start":255,"line_end":255,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8989,"byte_end":8992,"line_start":256,"line_end":256,"column_start":1,"column_end":4}},{"value":"/ In your code, you most probably want to interact with it through the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":8993,"byte_end":9065,"line_start":257,"line_end":257,"column_start":1,"column_end":73}},{"value":"/ [`ArcSwap`](type.ArcSwap.html) and [`ArcSwapOption`](type.ArcSwapOption.html) aliases. However,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9066,"byte_end":9165,"line_start":258,"line_end":258,"column_start":1,"column_end":100}},{"value":"/ the methods they share are described here and are applicable to both of them. That's why the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9166,"byte_end":9262,"line_start":259,"line_end":259,"column_start":1,"column_end":97}},{"value":"/ examples here use `ArcSwap` ‒ but they could as well be written with `ArcSwapOption` or","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9263,"byte_end":9356,"line_start":260,"line_end":260,"column_start":1,"column_end":92}},{"value":"/ `ArcSwapAny`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9357,"byte_end":9374,"line_start":261,"line_end":261,"column_start":1,"column_end":18}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9375,"byte_end":9378,"line_start":262,"line_end":262,"column_start":1,"column_end":4}},{"value":"/ # Type parameters","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9379,"byte_end":9400,"line_start":263,"line_end":263,"column_start":1,"column_end":22}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9401,"byte_end":9404,"line_start":264,"line_end":264,"column_start":1,"column_end":4}},{"value":"/ * `T`: The smart pointer to be kept inside. This crate provides implementation for `Arc<_>` and","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9405,"byte_end":9504,"line_start":265,"line_end":265,"column_start":1,"column_end":100}},{"value":"/   `Option<Arc<_>>` (`Rc` too, but that one is not practically useful). But third party could","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9505,"byte_end":9601,"line_start":266,"line_end":266,"column_start":1,"column_end":97}},{"value":"/   provide implementations of the [`RefCnt`] trait and plug in others.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9602,"byte_end":9675,"line_start":267,"line_end":267,"column_start":1,"column_end":74}},{"value":"/ * `S`: Chooses the [strategy] used to protect the data inside. They come with various","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9676,"byte_end":9765,"line_start":268,"line_end":268,"column_start":1,"column_end":90}},{"value":"/   performance trade offs, the default [`DefaultStrategy`] is good rule of thumb for most use","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9766,"byte_end":9862,"line_start":269,"line_end":269,"column_start":1,"column_end":97}},{"value":"/   cases.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9863,"byte_end":9875,"line_start":270,"line_end":270,"column_start":1,"column_end":13}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9876,"byte_end":9879,"line_start":271,"line_end":271,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9880,"byte_end":9894,"line_start":272,"line_end":272,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9895,"byte_end":9898,"line_start":273,"line_end":273,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9899,"byte_end":9910,"line_start":274,"line_end":274,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9911,"byte_end":9936,"line_start":275,"line_end":275,"column_start":1,"column_end":26}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9937,"byte_end":9965,"line_start":276,"line_end":276,"column_start":1,"column_end":29}},{"value":"/ let arc = Arc::new(42);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9966,"byte_end":9993,"line_start":277,"line_end":277,"column_start":1,"column_end":28}},{"value":"/ let arc_swap = ArcSwap::from(arc);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":9994,"byte_end":10032,"line_start":278,"line_end":278,"column_start":1,"column_end":39}},{"value":"/ assert_eq!(42, **arc_swap.load());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10033,"byte_end":10071,"line_start":279,"line_end":279,"column_start":1,"column_end":39}},{"value":"/ // It can be read multiple times","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10072,"byte_end":10108,"line_start":280,"line_end":280,"column_start":1,"column_end":37}},{"value":"/ assert_eq!(42, **arc_swap.load());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10109,"byte_end":10147,"line_start":281,"line_end":281,"column_start":1,"column_end":39}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10148,"byte_end":10151,"line_start":282,"line_end":282,"column_start":1,"column_end":4}},{"value":"/ // Put a new one in there","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10152,"byte_end":10181,"line_start":283,"line_end":283,"column_start":1,"column_end":30}},{"value":"/ let new_arc = Arc::new(0);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10182,"byte_end":10212,"line_start":284,"line_end":284,"column_start":1,"column_end":31}},{"value":"/ assert_eq!(42, *arc_swap.swap(new_arc));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10213,"byte_end":10257,"line_start":285,"line_end":285,"column_start":1,"column_end":45}},{"value":"/ assert_eq!(0, **arc_swap.load());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10258,"byte_end":10295,"line_start":286,"line_end":286,"column_start":1,"column_end":38}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10296,"byte_end":10303,"line_start":287,"line_end":287,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10304,"byte_end":10307,"line_start":288,"line_end":288,"column_start":1,"column_end":4}},{"value":"/ [`Arc`]: https://doc.rust-lang.org/std/sync/struct.Arc.html","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10308,"byte_end":10371,"line_start":289,"line_end":289,"column_start":1,"column_end":64}},{"value":"/ [`from`]: https://doc.rust-lang.org/nightly/std/convert/trait.From.html#tymethod.from","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10372,"byte_end":10461,"line_start":290,"line_end":290,"column_start":1,"column_end":90}},{"value":"/ [`RefCnt`]: trait.RefCnt.html","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10462,"byte_end":10495,"line_start":291,"line_end":291,"column_start":1,"column_end":34}}]},{"kind":"Method","id":{"krate":0,"index":720},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12093,"byte_end":12096,"line_start":352,"line_end":352,"column_start":12,"column_end":15},"name":"new","qualname":"<ArcSwapAny<T, S>>::new","value":"pub fn new(T) -> Self where S: Default","parent":null,"children":[],"decl_id":null,"docs":" Constructs a new storage.\n","sig":null,"attributes":[{"value":"/ Constructs a new storage.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12052,"byte_end":12081,"line_start":351,"line_end":351,"column_start":5,"column_end":34}}]},{"kind":"Method","id":{"krate":0,"index":721},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12267,"byte_end":12280,"line_start":360,"line_end":360,"column_start":12,"column_end":25},"name":"with_strategy","qualname":"<ArcSwapAny<T, S>>::with_strategy","value":"pub fn with_strategy(T, S) -> Self","parent":null,"children":[],"decl_id":null,"docs":" Constructs a new storage while customizing the protection strategy.\n","sig":null,"attributes":[{"value":"/ Constructs a new storage while customizing the protection strategy.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12184,"byte_end":12255,"line_start":359,"line_end":359,"column_start":5,"column_end":76}}]},{"kind":"Method","id":{"krate":0,"index":722},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12757,"byte_end":12767,"line_start":373,"line_end":373,"column_start":12,"column_end":22},"name":"into_inner","qualname":"<ArcSwapAny<T, S>>::into_inner","value":"pub fn into_inner(Self) -> T","parent":null,"children":[],"decl_id":null,"docs":" Extracts the value inside.\n","sig":null,"attributes":[{"value":"/ Extracts the value inside.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12715,"byte_end":12745,"line_start":372,"line_end":372,"column_start":5,"column_end":35}}]},{"kind":"Method","id":{"krate":0,"index":723},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13327,"byte_end":13336,"line_start":388,"line_end":388,"column_start":12,"column_end":21},"name":"load_full","qualname":"<ArcSwapAny<T, S>>::load_full","value":"pub fn load_full(&Self) -> T","parent":null,"children":[],"decl_id":null,"docs":" Loads the value.","sig":null,"attributes":[{"value":"/ Loads the value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12997,"byte_end":13017,"line_start":381,"line_end":381,"column_start":5,"column_end":25}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13022,"byte_end":13025,"line_start":382,"line_end":382,"column_start":5,"column_end":8}},{"value":"/ This makes another copy of the held pointer and returns it, atomically (it is","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13030,"byte_end":13111,"line_start":383,"line_end":383,"column_start":5,"column_end":86}},{"value":"/ safe even when other thread stores into the same instance at the same time).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13116,"byte_end":13196,"line_start":384,"line_end":384,"column_start":5,"column_end":85}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13201,"byte_end":13204,"line_start":385,"line_end":385,"column_start":5,"column_end":8}},{"value":"/ The method is lock-free and wait-free, but usually more expensive than","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13209,"byte_end":13283,"line_start":386,"line_end":386,"column_start":5,"column_end":79}},{"value":"/ [`load`](#method.load).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13288,"byte_end":13315,"line_start":387,"line_end":387,"column_start":5,"column_end":32}}]},{"kind":"Method","id":{"krate":0,"index":724},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15536,"byte_end":15540,"line_start":438,"line_end":438,"column_start":12,"column_end":16},"name":"load","qualname":"<ArcSwapAny<T, S>>::load","value":"pub fn load(&Self) -> Guard<T, S>","parent":null,"children":[],"decl_id":null,"docs":" Provides a temporary borrow of the object inside.","sig":null,"attributes":[{"value":"/ Provides a temporary borrow of the object inside.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13401,"byte_end":13454,"line_start":392,"line_end":392,"column_start":5,"column_end":58}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13459,"byte_end":13462,"line_start":393,"line_end":393,"column_start":5,"column_end":8}},{"value":"/ This returns a proxy object allowing access to the thing held inside. However, there's","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13467,"byte_end":13557,"line_start":394,"line_end":394,"column_start":5,"column_end":95}},{"value":"/ only limited amount of possible cheap proxies in existence for each thread ‒ if more are","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13562,"byte_end":13656,"line_start":395,"line_end":395,"column_start":5,"column_end":97}},{"value":"/ created, it falls back to equivalent of [`load_full`](#method.load_full) internally.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13661,"byte_end":13749,"line_start":396,"line_end":396,"column_start":5,"column_end":93}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13754,"byte_end":13757,"line_start":397,"line_end":397,"column_start":5,"column_end":8}},{"value":"/ This is therefore a good choice to use for eg. searching a data structure or juggling the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13762,"byte_end":13855,"line_start":398,"line_end":398,"column_start":5,"column_end":98}},{"value":"/ pointers around a bit, but not as something to store in larger amounts. The rule of thumb","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13860,"byte_end":13953,"line_start":399,"line_end":399,"column_start":5,"column_end":98}},{"value":"/ is this is suited for local variables on stack, but not in long-living data structures.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":13958,"byte_end":14049,"line_start":400,"line_end":400,"column_start":5,"column_end":96}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14054,"byte_end":14057,"line_start":401,"line_end":401,"column_start":5,"column_end":8}},{"value":"/ # Consistency","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14062,"byte_end":14079,"line_start":402,"line_end":402,"column_start":5,"column_end":22}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14084,"byte_end":14087,"line_start":403,"line_end":403,"column_start":5,"column_end":8}},{"value":"/ In case multiple related operations are to be done on the loaded value, it is generally","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14092,"byte_end":14183,"line_start":404,"line_end":404,"column_start":5,"column_end":96}},{"value":"/ recommended to call `load` just once and keep the result over calling it multiple times.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14188,"byte_end":14280,"line_start":405,"line_end":405,"column_start":5,"column_end":97}},{"value":"/ First, keeping it is usually faster. But more importantly, the value can change between the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14285,"byte_end":14380,"line_start":406,"line_end":406,"column_start":5,"column_end":100}},{"value":"/ calls to load, returning different objects, which could lead to logical inconsistency.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14385,"byte_end":14475,"line_start":407,"line_end":407,"column_start":5,"column_end":95}},{"value":"/ Keeping the result makes sure the same object is used.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14480,"byte_end":14538,"line_start":408,"line_end":408,"column_start":5,"column_end":63}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14543,"byte_end":14546,"line_start":409,"line_end":409,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14551,"byte_end":14562,"line_start":410,"line_end":410,"column_start":5,"column_end":16}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14567,"byte_end":14595,"line_start":411,"line_end":411,"column_start":5,"column_end":33}},{"value":"/ struct Point {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14600,"byte_end":14618,"line_start":412,"line_end":412,"column_start":5,"column_end":23}},{"value":"/     x: usize,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14623,"byte_end":14640,"line_start":413,"line_end":413,"column_start":5,"column_end":22}},{"value":"/     y: usize,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14645,"byte_end":14662,"line_start":414,"line_end":414,"column_start":5,"column_end":22}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14667,"byte_end":14672,"line_start":415,"line_end":415,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14677,"byte_end":14680,"line_start":416,"line_end":416,"column_start":5,"column_end":8}},{"value":"/ fn print_broken(p: &ArcSwap<Point>) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14685,"byte_end":14726,"line_start":417,"line_end":417,"column_start":5,"column_end":46}},{"value":"/     // This is broken, because the x and y may come from different points,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14731,"byte_end":14809,"line_start":418,"line_end":418,"column_start":5,"column_end":83}},{"value":"/     // combining into an invalid point that never existed.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14814,"byte_end":14876,"line_start":419,"line_end":419,"column_start":5,"column_end":67}},{"value":"/     println!(\"X: {}\", p.load().x);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14881,"byte_end":14919,"line_start":420,"line_end":420,"column_start":5,"column_end":43}},{"value":"/     // If someone changes the content now, between these two loads, we","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":14924,"byte_end":14998,"line_start":421,"line_end":421,"column_start":5,"column_end":79}},{"value":"/     // have a problem","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15003,"byte_end":15028,"line_start":422,"line_end":422,"column_start":5,"column_end":30}},{"value":"/     println!(\"Y: {}\", p.load().y);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15033,"byte_end":15071,"line_start":423,"line_end":423,"column_start":5,"column_end":43}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15076,"byte_end":15081,"line_start":424,"line_end":424,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15086,"byte_end":15089,"line_start":425,"line_end":425,"column_start":5,"column_end":8}},{"value":"/ fn print_correct(p: &ArcSwap<Point>) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15094,"byte_end":15136,"line_start":426,"line_end":426,"column_start":5,"column_end":47}},{"value":"/     // Here we take a snapshot of one specific point so both x and y come","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15141,"byte_end":15218,"line_start":427,"line_end":427,"column_start":5,"column_end":82}},{"value":"/     // from the same one.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15223,"byte_end":15252,"line_start":428,"line_end":428,"column_start":5,"column_end":34}},{"value":"/     let point = p.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15257,"byte_end":15286,"line_start":429,"line_end":429,"column_start":5,"column_end":34}},{"value":"/     println!(\"X: {}\", point.x);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15291,"byte_end":15326,"line_start":430,"line_end":430,"column_start":5,"column_end":40}},{"value":"/     println!(\"Y: {}\", point.y);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15331,"byte_end":15366,"line_start":431,"line_end":431,"column_start":5,"column_end":40}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15371,"byte_end":15376,"line_start":432,"line_end":432,"column_start":5,"column_end":10}},{"value":"/ # let p = ArcSwap::from_pointee(Point { x: 10, y: 20 });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15381,"byte_end":15441,"line_start":433,"line_end":433,"column_start":5,"column_end":65}},{"value":"/ # print_correct(&p);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15446,"byte_end":15470,"line_start":434,"line_end":434,"column_start":5,"column_end":29}},{"value":"/ # print_broken(&p);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15475,"byte_end":15498,"line_start":435,"line_end":435,"column_start":5,"column_end":28}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15503,"byte_end":15510,"line_start":436,"line_end":436,"column_start":5,"column_end":12}},{"value":"inline","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15515,"byte_end":15524,"line_start":437,"line_end":437,"column_start":5,"column_end":14}}]},{"kind":"Method","id":{"krate":0,"index":725},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15829,"byte_end":15834,"line_start":446,"line_end":446,"column_start":12,"column_end":17},"name":"store","qualname":"<ArcSwapAny<T, S>>::store","value":"pub fn store(&Self, T)","parent":null,"children":[],"decl_id":null,"docs":" Replaces the value inside this instance.","sig":null,"attributes":[{"value":"/ Replaces the value inside this instance.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15677,"byte_end":15721,"line_start":443,"line_end":443,"column_start":5,"column_end":49}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15726,"byte_end":15729,"line_start":444,"line_end":444,"column_start":5,"column_end":8}},{"value":"/ Further loads will yield the new value. Uses [`swap`](#method.swap) internally.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15734,"byte_end":15817,"line_start":445,"line_end":445,"column_start":5,"column_end":88}}]},{"kind":"Method","id":{"krate":0,"index":726},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15950,"byte_end":15954,"line_start":451,"line_end":451,"column_start":12,"column_end":16},"name":"swap","qualname":"<ArcSwapAny<T, S>>::swap","value":"pub fn swap(&Self, T) -> T","parent":null,"children":[],"decl_id":null,"docs":" Exchanges the value inside this instance.\n","sig":null,"attributes":[{"value":"/ Exchanges the value inside this instance.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":15893,"byte_end":15938,"line_start":450,"line_end":450,"column_start":5,"column_end":50}}]},{"kind":"Method","id":{"krate":0,"index":727},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17211,"byte_end":17227,"line_start":479,"line_end":479,"column_start":12,"column_end":28},"name":"compare_and_swap","qualname":"<ArcSwapAny<T, S>>::compare_and_swap","value":"pub fn compare_and_swap<C>(&Self, C, T) -> Guard<T, S> where\nC: AsRaw<T::Base>, S: CaS<T>","parent":null,"children":[],"decl_id":null,"docs":" Swaps the stored Arc if it equals to `current`.","sig":null,"attributes":[{"value":"/ Swaps the stored Arc if it equals to `current`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16392,"byte_end":16443,"line_start":464,"line_end":464,"column_start":5,"column_end":56}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16448,"byte_end":16451,"line_start":465,"line_end":465,"column_start":5,"column_end":8}},{"value":"/ If the current value of the `ArcSwapAny` equals to `current`, the `new` is stored inside.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16456,"byte_end":16549,"line_start":466,"line_end":466,"column_start":5,"column_end":98}},{"value":"/ If not, nothing happens.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16554,"byte_end":16582,"line_start":467,"line_end":467,"column_start":5,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16587,"byte_end":16590,"line_start":468,"line_end":468,"column_start":5,"column_end":8}},{"value":"/ The previous value (no matter if the swap happened or not) is returned. Therefore, if the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16595,"byte_end":16688,"line_start":469,"line_end":469,"column_start":5,"column_end":98}},{"value":"/ returned value is equal to `current`, the swap happened. You want to do a pointer-based","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16693,"byte_end":16784,"line_start":470,"line_end":470,"column_start":5,"column_end":96}},{"value":"/ comparison to determine it.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16789,"byte_end":16820,"line_start":471,"line_end":471,"column_start":5,"column_end":36}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16825,"byte_end":16828,"line_start":472,"line_end":472,"column_start":5,"column_end":8}},{"value":"/ In other words, if the caller „guesses“ the value of current correctly, it acts like","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16833,"byte_end":16925,"line_start":473,"line_end":473,"column_start":5,"column_end":93}},{"value":"/ [`swap`](#method.swap), otherwise it acts like [`load_full`](#method.load_full) (including","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":16930,"byte_end":17024,"line_start":474,"line_end":474,"column_start":5,"column_end":99}},{"value":"/ the limitations).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17029,"byte_end":17050,"line_start":475,"line_end":475,"column_start":5,"column_end":26}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17055,"byte_end":17058,"line_start":476,"line_end":476,"column_start":5,"column_end":8}},{"value":"/ The `current` can be specified as `&Arc`, [`Guard`](struct.Guard.html),","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17063,"byte_end":17138,"line_start":477,"line_end":477,"column_start":5,"column_end":80}},{"value":"/ [`&Guards`](struct.Guards.html) or as a raw pointer.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17143,"byte_end":17199,"line_start":478,"line_end":478,"column_start":5,"column_end":61}}]},{"kind":"Method","id":{"krate":0,"index":729},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21443,"byte_end":21446,"line_start":587,"line_end":587,"column_start":12,"column_end":15},"name":"rcu","qualname":"<ArcSwapAny<T, S>>::rcu","value":"pub fn rcu<R, F>(&Self, F) -> T where F: FnMut(&T) -> R, R: Into<T>, S: CaS<T>","parent":null,"children":[],"decl_id":null,"docs":" Read-Copy-Update of the pointer inside.","sig":null,"attributes":[{"value":"/ Read-Copy-Update of the pointer inside.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17473,"byte_end":17516,"line_start":488,"line_end":488,"column_start":5,"column_end":48}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17521,"byte_end":17524,"line_start":489,"line_end":489,"column_start":5,"column_end":8}},{"value":"/ This is useful in read-heavy situations with several threads that sometimes update the data","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17529,"byte_end":17624,"line_start":490,"line_end":490,"column_start":5,"column_end":100}},{"value":"/ pointed to. The readers can just repeatedly use [`load`](#method.load) without any locking.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17629,"byte_end":17724,"line_start":491,"line_end":491,"column_start":5,"column_end":100}},{"value":"/ The writer uses this method to perform the update.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17729,"byte_end":17783,"line_start":492,"line_end":492,"column_start":5,"column_end":59}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17788,"byte_end":17791,"line_start":493,"line_end":493,"column_start":5,"column_end":8}},{"value":"/ In case there's only one thread that does updates or in case the next version is","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17796,"byte_end":17880,"line_start":494,"line_end":494,"column_start":5,"column_end":89}},{"value":"/ independent of the previous one, simple [`swap`](#method.swap) or [`store`](#method.store)","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17885,"byte_end":17979,"line_start":495,"line_end":495,"column_start":5,"column_end":99}},{"value":"/ is enough. Otherwise, it may be needed to retry the update operation if some other thread","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":17984,"byte_end":18077,"line_start":496,"line_end":496,"column_start":5,"column_end":98}},{"value":"/ made an update in between. This is what this method does.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18082,"byte_end":18143,"line_start":497,"line_end":497,"column_start":5,"column_end":66}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18148,"byte_end":18151,"line_start":498,"line_end":498,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18156,"byte_end":18170,"line_start":499,"line_end":499,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18175,"byte_end":18178,"line_start":500,"line_end":500,"column_start":5,"column_end":8}},{"value":"/ This will *not* work as expected, because between loading and storing, some other thread","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18183,"byte_end":18275,"line_start":501,"line_end":501,"column_start":5,"column_end":97}},{"value":"/ might have updated the value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18280,"byte_end":18313,"line_start":502,"line_end":502,"column_start":5,"column_end":38}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18318,"byte_end":18321,"line_start":503,"line_end":503,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18326,"byte_end":18337,"line_start":504,"line_end":504,"column_start":5,"column_end":16}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18342,"byte_end":18367,"line_start":505,"line_end":505,"column_start":5,"column_end":30}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18372,"byte_end":18377,"line_start":506,"line_end":506,"column_start":5,"column_end":10}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18382,"byte_end":18410,"line_start":507,"line_end":507,"column_start":5,"column_end":33}},{"value":"/ # use crossbeam_utils::thread;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18415,"byte_end":18449,"line_start":508,"line_end":508,"column_start":5,"column_end":39}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18454,"byte_end":18459,"line_start":509,"line_end":509,"column_start":5,"column_end":10}},{"value":"/ let cnt = ArcSwap::from_pointee(0);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18464,"byte_end":18503,"line_start":510,"line_end":510,"column_start":5,"column_end":44}},{"value":"/ thread::scope(|scope| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18508,"byte_end":18535,"line_start":511,"line_end":511,"column_start":5,"column_end":32}},{"value":"/     for _ in 0..10 {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18540,"byte_end":18564,"line_start":512,"line_end":512,"column_start":5,"column_end":29}},{"value":"/         scope.spawn(|_| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18569,"byte_end":18598,"line_start":513,"line_end":513,"column_start":5,"column_end":34}},{"value":"/            let inner = cnt.load_full();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18603,"byte_end":18646,"line_start":514,"line_end":514,"column_start":5,"column_end":48}},{"value":"/             // Another thread might have stored some other number than what we have","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18651,"byte_end":18738,"line_start":515,"line_end":515,"column_start":5,"column_end":92}},{"value":"/             // between the load and store.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18743,"byte_end":18789,"line_start":516,"line_end":516,"column_start":5,"column_end":51}},{"value":"/             cnt.store(Arc::new(*inner + 1));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18794,"byte_end":18842,"line_start":517,"line_end":517,"column_start":5,"column_end":53}},{"value":"/         });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18847,"byte_end":18862,"line_start":518,"line_end":518,"column_start":5,"column_end":20}},{"value":"/     }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18867,"byte_end":18876,"line_start":519,"line_end":519,"column_start":5,"column_end":14}},{"value":"/ }).unwrap();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18881,"byte_end":18897,"line_start":520,"line_end":520,"column_start":5,"column_end":21}},{"value":"/ // This will likely fail:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18902,"byte_end":18931,"line_start":521,"line_end":521,"column_start":5,"column_end":34}},{"value":"/ // assert_eq!(10, *cnt.load_full());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18936,"byte_end":18976,"line_start":522,"line_end":522,"column_start":5,"column_end":45}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18981,"byte_end":18988,"line_start":523,"line_end":523,"column_start":5,"column_end":12}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":18993,"byte_end":18996,"line_start":524,"line_end":524,"column_start":5,"column_end":8}},{"value":"/ This will, but it can call the closure multiple times to retry:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19001,"byte_end":19068,"line_start":525,"line_end":525,"column_start":5,"column_end":72}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19073,"byte_end":19076,"line_start":526,"line_end":526,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19081,"byte_end":19092,"line_start":527,"line_end":527,"column_start":5,"column_end":16}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19097,"byte_end":19125,"line_start":528,"line_end":528,"column_start":5,"column_end":33}},{"value":"/ # use crossbeam_utils::thread;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19130,"byte_end":19164,"line_start":529,"line_end":529,"column_start":5,"column_end":39}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19169,"byte_end":19174,"line_start":530,"line_end":530,"column_start":5,"column_end":10}},{"value":"/ let cnt = ArcSwap::from_pointee(0);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19179,"byte_end":19218,"line_start":531,"line_end":531,"column_start":5,"column_end":44}},{"value":"/ thread::scope(|scope| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19223,"byte_end":19250,"line_start":532,"line_end":532,"column_start":5,"column_end":32}},{"value":"/     for _ in 0..10 {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19255,"byte_end":19279,"line_start":533,"line_end":533,"column_start":5,"column_end":29}},{"value":"/         scope.spawn(|_| cnt.rcu(|inner| **inner + 1));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19284,"byte_end":19342,"line_start":534,"line_end":534,"column_start":5,"column_end":63}},{"value":"/     }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19347,"byte_end":19356,"line_start":535,"line_end":535,"column_start":5,"column_end":14}},{"value":"/ }).unwrap();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19361,"byte_end":19377,"line_start":536,"line_end":536,"column_start":5,"column_end":21}},{"value":"/ assert_eq!(10, *cnt.load_full());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19382,"byte_end":19419,"line_start":537,"line_end":537,"column_start":5,"column_end":42}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19424,"byte_end":19431,"line_start":538,"line_end":538,"column_start":5,"column_end":12}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19436,"byte_end":19439,"line_start":539,"line_end":539,"column_start":5,"column_end":8}},{"value":"/ Due to the retries, you might want to perform all the expensive operations *before* the","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19444,"byte_end":19535,"line_start":540,"line_end":540,"column_start":5,"column_end":96}},{"value":"/ rcu. As an example, if there's a cache of some computations as a map, and the map is cheap","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19540,"byte_end":19634,"line_start":541,"line_end":541,"column_start":5,"column_end":99}},{"value":"/ to clone but the computations are not, you could do something like this:","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19639,"byte_end":19715,"line_start":542,"line_end":542,"column_start":5,"column_end":81}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19720,"byte_end":19723,"line_start":543,"line_end":543,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19728,"byte_end":19739,"line_start":544,"line_end":544,"column_start":5,"column_end":16}},{"value":"/ # use std::collections::HashMap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19744,"byte_end":19780,"line_start":545,"line_end":545,"column_start":5,"column_end":41}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19785,"byte_end":19790,"line_start":546,"line_end":546,"column_start":5,"column_end":10}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19795,"byte_end":19823,"line_start":547,"line_end":547,"column_start":5,"column_end":33}},{"value":"/ # use once_cell::sync::Lazy;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19828,"byte_end":19860,"line_start":548,"line_end":548,"column_start":5,"column_end":37}},{"value":"/ #","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19865,"byte_end":19870,"line_start":549,"line_end":549,"column_start":5,"column_end":10}},{"value":"/ fn expensive_computation(x: usize) -> usize {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19875,"byte_end":19924,"line_start":550,"line_end":550,"column_start":5,"column_end":54}},{"value":"/     x * 2 // Let's pretend multiplication is *really expensive expensive*","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":19929,"byte_end":20006,"line_start":551,"line_end":551,"column_start":5,"column_end":82}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20011,"byte_end":20016,"line_start":552,"line_end":552,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20021,"byte_end":20024,"line_start":553,"line_end":553,"column_start":5,"column_end":8}},{"value":"/ type Cache = HashMap<usize, usize>;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20029,"byte_end":20068,"line_start":554,"line_end":554,"column_start":5,"column_end":44}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20073,"byte_end":20076,"line_start":555,"line_end":555,"column_start":5,"column_end":8}},{"value":"/ static CACHE: Lazy<ArcSwap<Cache>> = Lazy::new(|| ArcSwap::default());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20081,"byte_end":20155,"line_start":556,"line_end":556,"column_start":5,"column_end":79}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20160,"byte_end":20163,"line_start":557,"line_end":557,"column_start":5,"column_end":8}},{"value":"/ fn cached_computation(x: usize) -> usize {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20168,"byte_end":20214,"line_start":558,"line_end":558,"column_start":5,"column_end":51}},{"value":"/     let cache = CACHE.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20219,"byte_end":20252,"line_start":559,"line_end":559,"column_start":5,"column_end":38}},{"value":"/     if let Some(result) = cache.get(&x) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20257,"byte_end":20302,"line_start":560,"line_end":560,"column_start":5,"column_end":50}},{"value":"/         return *result;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20307,"byte_end":20334,"line_start":561,"line_end":561,"column_start":5,"column_end":32}},{"value":"/     }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20339,"byte_end":20348,"line_start":562,"line_end":562,"column_start":5,"column_end":14}},{"value":"/     // Not in cache. Compute and store.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20353,"byte_end":20396,"line_start":563,"line_end":563,"column_start":5,"column_end":48}},{"value":"/     // The expensive computation goes outside, so it is not retried.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20401,"byte_end":20473,"line_start":564,"line_end":564,"column_start":5,"column_end":77}},{"value":"/     let result = expensive_computation(x);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20478,"byte_end":20524,"line_start":565,"line_end":565,"column_start":5,"column_end":51}},{"value":"/     CACHE.rcu(|cache| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20529,"byte_end":20556,"line_start":566,"line_end":566,"column_start":5,"column_end":32}},{"value":"/         // The cheaper clone of the cache can be retried if need be.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20561,"byte_end":20633,"line_start":567,"line_end":567,"column_start":5,"column_end":77}},{"value":"/         let mut cache = HashMap::clone(&cache);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20638,"byte_end":20689,"line_start":568,"line_end":568,"column_start":5,"column_end":56}},{"value":"/         cache.insert(x, result);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20694,"byte_end":20730,"line_start":569,"line_end":569,"column_start":5,"column_end":41}},{"value":"/         cache","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20735,"byte_end":20752,"line_start":570,"line_end":570,"column_start":5,"column_end":22}},{"value":"/     });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20757,"byte_end":20768,"line_start":571,"line_end":571,"column_start":5,"column_end":16}},{"value":"/     result","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20773,"byte_end":20787,"line_start":572,"line_end":572,"column_start":5,"column_end":19}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20792,"byte_end":20797,"line_start":573,"line_end":573,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20802,"byte_end":20805,"line_start":574,"line_end":574,"column_start":5,"column_end":8}},{"value":"/ assert_eq!(42, cached_computation(21));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20810,"byte_end":20853,"line_start":575,"line_end":575,"column_start":5,"column_end":48}},{"value":"/ assert_eq!(42, cached_computation(21));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20858,"byte_end":20901,"line_start":576,"line_end":576,"column_start":5,"column_end":48}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20906,"byte_end":20913,"line_start":577,"line_end":577,"column_start":5,"column_end":12}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20918,"byte_end":20921,"line_start":578,"line_end":578,"column_start":5,"column_end":8}},{"value":"/ # The cost of cloning","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20926,"byte_end":20951,"line_start":579,"line_end":579,"column_start":5,"column_end":30}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20956,"byte_end":20959,"line_start":580,"line_end":580,"column_start":5,"column_end":8}},{"value":"/ Depending on the size of cache above, the cloning might not be as cheap. You can however","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":20964,"byte_end":21056,"line_start":581,"line_end":581,"column_start":5,"column_end":97}},{"value":"/ use persistent data structures ‒ each modification creates a new data structure, but it","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21061,"byte_end":21154,"line_start":582,"line_end":582,"column_start":5,"column_end":96}},{"value":"/ shares most of the data with the old one (which is usually accomplished by using `Arc`s","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21159,"byte_end":21250,"line_start":583,"line_end":583,"column_start":5,"column_end":96}},{"value":"/ inside to share the unchanged values). Something like","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21255,"byte_end":21312,"line_start":584,"line_end":584,"column_start":5,"column_end":62}},{"value":"/ [`rpds`](https://crates.io/crates/rpds) or [`im`](https://crates.io/crates/im) might do","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21317,"byte_end":21408,"line_start":585,"line_end":585,"column_start":5,"column_end":96}},{"value":"/ what you need.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21413,"byte_end":21431,"line_start":586,"line_end":586,"column_start":5,"column_end":23}}]},{"kind":"Method","id":{"krate":0,"index":732},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23784,"byte_end":23787,"line_start":656,"line_end":656,"column_start":12,"column_end":15},"name":"map","qualname":"<ArcSwapAny<T, S>>::map","value":"pub fn map<I, R, F>(&Self, F) -> Map<&Self, I, F> where F: Fn(&I) -> &R +\nClone, Self: Access<I>","parent":null,"children":[],"decl_id":null,"docs":" Provides an access to an up to date projection of the carried data.","sig":null,"attributes":[{"value":"/ Provides an access to an up to date projection of the carried data.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21909,"byte_end":21980,"line_start":606,"line_end":606,"column_start":5,"column_end":76}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21985,"byte_end":21988,"line_start":607,"line_end":607,"column_start":5,"column_end":8}},{"value":"/ # Motivation","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":21993,"byte_end":22009,"line_start":608,"line_end":608,"column_start":5,"column_end":21}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22014,"byte_end":22017,"line_start":609,"line_end":609,"column_start":5,"column_end":8}},{"value":"/ Sometimes, an application consists of components. Each component has its own configuration","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22022,"byte_end":22116,"line_start":610,"line_end":610,"column_start":5,"column_end":99}},{"value":"/ structure. The whole configuration contains all the smaller config parts.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22121,"byte_end":22198,"line_start":611,"line_end":611,"column_start":5,"column_end":82}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22203,"byte_end":22206,"line_start":612,"line_end":612,"column_start":5,"column_end":8}},{"value":"/ For the sake of separation and abstraction, it is not desirable to pass the whole","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22211,"byte_end":22296,"line_start":613,"line_end":613,"column_start":5,"column_end":90}},{"value":"/ configuration to each of the components. This allows the component to take only access to","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22301,"byte_end":22394,"line_start":614,"line_end":614,"column_start":5,"column_end":98}},{"value":"/ its own part.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22399,"byte_end":22416,"line_start":615,"line_end":615,"column_start":5,"column_end":22}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22421,"byte_end":22424,"line_start":616,"line_end":616,"column_start":5,"column_end":8}},{"value":"/ # Lifetimes & flexibility","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22429,"byte_end":22458,"line_start":617,"line_end":617,"column_start":5,"column_end":34}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22463,"byte_end":22466,"line_start":618,"line_end":618,"column_start":5,"column_end":8}},{"value":"/ This method is not the most flexible way, as the returned type borrows into the `ArcSwap`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22471,"byte_end":22565,"line_start":619,"line_end":619,"column_start":5,"column_end":99}},{"value":"/ To provide access into eg. `Arc<ArcSwap<T>>`, you can create the [`Map`] type directly. See","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22570,"byte_end":22665,"line_start":620,"line_end":620,"column_start":5,"column_end":100}},{"value":"/ the [`access`] module.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22670,"byte_end":22696,"line_start":621,"line_end":621,"column_start":5,"column_end":31}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22701,"byte_end":22704,"line_start":622,"line_end":622,"column_start":5,"column_end":8}},{"value":"/ # Performance","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22709,"byte_end":22726,"line_start":623,"line_end":623,"column_start":5,"column_end":22}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22731,"byte_end":22734,"line_start":624,"line_end":624,"column_start":5,"column_end":8}},{"value":"/ As the provided function is called on each load from the shared storage, it should","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22739,"byte_end":22825,"line_start":625,"line_end":625,"column_start":5,"column_end":91}},{"value":"/ generally be cheap. It is expected this will usually be just referencing of a field inside","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22830,"byte_end":22924,"line_start":626,"line_end":626,"column_start":5,"column_end":99}},{"value":"/ the structure.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22929,"byte_end":22947,"line_start":627,"line_end":627,"column_start":5,"column_end":23}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22952,"byte_end":22955,"line_start":628,"line_end":628,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22960,"byte_end":22974,"line_start":629,"line_end":629,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22979,"byte_end":22982,"line_start":630,"line_end":630,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":22987,"byte_end":22998,"line_start":631,"line_end":631,"column_start":5,"column_end":16}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23003,"byte_end":23026,"line_start":632,"line_end":632,"column_start":5,"column_end":28}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23031,"byte_end":23034,"line_start":633,"line_end":633,"column_start":5,"column_end":8}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23039,"byte_end":23065,"line_start":634,"line_end":634,"column_start":5,"column_end":31}},{"value":"/ use arc_swap::access::Access;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23070,"byte_end":23103,"line_start":635,"line_end":635,"column_start":5,"column_end":38}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23108,"byte_end":23111,"line_start":636,"line_end":636,"column_start":5,"column_end":8}},{"value":"/ struct Cfg {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23116,"byte_end":23132,"line_start":637,"line_end":637,"column_start":5,"column_end":21}},{"value":"/     value: usize,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23137,"byte_end":23158,"line_start":638,"line_end":638,"column_start":5,"column_end":26}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23163,"byte_end":23168,"line_start":639,"line_end":639,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23173,"byte_end":23176,"line_start":640,"line_end":640,"column_start":5,"column_end":8}},{"value":"/ fn print_many_times<V: Access<usize>>(value: V) {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23181,"byte_end":23234,"line_start":641,"line_end":641,"column_start":5,"column_end":58}},{"value":"/     for _ in 0..25 {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23239,"byte_end":23263,"line_start":642,"line_end":642,"column_start":5,"column_end":29}},{"value":"/         let value = value.load();","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23268,"byte_end":23305,"line_start":643,"line_end":643,"column_start":5,"column_end":42}},{"value":"/         println!(\"{}\", *value);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23310,"byte_end":23345,"line_start":644,"line_end":644,"column_start":5,"column_end":40}},{"value":"/     }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23350,"byte_end":23359,"line_start":645,"line_end":645,"column_start":5,"column_end":14}},{"value":"/ }","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23364,"byte_end":23369,"line_start":646,"line_end":646,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23374,"byte_end":23377,"line_start":647,"line_end":647,"column_start":5,"column_end":8}},{"value":"/ let shared = ArcSwap::from_pointee(Cfg { value: 0 });","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23382,"byte_end":23439,"line_start":648,"line_end":648,"column_start":5,"column_end":62}},{"value":"/ let mapped = shared.map(|c: &Cfg| &c.value);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23444,"byte_end":23492,"line_start":649,"line_end":649,"column_start":5,"column_end":53}},{"value":"/ crossbeam_utils::thread::scope(|s| {","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23497,"byte_end":23537,"line_start":650,"line_end":650,"column_start":5,"column_end":45}},{"value":"/     // Will print some zeroes and some twos","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23542,"byte_end":23589,"line_start":651,"line_end":651,"column_start":5,"column_end":52}},{"value":"/     s.spawn(|_| print_many_times(mapped));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23594,"byte_end":23640,"line_start":652,"line_end":652,"column_start":5,"column_end":51}},{"value":"/     s.spawn(|_| shared.store(Arc::new(Cfg { value: 2 })));","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23645,"byte_end":23707,"line_start":653,"line_end":653,"column_start":5,"column_end":67}},{"value":"/ }).expect(\"Something panicked in a thread\");","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23712,"byte_end":23760,"line_start":654,"line_end":654,"column_start":5,"column_end":53}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23765,"byte_end":23772,"line_start":655,"line_end":655,"column_start":5,"column_end":12}}]},{"kind":"Type","id":{"krate":0,"index":736},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24097,"byte_end":24104,"line_start":669,"line_end":669,"column_start":10,"column_end":17},"name":"ArcSwap","qualname":"::ArcSwap","value":"ArcSwapAny<Arc<T>>","parent":null,"children":[],"decl_id":null,"docs":" An atomic storage for `Arc`.","sig":null,"attributes":[{"value":"/ An atomic storage for `Arc`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23939,"byte_end":23971,"line_start":665,"line_end":665,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23972,"byte_end":23975,"line_start":666,"line_end":666,"column_start":1,"column_end":4}},{"value":"/ This is a type alias only. Most of its methods are described on","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":23976,"byte_end":24043,"line_start":667,"line_end":667,"column_start":1,"column_end":68}},{"value":"/ [`ArcSwapAny`](struct.ArcSwapAny.html).","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24044,"byte_end":24087,"line_start":668,"line_end":668,"column_start":1,"column_end":44}}]},{"kind":"Method","id":{"krate":0,"index":741},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24334,"byte_end":24346,"line_start":675,"line_end":675,"column_start":12,"column_end":24},"name":"from_pointee","qualname":"<ArcSwapAny<Arc<T>, S>>::from_pointee","value":"pub fn from_pointee(T) -> Self where S: Default","parent":null,"children":[],"decl_id":null,"docs":" A convenience constructor directly from the pointed-to value.","sig":null,"attributes":[{"value":"/ A convenience constructor directly from the pointed-to value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24188,"byte_end":24253,"line_start":672,"line_end":672,"column_start":5,"column_end":70}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24258,"byte_end":24261,"line_start":673,"line_end":673,"column_start":5,"column_end":8}},{"value":"/ Direct equivalent for `ArcSwap::new(Arc::new(val))`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24266,"byte_end":24322,"line_start":674,"line_end":674,"column_start":5,"column_end":61}}]},{"kind":"Type","id":{"krate":0,"index":742},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25168,"byte_end":25181,"line_start":703,"line_end":703,"column_start":10,"column_end":23},"name":"ArcSwapOption","qualname":"::ArcSwapOption","value":"ArcSwapAny<Option<Arc<T>>>","parent":null,"children":[],"decl_id":null,"docs":" An atomic storage for `Option<Arc>`.","sig":null,"attributes":[{"value":"/ An atomic storage for `Option<Arc>`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24442,"byte_end":24482,"line_start":683,"line_end":683,"column_start":1,"column_end":41}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24483,"byte_end":24486,"line_start":684,"line_end":684,"column_start":1,"column_end":4}},{"value":"/ This is very similar to [`ArcSwap`](type.ArcSwap.html), but allows storing NULL values, which","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24487,"byte_end":24584,"line_start":685,"line_end":685,"column_start":1,"column_end":98}},{"value":"/ is useful in some situations.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24585,"byte_end":24618,"line_start":686,"line_end":686,"column_start":1,"column_end":34}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24619,"byte_end":24622,"line_start":687,"line_end":687,"column_start":1,"column_end":4}},{"value":"/ This is a type alias only. Most of the methods are described on","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24623,"byte_end":24690,"line_start":688,"line_end":688,"column_start":1,"column_end":68}},{"value":"/ [`ArcSwapAny`](struct.ArcSwapAny.html). Even though the examples there often use `ArcSwap`,","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24691,"byte_end":24786,"line_start":689,"line_end":689,"column_start":1,"column_end":96}},{"value":"/ they are applicable to `ArcSwapOption` with appropriate changes.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24787,"byte_end":24855,"line_start":690,"line_end":690,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24856,"byte_end":24859,"line_start":691,"line_end":691,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24860,"byte_end":24874,"line_start":692,"line_end":692,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24875,"byte_end":24878,"line_start":693,"line_end":693,"column_start":1,"column_end":4}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24879,"byte_end":24886,"line_start":694,"line_end":694,"column_start":1,"column_end":8}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24887,"byte_end":24910,"line_start":695,"line_end":695,"column_start":1,"column_end":24}},{"value":"/ use arc_swap::ArcSwapOption;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24911,"byte_end":24943,"line_start":696,"line_end":696,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24944,"byte_end":24947,"line_start":697,"line_end":697,"column_start":1,"column_end":4}},{"value":"/ let shared = ArcSwapOption::from(None);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24948,"byte_end":24991,"line_start":698,"line_end":698,"column_start":1,"column_end":44}},{"value":"/ assert!(shared.load_full().is_none());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24992,"byte_end":25034,"line_start":699,"line_end":699,"column_start":1,"column_end":43}},{"value":"/ assert!(shared.swap(Some(Arc::new(42))).is_none());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25035,"byte_end":25090,"line_start":700,"line_end":700,"column_start":1,"column_end":56}},{"value":"/ assert_eq!(42, **shared.load_full().as_ref().unwrap());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25091,"byte_end":25150,"line_start":701,"line_end":701,"column_start":1,"column_end":60}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25151,"byte_end":25158,"line_start":702,"line_end":702,"column_start":1,"column_end":8}}]},{"kind":"Method","id":{"krate":0,"index":747},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25793,"byte_end":25805,"line_start":720,"line_end":720,"column_start":12,"column_end":24},"name":"from_pointee","qualname":"<ArcSwapAny<Option<Arc<T>>, S>>::from_pointee","value":"pub fn from_pointee<V: Into<Option<T>>>(V) -> Self where S: Default","parent":null,"children":[],"decl_id":null,"docs":" A convenience constructor directly from a pointed-to value.","sig":null,"attributes":[{"value":"/ A convenience constructor directly from a pointed-to value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25289,"byte_end":25352,"line_start":706,"line_end":706,"column_start":5,"column_end":68}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25357,"byte_end":25360,"line_start":707,"line_end":707,"column_start":5,"column_end":8}},{"value":"/ This just allocates the `Arc` under the hood.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25365,"byte_end":25414,"line_start":708,"line_end":708,"column_start":5,"column_end":54}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25419,"byte_end":25422,"line_start":709,"line_end":709,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25427,"byte_end":25441,"line_start":710,"line_end":710,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25446,"byte_end":25449,"line_start":711,"line_end":711,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25454,"byte_end":25465,"line_start":712,"line_end":712,"column_start":5,"column_end":16}},{"value":"/ use arc_swap::ArcSwapOption;","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25470,"byte_end":25502,"line_start":713,"line_end":713,"column_start":5,"column_end":37}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25507,"byte_end":25510,"line_start":714,"line_end":714,"column_start":5,"column_end":8}},{"value":"/ let empty: ArcSwapOption<usize> = ArcSwapOption::from_pointee(None);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25515,"byte_end":25587,"line_start":715,"line_end":715,"column_start":5,"column_end":77}},{"value":"/ assert!(empty.load().is_none());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25592,"byte_end":25628,"line_start":716,"line_end":716,"column_start":5,"column_end":41}},{"value":"/ let non_empty: ArcSwapOption<usize> = ArcSwapOption::from_pointee(42);","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25633,"byte_end":25707,"line_start":717,"line_end":717,"column_start":5,"column_end":79}},{"value":"/ assert_eq!(42, **non_empty.load().as_ref().unwrap());","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25712,"byte_end":25769,"line_start":718,"line_end":718,"column_start":5,"column_end":62}},{"value":"/ ```","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25774,"byte_end":25781,"line_start":719,"line_end":719,"column_start":5,"column_end":12}}]},{"kind":"Method","id":{"krate":0,"index":749},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":26060,"byte_end":26065,"line_start":730,"line_end":730,"column_start":12,"column_end":17},"name":"empty","qualname":"<ArcSwapAny<Option<Arc<T>>, S>>::empty","value":"pub fn empty() -> Self where S: Default","parent":null,"children":[],"decl_id":null,"docs":" A convenience constructor for an empty value.","sig":null,"attributes":[{"value":"/ A convenience constructor for an empty value.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25933,"byte_end":25982,"line_start":727,"line_end":727,"column_start":5,"column_end":54}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25987,"byte_end":25990,"line_start":728,"line_end":728,"column_start":5,"column_end":8}},{"value":"/ This is equivalent to `ArcSwapOption::new(None)`.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25995,"byte_end":26048,"line_start":729,"line_end":729,"column_start":5,"column_end":58}}]},{"kind":"Type","id":{"krate":0,"index":750},"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":26596,"byte_end":26614,"line_start":746,"line_end":746,"column_start":10,"column_end":28},"name":"IndependentArcSwap","qualname":"::IndependentArcSwap","value":"ArcSwapAny<Arc<T>, IndependentStrategy>","parent":null,"children":[],"decl_id":null,"docs":" An atomic storage that doesn't share the internal generation locks with others.","sig":null,"attributes":[{"value":"/ An atomic storage that doesn't share the internal generation locks with others.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":26145,"byte_end":26228,"line_start":738,"line_end":738,"column_start":1,"column_end":84}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":26229,"byte_end":26232,"line_start":739,"line_end":739,"column_start":1,"column_end":4}},{"value":"/ This makes it bigger and it also might suffer contention (on the HW level) if used from many","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":26233,"byte_end":26329,"line_start":740,"line_end":740,"column_start":1,"column_end":97}},{"value":"/ threads at once. On the other hand, it can't block writes in other instances.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":26330,"byte_end":26411,"line_start":741,"line_end":741,"column_start":1,"column_end":82}},{"value":"/","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":26412,"byte_end":26415,"line_start":742,"line_end":742,"column_start":1,"column_end":4}},{"value":"/ See the [`IndependentStrategy`] for further details.","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":26416,"byte_end":26472,"line_start":743,"line_end":743,"column_start":1,"column_end":57}}]}],"impls":[{"id":0,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52349,"byte_end":52350,"line_start":112,"line_end":112,"column_start":59,"column_end":60},"value":"","parent":null,"children":[{"krate":0,"index":37},{"krate":0,"index":38}],"docs":"","sig":null,"attributes":[]},{"id":1,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52499,"byte_end":52509,"line_start":119,"line_end":119,"column_start":47,"column_end":57},"value":"","parent":null,"children":[{"krate":0,"index":42},{"krate":0,"index":43}],"docs":"","sig":null,"attributes":[]},{"id":2,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52750,"byte_end":52761,"line_start":131,"line_end":131,"column_start":40,"column_end":51},"value":"","parent":null,"children":[{"krate":0,"index":47},{"krate":0,"index":48}],"docs":"","sig":null,"attributes":[]},{"id":3,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52907,"byte_end":52917,"line_start":138,"line_end":138,"column_start":44,"column_end":54},"value":"","parent":null,"children":[{"krate":0,"index":52},{"krate":0,"index":53}],"docs":"","sig":null,"attributes":[]},{"id":4,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53088,"byte_end":53099,"line_start":145,"line_end":145,"column_start":39,"column_end":50},"value":"","parent":null,"children":[{"krate":0,"index":57},{"krate":0,"index":58}],"docs":"","sig":null,"attributes":[]},{"id":5,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53243,"byte_end":53253,"line_start":152,"line_end":152,"column_start":43,"column_end":53},"value":"","parent":null,"children":[{"krate":0,"index":62},{"krate":0,"index":63}],"docs":"","sig":null,"attributes":[]},{"id":6,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53486,"byte_end":53494,"line_start":162,"line_end":162,"column_start":27,"column_end":35},"value":"","parent":null,"children":[{"krate":0,"index":70},{"krate":0,"index":71}],"docs":"","sig":null,"attributes":[]},{"id":7,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54464,"byte_end":54465,"line_start":198,"line_end":198,"column_start":29,"column_end":30},"value":"","parent":null,"children":[{"krate":0,"index":78}],"docs":"","sig":null,"attributes":[]},{"id":8,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54784,"byte_end":54792,"line_start":216,"line_end":216,"column_start":28,"column_end":36},"value":"","parent":null,"children":[{"krate":0,"index":84},{"krate":0,"index":85}],"docs":"","sig":null,"attributes":[]},{"id":9,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55274,"byte_end":55277,"line_start":238,"line_end":238,"column_start":15,"column_end":18},"value":"","parent":null,"children":[{"krate":0,"index":90}],"docs":"","sig":null,"attributes":[]},{"id":10,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56143,"byte_end":56146,"line_start":262,"line_end":262,"column_start":32,"column_end":35},"value":"","parent":null,"children":[{"krate":0,"index":97},{"krate":0,"index":98}],"docs":"","sig":null,"attributes":[]},{"id":11,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56602,"byte_end":56615,"line_start":282,"line_end":282,"column_start":19,"column_end":32},"value":"","parent":null,"children":[{"krate":0,"index":101},{"krate":0,"index":102}],"docs":"","sig":null,"attributes":[]},{"id":12,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":57211,"byte_end":57219,"line_start":300,"line_end":300,"column_start":30,"column_end":38},"value":"","parent":null,"children":[{"krate":0,"index":105},{"krate":0,"index":106}],"docs":"","sig":null,"attributes":[]},{"id":13,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61540,"byte_end":61545,"line_start":50,"line_end":50,"column_start":32,"column_end":37},"value":"","parent":null,"children":[],"docs":"","sig":null,"attributes":[]},{"id":14,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61591,"byte_end":61596,"line_start":51,"line_end":51,"column_start":40,"column_end":45},"value":"","parent":null,"children":[{"krate":0,"index":143}],"docs":"","sig":null,"attributes":[]},{"id":15,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64537,"byte_end":64542,"line_start":79,"line_end":79,"column_start":15,"column_end":20},"value":"","parent":null,"children":[{"krate":0,"index":177},{"krate":0,"index":178},{"krate":0,"index":179},{"krate":0,"index":180},{"krate":0,"index":181},{"krate":0,"index":182}],"docs":"","sig":null,"attributes":[]},{"id":16,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68632,"byte_end":68637,"line_start":193,"line_end":193,"column_start":37,"column_end":42},"value":"","parent":null,"children":[{"krate":0,"index":189}],"docs":"","sig":null,"attributes":[]},{"id":17,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68868,"byte_end":68873,"line_start":204,"line_end":204,"column_start":27,"column_end":32},"value":"","parent":null,"children":[{"krate":0,"index":194}],"docs":"","sig":null,"attributes":[]},{"id":18,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":69397,"byte_end":69405,"line_start":225,"line_end":225,"column_start":35,"column_end":43},"value":"","parent":null,"children":[{"krate":0,"index":201}],"docs":"","sig":null,"attributes":[]},{"id":19,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/fast.rs","byte_start":80411,"byte_end":80416,"line_start":38,"line_end":38,"column_start":6,"column_end":11},"value":"","parent":null,"children":[{"krate":0,"index":231}],"docs":"","sig":null,"attributes":[]},{"id":20,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/helping.rs","byte_start":91050,"byte_end":91055,"line_start":169,"line_end":169,"column_start":18,"column_end":23},"value":"","parent":null,"children":[{"krate":0,"index":269}],"docs":"","sig":null,"attributes":[]},{"id":21,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/helping.rs","byte_start":91649,"byte_end":91654,"line_start":186,"line_end":186,"column_start":6,"column_end":11},"value":"","parent":null,"children":[{"krate":0,"index":271},{"krate":0,"index":272},{"krate":0,"index":273},{"krate":0,"index":276},{"krate":0,"index":277}],"docs":"","sig":null,"attributes":[]},{"id":22,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":101626,"byte_end":101641,"line_start":49,"line_end":49,"column_start":15,"column_end":30},"value":"","parent":null,"children":[{"krate":0,"index":325}],"docs":"","sig":null,"attributes":[]},{"id":23,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":101978,"byte_end":101982,"line_start":65,"line_end":65,"column_start":18,"column_end":22},"value":"","parent":null,"children":[{"krate":0,"index":333}],"docs":"","sig":null,"attributes":[]},{"id":24,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":102259,"byte_end":102263,"line_start":77,"line_end":77,"column_start":6,"column_end":10},"value":"","parent":null,"children":[{"krate":0,"index":335},{"krate":0,"index":338},{"krate":0,"index":339},{"krate":0,"index":340},{"krate":0,"index":341},{"krate":0,"index":344},{"krate":0,"index":345}],"docs":"","sig":null,"attributes":[]},{"id":25,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":107196,"byte_end":107205,"line_start":205,"line_end":205,"column_start":6,"column_end":15},"value":"","parent":null,"children":[{"krate":0,"index":351},{"krate":0,"index":356},{"krate":0,"index":357},{"krate":0,"index":358},{"krate":0,"index":361}],"docs":"","sig":null,"attributes":[]},{"id":26,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":110870,"byte_end":110879,"line_start":296,"line_end":296,"column_start":15,"column_end":24},"value":"","parent":null,"children":[{"krate":0,"index":365}],"docs":"","sig":null,"attributes":[]},{"id":27,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/mod.rs","byte_start":74859,"byte_end":74863,"line_start":33,"line_end":33,"column_start":6,"column_end":10},"value":"","parent":null,"children":[{"krate":0,"index":367}],"docs":"","sig":null,"attributes":[]},{"id":28,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/mod.rs","byte_start":75254,"byte_end":75258,"line_start":42,"line_end":42,"column_start":18,"column_end":22},"value":"","parent":null,"children":[{"krate":0,"index":369}],"docs":"","sig":null,"attributes":[]},{"id":29,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/mod.rs","byte_start":75345,"byte_end":75349,"line_start":48,"line_end":48,"column_start":6,"column_end":10},"value":"","parent":null,"children":[{"krate":0,"index":371},{"krate":0,"index":373}],"docs":"","sig":null,"attributes":[]},{"id":30,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139217,"byte_end":139220,"line_start":89,"line_end":89,"column_start":27,"column_end":30},"value":"","parent":null,"children":[{"krate":0,"index":402},{"krate":0,"index":403},{"krate":0,"index":404},{"krate":0,"index":405}],"docs":"","sig":null,"attributes":[]},{"id":31,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139523,"byte_end":139525,"line_start":102,"line_end":102,"column_start":27,"column_end":29},"value":"","parent":null,"children":[{"krate":0,"index":408},{"krate":0,"index":409},{"krate":0,"index":410},{"krate":0,"index":411}],"docs":"","sig":null,"attributes":[]},{"id":32,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139831,"byte_end":139837,"line_start":115,"line_end":115,"column_start":35,"column_end":41},"value":"","parent":null,"children":[{"krate":0,"index":414},{"krate":0,"index":415},{"krate":0,"index":416},{"krate":0,"index":417}],"docs":"","sig":null,"attributes":[]},{"id":33,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":148902,"byte_end":148918,"line_start":32,"line_end":32,"column_start":17,"column_end":33},"value":"","parent":null,"children":[{"krate":0,"index":475},{"krate":0,"index":476},{"krate":0,"index":477},{"krate":0,"index":478}],"docs":"","sig":null,"attributes":[]},{"id":34,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":151878,"byte_end":151894,"line_start":99,"line_end":99,"column_start":26,"column_end":42},"value":"","parent":null,"children":[{"krate":0,"index":481}],"docs":"","sig":null,"attributes":[]},{"id":35,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":152740,"byte_end":152756,"line_start":122,"line_end":122,"column_start":34,"column_end":50},"value":"","parent":null,"children":[{"krate":0,"index":484},{"krate":0,"index":485}],"docs":"","sig":null,"attributes":[]},{"id":36,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":153740,"byte_end":153756,"line_start":153,"line_end":153,"column_start":31,"column_end":47},"value":"","parent":null,"children":[{"krate":0,"index":488}],"docs":"","sig":null,"attributes":[]},{"id":37,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":154004,"byte_end":154017,"line_start":168,"line_end":168,"column_start":17,"column_end":30},"value":"","parent":null,"children":[{"krate":0,"index":492}],"docs":"","sig":null,"attributes":[]},{"id":38,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":154170,"byte_end":154184,"line_start":177,"line_end":177,"column_start":35,"column_end":49},"value":"","parent":null,"children":[{"krate":0,"index":496},{"krate":0,"index":497},{"krate":0,"index":500}],"docs":"","sig":null,"attributes":[]},{"id":39,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":155236,"byte_end":155250,"line_start":203,"line_end":203,"column_start":41,"column_end":55},"value":"","parent":null,"children":[{"krate":0,"index":505}],"docs":"","sig":null,"attributes":[]},{"id":40,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/rw_lock.rs","byte_start":156591,"byte_end":156592,"line_start":8,"line_end":8,"column_start":34,"column_end":35},"value":"","parent":null,"children":[{"krate":0,"index":536},{"krate":0,"index":537}],"docs":"","sig":null,"attributes":[]},{"id":41,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/rw_lock.rs","byte_start":156768,"byte_end":156774,"line_start":20,"line_end":20,"column_start":38,"column_end":44},"value":"","parent":null,"children":[{"krate":0,"index":540},{"krate":0,"index":541},{"krate":0,"index":542}],"docs":"","sig":null,"attributes":[]},{"id":42,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/rw_lock.rs","byte_start":157358,"byte_end":157364,"line_start":37,"line_end":37,"column_start":28,"column_end":34},"value":"","parent":null,"children":[{"krate":0,"index":545}],"docs":"","sig":null,"attributes":[]},{"id":43,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147290,"byte_end":147291,"line_start":151,"line_end":151,"column_start":62,"column_end":63},"value":"","parent":null,"children":[],"docs":"","sig":null,"attributes":[]},{"id":44,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147700,"byte_end":147701,"line_start":160,"line_end":160,"column_start":47,"column_end":48},"value":"","parent":null,"children":[],"docs":"","sig":null,"attributes":[]},{"id":45,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6249,"byte_end":6254,"line_start":163,"line_end":163,"column_start":37,"column_end":42},"value":"","parent":null,"children":[{"krate":0,"index":663},{"krate":0,"index":664}],"docs":"","sig":null,"attributes":[]},{"id":46,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7353,"byte_end":7358,"line_start":198,"line_end":198,"column_start":47,"column_end":52},"value":"","parent":null,"children":[{"krate":0,"index":669},{"krate":0,"index":670}],"docs":"","sig":null,"attributes":[]},{"id":47,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7511,"byte_end":7516,"line_start":206,"line_end":206,"column_start":45,"column_end":50},"value":"","parent":null,"children":[{"krate":0,"index":674}],"docs":"","sig":null,"attributes":[]},{"id":48,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7652,"byte_end":7657,"line_start":212,"line_end":212,"column_start":55,"column_end":60},"value":"","parent":null,"children":[{"krate":0,"index":678}],"docs":"","sig":null,"attributes":[]},{"id":49,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7785,"byte_end":7790,"line_start":218,"line_end":218,"column_start":51,"column_end":56},"value":"","parent":null,"children":[{"krate":0,"index":682}],"docs":"","sig":null,"attributes":[]},{"id":50,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7958,"byte_end":7963,"line_start":224,"line_end":224,"column_start":55,"column_end":60},"value":"","parent":null,"children":[{"krate":0,"index":686}],"docs":"","sig":null,"attributes":[]},{"id":51,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10940,"byte_end":10950,"line_start":305,"line_end":305,"column_start":55,"column_end":65},"value":"","parent":null,"children":[{"krate":0,"index":700}],"docs":"","sig":null,"attributes":[]},{"id":52,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":11086,"byte_end":11096,"line_start":311,"line_end":311,"column_start":42,"column_end":52},"value":"","parent":null,"children":[{"krate":0,"index":704}],"docs":"","sig":null,"attributes":[]},{"id":53,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":11427,"byte_end":11437,"line_start":323,"line_end":323,"column_start":35,"column_end":45},"value":"","parent":null,"children":[{"krate":0,"index":708}],"docs":"","sig":null,"attributes":[]},{"id":54,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":11692,"byte_end":11702,"line_start":335,"line_end":335,"column_start":37,"column_end":47},"value":"","parent":null,"children":[{"krate":0,"index":712}],"docs":"","sig":null,"attributes":[]},{"id":55,"kind":"Direct","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":11910,"byte_end":11920,"line_start":344,"line_end":344,"column_start":65,"column_end":75},"value":"","parent":null,"children":[{"krate":0,"index":716}],"docs":"","sig":null,"attributes":[]},{"id":56,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12029,"byte_end":12039,"line_start":350,"line_end":350,"column_start":33,"column_end":43},"value":"","parent":null,"children":[{"krate":0,"index":720},{"krate":0,"index":721},{"krate":0,"index":722},{"krate":0,"index":723},{"krate":0,"index":724},{"krate":0,"index":725},{"krate":0,"index":726},{"krate":0,"index":727},{"krate":0,"index":729},{"krate":0,"index":732}],"docs":"","sig":null,"attributes":[]},{"id":57,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24160,"byte_end":24170,"line_start":671,"line_end":671,"column_start":30,"column_end":40},"value":"","parent":null,"children":[{"krate":0,"index":741}],"docs":"","sig":null,"attributes":[]},{"id":58,"kind":"Inherent","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25253,"byte_end":25263,"line_start":705,"line_end":705,"column_start":38,"column_end":48},"value":"","parent":null,"children":[{"krate":0,"index":747},{"krate":0,"index":749}],"docs":"","sig":null,"attributes":[]}],"refs":[{"kind":"Mod","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5176,"byte_end":5182,"line_start":126,"line_end":126,"column_start":9,"column_end":15},"ref_id":{"krate":0,"index":3}},{"kind":"Mod","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5204,"byte_end":5209,"line_start":128,"line_end":128,"column_start":9,"column_end":14},"ref_id":{"krate":0,"index":154}},{"kind":"Mod","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5253,"byte_end":5257,"line_start":131,"line_end":131,"column_start":9,"column_end":13},"ref_id":{"krate":0,"index":378}},{"kind":"Mod","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113395,"byte_end":113403,"line_start":38,"line_end":38,"column_start":9,"column_end":17},"ref_id":{"krate":0,"index":379}},{"kind":"Mod","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113413,"byte_end":113424,"line_start":39,"line_end":39,"column_start":9,"column_end":20},"ref_id":{"krate":0,"index":380}},{"kind":"Mod","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113434,"byte_end":113442,"line_start":40,"line_end":40,"column_start":9,"column_end":17},"ref_id":{"krate":0,"index":381}},{"kind":"Mod","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/docs/mod.rs","byte_start":113452,"byte_end":113463,"line_start":41,"line_end":41,"column_start":9,"column_end":20},"ref_id":{"krate":0,"index":382}},{"kind":"Mod","span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":5280,"byte_end":5288,"line_start":133,"line_end":133,"column_start":9,"column_end":17},"ref_id":{"krate":0,"index":418}}],"macro_refs":[],"relations":[{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52349,"byte_end":52350,"line_start":112,"line_end":112,"column_start":59,"column_end":60},"kind":{"Impl":{"id":0}},"from":{"krate":0,"index":36},"to":{"krate":0,"index":29}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52499,"byte_end":52509,"line_start":119,"line_end":119,"column_start":47,"column_end":57},"kind":{"Impl":{"id":1}},"from":{"krate":0,"index":691},"to":{"krate":0,"index":29}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52750,"byte_end":52761,"line_start":131,"line_end":131,"column_start":40,"column_end":51},"kind":{"Impl":{"id":2}},"from":{"krate":0,"index":753},"to":{"krate":2,"index":3026}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":52907,"byte_end":52917,"line_start":138,"line_end":138,"column_start":44,"column_end":54},"kind":{"Impl":{"id":3}},"from":{"krate":0,"index":691},"to":{"krate":0,"index":29}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53088,"byte_end":53099,"line_start":145,"line_end":145,"column_start":39,"column_end":50},"kind":{"Impl":{"id":4}},"from":{"krate":0,"index":753},"to":{"krate":2,"index":3026}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53243,"byte_end":53253,"line_start":152,"line_end":152,"column_start":43,"column_end":53},"kind":{"Impl":{"id":5}},"from":{"krate":0,"index":691},"to":{"krate":0,"index":29}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":53486,"byte_end":53494,"line_start":162,"line_end":162,"column_start":27,"column_end":35},"kind":{"Impl":{"id":6}},"from":{"krate":0,"index":64},"to":{"krate":2,"index":3026}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54464,"byte_end":54465,"line_start":198,"line_end":198,"column_start":29,"column_end":30},"kind":{"Impl":{"id":7}},"from":{"krate":0,"index":77},"to":{"krate":0,"index":72}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":54784,"byte_end":54792,"line_start":216,"line_end":216,"column_start":28,"column_end":36},"kind":{"Impl":{"id":8}},"from":{"krate":0,"index":762},"to":{"krate":2,"index":3026}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":55274,"byte_end":55277,"line_start":238,"line_end":238,"column_start":15,"column_end":18},"kind":{"Impl":{"id":9}},"from":{"krate":0,"index":787},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56143,"byte_end":56146,"line_start":262,"line_end":262,"column_start":32,"column_end":35},"kind":{"Impl":{"id":10}},"from":{"krate":0,"index":787},"to":{"krate":0,"index":29}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":56602,"byte_end":56615,"line_start":282,"line_end":282,"column_start":19,"column_end":32},"kind":{"Impl":{"id":11}},"from":{"krate":0,"index":808},"to":{"krate":2,"index":3026}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/access.rs","byte_start":57211,"byte_end":57219,"line_start":300,"line_end":300,"column_start":30,"column_end":38},"kind":{"Impl":{"id":12}},"from":{"krate":0,"index":841},"to":{"krate":0,"index":29}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61085,"byte_end":61091,"line_start":31,"line_end":31,"column_start":21,"column_end":27},"kind":"SuperTrait","from":{"krate":0,"index":116},"to":{"krate":0,"index":120}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61540,"byte_end":61545,"line_start":50,"line_end":50,"column_start":32,"column_end":37},"kind":{"Impl":{"id":13}},"from":{"krate":0,"index":655},"to":{"krate":0,"index":116}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/as_raw.rs","byte_start":61591,"byte_end":61596,"line_start":51,"line_end":51,"column_start":40,"column_end":45},"kind":{"Impl":{"id":14}},"from":{"krate":0,"index":655},"to":{"krate":0,"index":120}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":64537,"byte_end":64542,"line_start":79,"line_end":79,"column_start":15,"column_end":20},"kind":{"Impl":{"id":15}},"from":{"krate":0,"index":874},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68632,"byte_end":68637,"line_start":193,"line_end":193,"column_start":37,"column_end":42},"kind":{"Impl":{"id":16}},"from":{"krate":0,"index":874},"to":{"krate":0,"index":170}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":68868,"byte_end":68873,"line_start":204,"line_end":204,"column_start":27,"column_end":32},"kind":{"Impl":{"id":17}},"from":{"krate":0,"index":874},"to":{"krate":2,"index":2728}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/cache.rs","byte_start":69397,"byte_end":69405,"line_start":225,"line_end":225,"column_start":35,"column_end":43},"kind":{"Impl":{"id":18}},"from":{"krate":0,"index":887},"to":{"krate":0,"index":170}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/fast.rs","byte_start":80411,"byte_end":80416,"line_start":38,"line_end":38,"column_start":6,"column_end":11},"kind":{"Impl":{"id":19}},"from":{"krate":0,"index":907},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/helping.rs","byte_start":91050,"byte_end":91055,"line_start":169,"line_end":169,"column_start":18,"column_end":23},"kind":{"Impl":{"id":20}},"from":{"krate":0,"index":262},"to":{"krate":2,"index":2800}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/helping.rs","byte_start":91649,"byte_end":91654,"line_start":186,"line_end":186,"column_start":6,"column_end":11},"kind":{"Impl":{"id":21}},"from":{"krate":0,"index":262},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":101626,"byte_end":101641,"line_start":49,"line_end":49,"column_start":15,"column_end":30},"kind":{"Impl":{"id":22}},"from":{"krate":0,"index":320},"to":{"krate":2,"index":3050}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":101978,"byte_end":101982,"line_start":65,"line_end":65,"column_start":18,"column_end":22},"kind":{"Impl":{"id":23}},"from":{"krate":0,"index":326},"to":{"krate":2,"index":2800}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":102259,"byte_end":102263,"line_start":77,"line_end":77,"column_start":6,"column_end":10},"kind":{"Impl":{"id":24}},"from":{"krate":0,"index":326},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":107196,"byte_end":107205,"line_start":205,"line_end":205,"column_start":6,"column_end":15},"kind":{"Impl":{"id":25}},"from":{"krate":0,"index":346},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/list.rs","byte_start":110870,"byte_end":110879,"line_start":296,"line_end":296,"column_start":15,"column_end":24},"kind":{"Impl":{"id":26}},"from":{"krate":0,"index":346},"to":{"krate":2,"index":3050}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/mod.rs","byte_start":74859,"byte_end":74863,"line_start":33,"line_end":33,"column_start":6,"column_end":10},"kind":{"Impl":{"id":27}},"from":{"krate":0,"index":926},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/mod.rs","byte_start":75254,"byte_end":75258,"line_start":42,"line_end":42,"column_start":18,"column_end":22},"kind":{"Impl":{"id":28}},"from":{"krate":0,"index":926},"to":{"krate":2,"index":2800}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/debt/mod.rs","byte_start":75345,"byte_end":75349,"line_start":48,"line_end":48,"column_start":6,"column_end":10},"kind":{"Impl":{"id":29}},"from":{"krate":0,"index":926},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":137125,"byte_end":137130,"line_start":37,"line_end":37,"column_start":26,"column_end":31},"kind":"SuperTrait","from":{"krate":2,"index":2447},"to":{"krate":0,"index":393}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139217,"byte_end":139220,"line_start":89,"line_end":89,"column_start":27,"column_end":30},"kind":{"Impl":{"id":30}},"from":{"krate":5,"index":5619},"to":{"krate":0,"index":393}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139523,"byte_end":139525,"line_start":102,"line_end":102,"column_start":27,"column_end":29},"kind":{"Impl":{"id":31}},"from":{"krate":5,"index":4347},"to":{"krate":0,"index":393}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/ref_cnt.rs","byte_start":139831,"byte_end":139837,"line_start":115,"line_end":115,"column_start":35,"column_end":41},"kind":{"Impl":{"id":32}},"from":{"krate":2,"index":37335},"to":{"krate":0,"index":393}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":148902,"byte_end":148918,"line_start":32,"line_end":32,"column_start":17,"column_end":33},"kind":{"Impl":{"id":33}},"from":{"krate":0,"index":469},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":151878,"byte_end":151894,"line_start":99,"line_end":99,"column_start":26,"column_end":42},"kind":{"Impl":{"id":34}},"from":{"krate":0,"index":469},"to":{"krate":2,"index":3050}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":152740,"byte_end":152756,"line_start":122,"line_end":122,"column_start":34,"column_end":50},"kind":{"Impl":{"id":35}},"from":{"krate":0,"index":469},"to":{"krate":0,"index":561}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":153740,"byte_end":153756,"line_start":153,"line_end":153,"column_start":31,"column_end":47},"kind":{"Impl":{"id":36}},"from":{"krate":0,"index":469},"to":{"krate":2,"index":2425}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":154004,"byte_end":154017,"line_start":168,"line_end":168,"column_start":17,"column_end":30},"kind":{"Impl":{"id":37}},"from":{"krate":0,"index":931},"to":{"krate":0,"index":489}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":154170,"byte_end":154184,"line_start":177,"line_end":177,"column_start":35,"column_end":49},"kind":{"Impl":{"id":38}},"from":{"krate":0,"index":937},"to":{"krate":0,"index":565}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/hybrid.rs","byte_start":155236,"byte_end":155250,"line_start":203,"line_end":203,"column_start":41,"column_end":55},"kind":{"Impl":{"id":39}},"from":{"krate":0,"index":937},"to":{"krate":0,"index":570}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/rw_lock.rs","byte_start":156591,"byte_end":156592,"line_start":8,"line_end":8,"column_start":34,"column_end":35},"kind":{"Impl":{"id":40}},"from":{"krate":0,"index":535},"to":{"krate":0,"index":561}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/rw_lock.rs","byte_start":156768,"byte_end":156774,"line_start":20,"line_end":20,"column_start":38,"column_end":44},"kind":{"Impl":{"id":41}},"from":{"krate":1,"index":7240},"to":{"krate":0,"index":565}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/rw_lock.rs","byte_start":157358,"byte_end":157364,"line_start":37,"line_end":37,"column_start":28,"column_end":34},"kind":{"Impl":{"id":42}},"from":{"krate":1,"index":7240},"to":{"krate":0,"index":570}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":145924,"byte_end":145930,"line_start":119,"line_end":119,"column_start":29,"column_end":35},"kind":"SuperTrait","from":{"krate":2,"index":2425},"to":{"krate":0,"index":561}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":146336,"byte_end":146349,"line_start":131,"line_end":131,"column_start":31,"column_end":44},"kind":"SuperTrait","from":{"krate":0,"index":565},"to":{"krate":0,"index":570}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147209,"byte_end":147222,"line_start":150,"line_end":150,"column_start":40,"column_end":53},"kind":"SuperTrait","from":{"krate":0,"index":565},"to":{"krate":0,"index":574}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147290,"byte_end":147291,"line_start":151,"line_end":151,"column_start":62,"column_end":63},"kind":{"Impl":{"id":43}},"from":{"krate":0,"index":578},"to":{"krate":0,"index":574}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147644,"byte_end":147647,"line_start":159,"line_end":159,"column_start":35,"column_end":38},"kind":"SuperTrait","from":{"krate":0,"index":570},"to":{"krate":0,"index":579}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/strategy/mod.rs","byte_start":147700,"byte_end":147701,"line_start":160,"line_end":160,"column_start":47,"column_end":48},"kind":{"Impl":{"id":44}},"from":{"krate":0,"index":583},"to":{"krate":0,"index":579}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":6249,"byte_end":6254,"line_start":163,"line_end":163,"column_start":37,"column_end":42},"kind":{"Impl":{"id":45}},"from":{"krate":0,"index":655},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7353,"byte_end":7358,"line_start":198,"line_end":198,"column_start":47,"column_end":52},"kind":{"Impl":{"id":46}},"from":{"krate":0,"index":655},"to":{"krate":2,"index":3026}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7511,"byte_end":7516,"line_start":206,"line_end":206,"column_start":45,"column_end":50},"kind":{"Impl":{"id":47}},"from":{"krate":0,"index":655},"to":{"krate":2,"index":2728}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7652,"byte_end":7657,"line_start":212,"line_end":212,"column_start":55,"column_end":60},"kind":{"Impl":{"id":48}},"from":{"krate":0,"index":655},"to":{"krate":2,"index":2800}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7785,"byte_end":7790,"line_start":218,"line_end":218,"column_start":51,"column_end":56},"kind":{"Impl":{"id":49}},"from":{"krate":0,"index":655},"to":{"krate":2,"index":8701}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":7958,"byte_end":7963,"line_start":224,"line_end":224,"column_start":55,"column_end":60},"kind":{"Impl":{"id":50}},"from":{"krate":0,"index":655},"to":{"krate":2,"index":8708}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":10940,"byte_end":10950,"line_start":305,"line_end":305,"column_start":55,"column_end":65},"kind":{"Impl":{"id":51}},"from":{"krate":0,"index":691},"to":{"krate":2,"index":2728}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":11086,"byte_end":11096,"line_start":311,"line_end":311,"column_start":42,"column_end":52},"kind":{"Impl":{"id":52}},"from":{"krate":0,"index":691},"to":{"krate":2,"index":3050}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":11427,"byte_end":11437,"line_start":323,"line_end":323,"column_start":35,"column_end":45},"kind":{"Impl":{"id":53}},"from":{"krate":0,"index":691},"to":{"krate":2,"index":8701}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":11692,"byte_end":11702,"line_start":335,"line_end":335,"column_start":37,"column_end":47},"kind":{"Impl":{"id":54}},"from":{"krate":0,"index":691},"to":{"krate":2,"index":8708}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":11910,"byte_end":11920,"line_start":344,"line_end":344,"column_start":65,"column_end":75},"kind":{"Impl":{"id":55}},"from":{"krate":0,"index":691},"to":{"krate":2,"index":2800}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":12029,"byte_end":12039,"line_start":350,"line_end":350,"column_start":33,"column_end":43},"kind":{"Impl":{"id":56}},"from":{"krate":0,"index":691},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":24160,"byte_end":24170,"line_start":671,"line_end":671,"column_start":30,"column_end":40},"kind":{"Impl":{"id":57}},"from":{"krate":0,"index":691},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/home/hannydevelop/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.2.0/src/lib.rs","byte_start":25253,"byte_end":25263,"line_start":705,"line_end":705,"column_start":38,"column_end":48},"kind":{"Impl":{"id":58}},"from":{"krate":0,"index":691},"to":{"krate":4294967295,"index":4294967295}}]}